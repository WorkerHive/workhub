(this["webpackJsonpreact-workerhub"]=this["webpackJsonpreact-workerhub"]||[]).push([[0],{1030:function(e,t){},1039:function(e,t){},1041:function(e,t){},1142:function(e,t){},1147:function(e,t){},1216:function(e,t){},1238:function(e,t){},1240:function(e,t){},1427:function(e,t,n){},1428:function(e,t,n){},1431:function(e,t,n){},1432:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"type",(function(){return mn})),n.d(a,"modal",(function(){return hn})),n.d(a,"node",(function(){return vn}));var r={};n.r(r),n.d(r,"type",(function(){return In})),n.d(r,"modal",(function(){return Tn})),n.d(r,"node",(function(){return Dn}));var c={};n.r(c),n.d(c,"type",(function(){return Pn})),n.d(c,"modal",(function(){return Nn})),n.d(c,"node",(function(){return Mn}));var i=n(3),o=n(0),s=n.n(o),u=n(35),l=n.n(u),d=(n(683),n(15)),j=n(272),b=n(89),f=n(36),p=n(69),O=n(51),m=n(2),h=n.n(m),v=n(86),x=n(14),g=n(1522),y=n(1485),C=n(1436),k=n(182),S=n(1481),q=n(1434),E=n(661),w=n(1484);function I(e){var t=s.a.useState(null),n=Object(x.a)(t,2),a=n[0],r=n[1];return[Object(i.jsx)(q.a,{className:"more-menu",onClick:function(e){e.preventDefault(),e.stopPropagation(),r(e.currentTarget)},children:Object(i.jsx)(S.a,{})}),Object(i.jsx)(E.a,{open:e.menu.length>0&&a,onClose:function(){return r(null)},anchorEl:a,children:e.menu.map((function(e){return Object(i.jsxs)(w.a,{onClick:function(t){t.stopPropagation(),r(null),e.action()},style:{color:e.color||"black"},children:[e.icon,Object(i.jsx)(k.a,{style:{marginLeft:8},children:e.label})]})}))})]}var T=n(131),D=n(1486),P=n(1435);var N=Object(p.b)((function(e){return{user:Object(T.a)(e.auth.token)}}),(function(e){return{}}))((function(e){return Object(i.jsxs)(P.a,{className:"dashapp-header",children:[Object(i.jsx)(k.a,{variant:"h6",children:e.title}),Object(i.jsx)("div",{className:"dashapp-header__tabs",children:Object(i.jsx)(g.a,{value:e.tabs.map((function(e){return e.toLowerCase()})).indexOf(e.selectedTab.toLowerCase()),onChange:function(t,n){e.onTabSelect(e.tabs[n])},children:(e.tabs||[]).map((function(e){return Object(i.jsx)(y.a,{label:e})}))})}),Object(i.jsxs)("div",{className:"actions-col",children:[Object(i.jsx)(D.a,{}),Object(i.jsxs)("div",{className:"user-info",children:[Object(i.jsx)(k.a,{variant:"subtitle1",children:e.user.name}),Object(i.jsx)("span",{children:"Online"})]})]})]})})),M=n(1491),L=n(1493),A=n(1494),_=n(1527),$=n(1490),B=n(1492),R=n(237),F=n(1495),U=n(1483);n(688);function W(e){return Object(i.jsxs)(P.a,{style:{flex:1,marginTop:12},children:[Object(i.jsxs)("div",{className:"options-bar",children:[Object(i.jsx)(_.a,{InputProps:{startAdornment:Object(i.jsx)($.a,{position:"start",children:Object(i.jsx)(M.a,{})})},label:"Search",variant:"outlined",size:"small"}),Object(i.jsxs)(B.a,{children:[Object(i.jsx)(R.a,{children:Object(i.jsx)(L.a,{})}),Object(i.jsx)(R.a,{children:Object(i.jsx)(A.a,{})})]})]}),Object(i.jsx)(F.a,{}),Object(i.jsx)("div",{className:"grid-list",children:Object(i.jsx)(U.a,{children:e.data.map((function(t){return Object(i.jsx)(C.a,{children:e.renderItem(t)})}))})})]})}var z=n(1498),G=n(1496),J=n(1524),H=n(664),Y=n(1438),Q=n(666),K=n(667),V=n(1497);n(689);function Z(e){var t=s.a.useState(!1),n=Object(x.a)(t,2),a=n[0],r=n[1],c=s.a.useState({}),o=Object(x.a)(c,2),u=o[0],l=o[1],d=s.a.useState({}),j=Object(x.a)(d,2),b=j[0],f=j[1],p=e.permissions&&e.permissions[0]||{},O=e.type&&e.type[0]||{};s.a.useEffect((function(){e.selected&&f(e.selected)}),[e.selected]);var m=function(){e.onClose(),r(!1),f({})};return Object(i.jsxs)("div",{className:"permission-form",children:[Object(i.jsxs)(H.a,{fullWidth:!0,open:e.selected||a,onClose:function(){m()},children:[Object(i.jsx)(Y.a,{children:O.name}),Object(i.jsx)(Q.a,{style:{display:"flex",flexDirection:"column"},children:function(e){var t=[],n=function(){var n=a;switch(e.typeDef[a]){case"String":t.push(Object(i.jsx)(_.a,{value:b[n],onChange:function(e){var t=Object.assign({},b),a=Object.assign({},u);t[n]=e.target.value,a[n]=e.target.value,f(t),l(a)},label:n}));break;case"Boolean":t.push(Object(i.jsx)(G.a,{control:Object(i.jsx)(J.a,{checked:b[n],onChange:function(e){var t=Object.assign({},b),a=Object.assign({},u);t[n]=e.target.checked,a[n]=e.target.checked,f(t),l(a)}}),label:n}))}};for(var a in e.typeDef)n();return t}(O)}),Object(i.jsxs)(K.a,{children:[Object(i.jsx)(R.a,{onClick:function(){m()},children:"Cancel"}),Object(i.jsx)(R.a,{onClick:function(){return e.onSave(b,u),void m()},color:"primary",variant:"contained",children:"Save"})]})]}),Object(i.jsx)("div",{className:"permission-form__inner",children:e.children}),p.create&&Object(i.jsx)(V.a,{onClick:function(){return r(!0)},color:"primary",style:{position:"absolute",bottom:12,right:12},children:Object(i.jsx)(z.a,{})})]})}var X=n(60),ee="SET_PROJECTS",te="ADD_PROJECT",ne="REMOVE_PROJECT",ae="UPDATE_PROJECT",re="SET_TEAM",ce="ADD_TEAM_MEMBER",ie="REMOVE_TEAM_MEMBER",oe="UPDATE_TEAM_MEMBER",se="SET_EQUIPMENT",ue="ADD_EQUIPMENT",le="UPDATE_EQUIPMENT",de="REMOVE_EQUIPMENT",je="SET_FILES",be="SET_BOOKINGS",fe="ADD_BOOKING",pe="SET_TOKEN",Oe="ADD_FILE",me="SET_DASHBOARD_TYPES",he="SET_DASHBOARD_PERMS",ve=n(277),xe=n(1499),ge=n.n(xe),ye=function(){return new f.ApolloClient({link:ge()({uri:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_GRAPH_URL||"/graphql"}),cache:new f.InMemoryCache({addTypename:!1})})};function Ce(){var e=Object(X.a)(["\n        query GetProjects {\n          projects{\n            id\n            name\n            description\n            status\n            files{\n              filename\n              cid\n            }\n          }\n        }\n      "]);return Ce=function(){return e},e}function ke(){var e=Object(X.a)(["\n          mutation RemoveProject($projectId: ID){\n            removeProject(projectId: $projectId)\n          }\n        "]);return ke=function(){return e},e}function Se(){var e=Object(X.a)(["\n  mutation UpdateProject($projectId: ID, $project: ProjectInput){\n    updateProject(projectId: $projectId, project: $project){\n      id\n      name\n      description\n      status\n    }\n  }\n"]);return Se=function(){return e},e}function qe(){var e=Object(X.a)(["\n      mutation AddProject($project: ProjectInput){\n        addProject(project: $project){\n          id\n          name\n          description\n          status\n        }\n      }\n    "]);return qe=function(){return e},e}var Ee=ye(),we=n(152),Ie=n.n(we);n(700);var Te,De=Object(p.b)((function(e){return{user:Object(T.a)(e.auth.token),projects:e.projects.list,type:e.dashboard.types.filter((function(e){return"Projects"==e.name})),permissions:e.dashboard.permissions.filter((function(e){return"Projects"==e.type}))}}),(function(e){return{getProjects:function(){return e((function(e){return Ee.query({query:Object(f.gql)(Ce())}).then((function(t){e({type:ee,projects:t.data.projects.map((function(e){var t=Object(ve.cloneDeep)(e);return delete t.__typename,t}))})}))}))},addProject:function(t){return e(function(e){return function(t){return Ee.mutate({mutation:Object(f.gql)(qe()),variables:{project:e}}).then((function(e){return e.data.addProject})).then((function(e){t({type:te,newProject:e})}))}}(t))},updateProject:function(t,n){return e(function(e,t){return function(n){return Ee.mutate({mutation:Object(f.gql)(Se()),variables:{projectId:e,project:t}}).then((function(e){return e.data.updateProject})).then((function(a){n({type:ae,project:t,id:e})}))}}(t,n))},removeProject:function(t){return e((n=t,function(e){return Ee.mutate({mutation:Object(f.gql)(ke()),variables:{projectId:n}}).then((function(e){return e.data.removeProject})).then((function(t){t&&e({type:ne,id:n})}))}));var n}}}))((function(e){var t=Ie.a.parse(e.location.search,{ignoreQueryPrefix:!0}),n=s.a.useState(null),a=Object(x.a)(n,2),r=a[0],c=a[1];return s.a.useEffect((function(){e.getProjects()}),[]),[Object(i.jsx)(N,{tabs:["ALL"].concat(Object(O.a)(new Set(e.projects.filter((function(e){return null!=e.status&&void 0!=e.status})).map((function(e){return e.status.trim().toUpperCase()})))))||[],onTabSelect:function(n){"ALL"==n?(delete t.status,e.history.push("".concat(window.location.pathname,"?").concat(Ie.a.stringify(t)))):(t.status=n,e.history.push("".concat(window.location.pathname,"?").concat(Ie.a.stringify(t))))},selectedTab:t.status&&t.status.toUpperCase()||"ALL",title:"Projects"}),Object(i.jsx)(Z,{onSave:function(t,n){if(t.id){var a=Object.assign({},n);delete a.id,e.updateProject(t.id,a)}else e.addProject(n)},onClose:function(){return c(null)},selected:r,type:e.type,permissions:e.permissions,children:Object(i.jsx)(W,{data:e.projects.filter((function(e){return!(!t.status||e.status!=t.status)||!t.status})).filter((function(e){return e.name})),renderItem:function(t){return[Object(i.jsxs)("div",{className:"project-item",children:[Object(i.jsx)(C.a,{button:!0,onClick:function(){e.history.push("".concat(e.match.url,"/").concat(t.id,"/plan"))},children:Object(i.jsx)(k.a,{style:{flex:1},variant:"subtitle1",children:t.name})}),Object(i.jsx)(I,{menu:[].concat(e.user.admin?[{label:"Edit",action:function(){return c(t)}},{label:"Delete",color:"red",action:function(){return e.removeProject(t.id)}}]:[])})]})]}})})]})),Pe=n(140),Ne=n(659),Me=function(){var e=new Pe.a;new Ne.a("wss://".concat("thetechcompany.workhub.services",":1234"),"workhub",e),e.getMap("");return e},Le=n(235),Ae=n(143),_e=n.n(Ae),$e=(n(702),Me()),Be=Object(Le.b)(_e.a);function Re(){var e=Object(X.a)(["\n        query GetFiles{\n          files{\n            id\n            filename\n            cid\n            extension\n            conversion{\n              extension\n              cid\n            }\n          }\n        }\n      "]);return Re=function(){return e},e}function Fe(){var e=Object(X.a)(["\n      mutation InstallConverter($converterId: ID){\n        installConverter(converterId: $converterId)\n      }\n    "]);return Fe=function(){return e},e}function Ue(){var e=Object(X.a)(["\n      query GetConverters{\n        converters{\n          id\n          name\n          sourceFormat\n          targetFormat\n          installed\n        }\n      }\n    "]);return Ue=function(){return e},e}function We(){var e=Object(X.a)(["\n    mutation ConvertFile($fileId: ID, $targetFormat:String){\n      convertFile(fileId: $fileId, targetFormat: $targetFormat){\n        msg\n        error\n      }\n    }\n  "]);return We=function(){return e},e}function ze(){var e=Object(X.a)(["\n    mutation AttachFile($projectId: ID, $fileId: ID){\n      attachFileToProject(projectId: $projectId, fileId: $fileId){\n        files{\n          cid\n        }\n      }\n    }\n    "]);return ze=function(){return e},e}function Ge(){var e=Object(X.a)(["\n    mutation UploadFile($file: Upload!){\n      uploadFile(file: $file) {\n        duplicate\n        file{\n          id\n          filename\n          cid\n          extension\n        }\n      }\n    }\n  "]);return Ge=function(){return e},e}var Je=ye(),He=Object(f.gql)(Ge()),Ye=function(){return Je.query({query:Object(f.gql)(Ue())}).then((function(e){return e.data.converters}))};var Qe=Object(p.b)((function(e){return{files:e.files.list}}))((function(e){var t=s.a.useState(""),n=Object(x.a)(t,2),a=n[0],r=n[1],c=s.a.useState({}),o=Object(x.a)(c,2),u=o[0],l=o[1];return Object(i.jsxs)(H.a,{fullWidth:!0,open:e.open,onClose:e.onClose,children:[Object(i.jsx)(Y.a,{children:"Files"}),Object(i.jsxs)(Q.a,{children:[Object(i.jsx)(_.a,{fullWidth:!0,value:a,onChange:function(e){return r(e.target.value)},label:"Search",InputProps:{startAdornment:Object(i.jsx)($.a,{position:"start",children:Object(i.jsx)(M.a,{})})}}),Object(i.jsx)(U.a,{children:e.files.filter((function(e){return e.filename&&e.filename.toLowerCase().indexOf(a.toLowerCase())>-1})).map((function(e){return Object(i.jsxs)(C.a,{button:!0,children:[Object(i.jsx)(J.a,{checked:u[e.id],onChange:function(t){var n=u;n[e.id]=t.target.checked,l(n)}}),e.filename]})}))})]}),Object(i.jsxs)(K.a,{children:[Object(i.jsx)(R.a,{onClick:e.onClose,children:"Close"}),Object(i.jsx)(R.a,{color:"primary",variant:"contained",onClick:function(){e.onAttach&&(e.onAttach(u),l({}),e.onClose())},children:"Attach"})]})]})}));var Ke=n(17),Ve=n(42),Ze=n(154),Xe=n(1501),et=n(1502),tt=n(1503),nt=n(1505),at=n(663),rt=n(1439),ct=n(1500),it=n(1504),ot=n(1525);n(703);var st=Object(p.b)((function(e){return{user:Object(T.a)(e.auth.token)}}))((function(e){var t=s.a.useState(""),n=Object(x.a)(t,2),a=n[0],r=n[1],c=s.a.useState(""),o=Object(x.a)(c,2),u=o[0],l=o[1],d=s.a.useState(""),j=Object(x.a)(d,2),b=j[0],f=j[1],p=s.a.useState(null),O=Object(x.a)(p,2),m=O[0],h=O[1],v=s.a.useState([]),g=Object(x.a)(v,2),y=g[0],C=g[1];return s.a.useEffect((function(){e.plan&&(r(e.plan.id),l(e.plan.title),f(e.plan.description),C(e.plan.members||[]),e.plan.dueDate&&h(_e()(new Date(1e3*e.plan.dueDate))))}),[e.plan]),Object(i.jsxs)(H.a,{fullWidth:!0,open:e.open,onClose:e.onClose,children:[Object(i.jsx)(Y.a,{children:Object(i.jsx)(_.a,{value:u,onChange:function(e){return l(e.target.value)},fullWidth:!0,label:"Title"})}),Object(i.jsxs)(Q.a,{className:"plan-dialog__content",children:[Object(i.jsx)("div",{className:"plan-info",children:Object(i.jsx)(_.a,{value:b,onChange:function(e){return f(e.target.value)},fullWidth:!0,label:"Description",rows:3,multiline:!0,rowsMax:6})}),Object(i.jsxs)("div",{className:"plan-actions",children:[Object(i.jsx)(R.a,{onClick:function(){var t=y.slice();y.indexOf(e.user.id)>-1?t.splice(y.indexOf(e.user.id),1):t.push(e.user.id),C(t)},color:y.indexOf(e.user.id)>-1?"":"primary",variant:"contained",children:y.indexOf(e.user.id)>-1?"Leave":"Join"}),Object(i.jsx)(R.a,{color:"primary",variant:"contained",children:"Members"}),Object(i.jsx)(ot.a,{label:"Due Date",value:m,onChange:function(e){h(e)},format:"DD/MM/yyyy"})]})]}),Object(i.jsxs)(K.a,{children:[Object(i.jsx)(R.a,{onClick:e.onClose,children:"Cancel"}),Object(i.jsx)(R.a,{onClick:function(){var t={id:a,title:u,description:b,dueDate:m&&m.valueOf()/1e3,members:y};e.onSave&&(e.onSave(t),e.onClose())},color:"primary",variant:"contained",children:"Save"})]})]})})),ut=n(111),lt=n(646),dt=n.n(lt);n(709),n(710);function jt(e){var t=s.a.useState([{id:0,title:"Blocked",cards:[]},{id:1,title:"Backlog",cards:e.graph.nodes.filter((function(e){return"COMPLETED"!=e.status&&"BLOCKED"!=e.status})).map((function(e){return{id:e.id,title:e.data.label}}))},{id:2,title:"Doing",cards:[]},{id:3,title:"Done",cards:[]}]),n=Object(x.a)(t,2),a=n[0],r=n[1];return Object(i.jsx)(dt.a,{renderCard:function(t){return Object(i.jsxs)("div",{onClick:function(){e.onClick&&e.onClick(t)},className:"react-kanban-card",children:[Object(i.jsx)("div",{className:"react-kanban-card__title",children:t.title}),Object(i.jsx)("div",{children:t.description})]})},onCardDragEnd:function(t,n,c){console.log(n,c);var i=a.slice(),o=i.map((function(e){return e.id})).indexOf(n.fromColumnId),s=i.map((function(e){return e.id})).indexOf(c.toColumnId),u=i[o].cards.splice(n.fromPosition,1);i[s].cards.splice(c.toPosition,0,u[0]),e.onStatusChange&&e.onStatusChange(t,e.template.filter((function(e){return e.id==c.toColumnId}))[0].status),e.onChange&&e.onChange(i),r(i)},onColumnDragEnd:function(t,n,c){var i=a.slice(),o=i.splice(n.fromPosition,1)[0];i.splice(c.toPosition,0,o),e.onChange&&e.onChange(i),r(i)},children:{columns:function(){var t=[];return e.template&&(t=e.template||[]),t.map((function(t){t.id;console.log(e.graph.nodes);var n=e.graph.nodes.filter((function(e){return e.data.status==t.status}))||[];return console.log(e.graph.links),Object(d.a)(Object(d.a)({},t),{},{cards:n.map((function(t){var n=e.graph.links.filter((function(e){return e.target==t.id})).map((function(t){return e.graph.nodes.filter((function(e){return e.id==t.source}))[0]}));return{id:t.id,title:t.data.label,description:n.length>0&&n[0].data.label,dueDate:t.data.dueDate,members:t.members||[]}}))})}))}()}})}var bt,ft=n(456),pt=n(430),Ot=(n(711),Me());function mt(e){return Object(i.jsx)(at.a,Object(d.a)(Object(d.a)({fontSize:"inherit",style:{width:14,height:14}},e),{},{children:Object(i.jsx)("path",{d:"M22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0zM17.873 11.023h-11.826q-.375 0-.669.281t-.294.682v0q0 .401.294 .682t.669.281h11.826q.375 0 .669-.281t.294-.682v0q0-.401-.294-.682t-.669-.281z"})}))}function ht(e){return Object(i.jsx)(at.a,Object(d.a)(Object(d.a)({fontSize:"inherit",style:{width:14,height:14}},e),{},{children:Object(i.jsx)("path",{d:"M22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0zM17.873 12.977h-4.923v4.896q0 .401-.281.682t-.682.281v0q-.375 0-.669-.281t-.294-.682v-4.896h-4.923q-.401 0-.682-.294t-.281-.669v0q0-.401.281-.682t.682-.281h4.923v-4.896q0-.401.294-.682t.669-.281v0q.401 0 .682.281t.281.682v4.896h4.923q.401 0 .682.281t.281.682v0q0 .375-.281.669t-.682.294z"})}))}function vt(e){return Object(i.jsx)(at.a,Object(d.a)(Object(d.a)({className:"close",fontSize:"inherit",style:{width:14,height:14}},e),{},{children:Object(i.jsx)("path",{d:"M17.485 17.512q-.281.281-.682.281t-.696-.268l-4.12-4.147-4.12 4.147q-.294.268-.696.268t-.682-.281-.281-.682.294-.669l4.12-4.147-4.12-4.147q-.294-.268-.294-.669t.281-.682.682-.281.696 .268l4.12 4.147 4.12-4.147q.294-.268.696-.268t.682.281 .281.669-.294.682l-4.12 4.147 4.12 4.147q.294.268 .294.669t-.281.682zM22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0z"})}))}function xt(e){var t=Object(pt.useSpring)({from:{opacity:0,transform:"translate3d(20px,0,0)"},to:{opacity:e.in?1:0,transform:"translate3d(".concat(e.in?0:20,"px,0,0)")}});return Object(i.jsx)(pt.animated.div,{style:t,children:Object(i.jsx)(rt.a,Object(d.a)({},e))})}var gt=Object(Ke.a)((function(e){return{iconContainer:{"& .close":{opacity:.3}},group:{marginLeft:7,paddingLeft:18,borderLeft:"1px dashed ".concat(Object(Ve.c)(e.palette.text.primary,.4))}}}))((function(e){return Object(i.jsx)(it.a,Object(d.a)(Object(d.a)({},e),{},{label:Object(i.jsxs)("div",{className:"tree-item",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.label,Object(i.jsxs)("div",{style:{display:"flex"},children:[Object(i.jsx)(q.a,{onClick:function(t){t.stopPropagation(),e.editChild&&e.editChild()},children:Object(i.jsx)(nt.a,{})}),Object(i.jsx)(q.a,{onClick:function(t){t.stopPropagation(),e.addChild()},children:Object(i.jsx)(z.a,{})})]})]}),TransitionComponent:xt}))}));Object(Ze.a)({root:{height:264,flexGrow:1,maxWidth:400}});var yt=function(e){var t=s.a.useState([]),n=Object(x.a)(t,2),a=(n[0],n[1],s.a.useState([])),r=Object(x.a)(a,2),c=r[0],o=r[1],u=s.a.useState(null),l=Object(x.a)(u,2),d=l[0],j=l[1],b=s.a.useState({}),f=Object(x.a)(b,2),p=f[0],O=f[1],m=function(){if(Te){var e=Te.toJSON();console.log("OBSERVE",e),null!=e.nodes&&o(e.nodes.map((function(e){return Object.assign({},e)})))}};return s.a.useEffect((function(){if(console.log("YDC",e),e.project&&$e&&e.project.id!=p.id){d&&d.unobserve(m),console.log("Setting up YDOC");var t=$e.getMap("plan-".concat(e.project.id));Te=t,j(t),t.observe(m),O(e.project);var n=t.toJSON();null!=n.nodes&&o(n.nodes)}}),[e.project,d]),Object(i.jsx)("div",{className:"calendar-tab",children:Object(i.jsx)(Le.a,{localizer:Be,events:c.filter((function(e){return e.data&&e.data.dueDate})).map((function(e){return{id:e.id,title:e.data.label,allDay:!1,start:new Date(1e3*e.data.dueDate-3e5),end:new Date(1e3*e.data.dueDate)}})),startAccessor:"start",endAccessor:"end",style:{flex:1}})})},Ct=function(e){var t=s.a.useState(!1),n=Object(x.a)(t,2),a=n[0],r=n[1];return s.a.useEffect((function(){console.log(e.project)})),Object(i.jsxs)("div",{children:[Object(i.jsx)(U.a,{children:e.project&&e.project.files&&e.project.files.map((function(e){return Object(i.jsx)(C.a,{children:e.filename})}))}),Object(i.jsx)(Qe,{onAttach:function(t){for(var n in t)a=e.project.id,r=n,Je.mutate({mutation:Object(f.gql)(ze()),variables:{projectId:a,fileId:r}}).then((function(e){return e.data.attachFileToProject})).then((function(e){console.log(e)}));var a,r},open:a,onClose:function(){return r(!1)}}),Object(i.jsx)(V.a,{style:{position:"absolute",bottom:12,right:12},color:"primary",onClick:function(){return r(!0)},children:Object(i.jsx)(z.a,{})})]})},kt=function(e){var t=s.a.useState(null),n=Object(x.a)(t,2),a=n[0],r=n[1],c=Ie.a.parse(window.location.search,{ignoreQueryPrefix:!0}),o=s.a.useState("list"),u=Object(x.a)(o,2),l=(u[0],u[1],s.a.useState([])),j=Object(x.a)(l,2),b=j[0],f=j[1],p=s.a.useState([]),O=Object(x.a)(p,2),m=O[0],h=O[1],v=s.a.useState(["root"]),g=Object(x.a)(v,2),y=g[0],C=g[1],k=s.a.useState({}),S=Object(x.a)(k,2),q=S[0],E=S[1],w=s.a.useState(null),I=Object(x.a)(w,2),T=I[0],D=I[1],P=function(){if(bt){var e=bt.toJSON();console.log("OBSERVE",e),null!=e.nodes&&f(e.nodes.map((function(e){return Object.assign({},e)}))),null!=e.links&&h(e.links.map((function(e){return Object.assign({},e)})))}};s.a.useEffect((function(){if(console.log("YDC",e),e.project&&Ot&&e.project.id!=q.id){T&&T.unobserve(P),console.log("Setting up YDOC");var t=Ot.getMap("plan-".concat(e.project.id));bt=t,D(t),t.observe(P),E(e.project);var n=t.toJSON();null!=n.nodes&&f(n.nodes),null!=n.links&&h(n.links)}}),[e.project,T]);var N=function(e){T&&T.set("nodes",e),f(e)},M=function(e){T&&T.set("links",e),h(e)},L=function e(t){if(t){var n=m.filter((function(e){return e.source==t.id})).map((function(e){return b.filter((function(t){return t.id==e.target}))[0]})),a=b.filter((function(e){return e.id==t.id}))[0].position;return Object(i.jsx)(gt,{editChild:function(){r({id:t.id,title:t.data.label,description:t.data.description,dueDate:t.dueDate,members:t.members})},addChild:function(){var e=A({type:"baseNode",data:{label:""},position:{x:a.x,y:a.y+121}});_({target:e.id,source:t.id}),r({id:e.id,title:"",dueDate:null,members:[]})},nodeId:t.id,label:t&&t.data&&t.data.label,children:(n||[]).map((function(t){return e(t)}))})}},A=function(e){var t=b.slice();return e.id=Object(ft.a)(),e.data||(e.data={}),e.position||(e.position={x:300,y:300}),t.push(e),N(t),e},_=function(e){var t=m.slice();return e.id=Object(ft.a)(),t.push(e),M(t),e},$=s.a.useState([]),U=Object(x.a)($,2),W=U[0],z=(U[1],function(){var t=b.filter((function(e){return 0==m.filter((function(t){return t.target==e.id})).length}));return Object(i.jsx)(ct.a,{multiSelect:!0,defaultExpanded:["1"],expanded:y,onNodeToggle:function(e,t){console.log(e,t),C(t)},defaultCollapseIcon:Object(i.jsx)(mt,{}),defaultExpandIcon:Object(i.jsx)(ht,{}),defaultEndIcon:Object(i.jsx)(vt,{}),children:Object(i.jsx)(gt,{addChild:function(){var e=A({type:"baseNode",data:{label:""}});r({id:e.id,title:"",dueDate:null,members:[]}),console.log(b,m)},nodeId:"root",label:e.project.name,children:t.map((function(e){return L(e)}))})})}),G=function(t){c||(c={}),c.view=t,e.history.push("".concat(e.location.pathname,"?").concat(Ie.a.stringify(c)))},J=c.view||"kanban";return Object(i.jsxs)("div",{style:{padding:4,display:"flex",flex:1,position:"relative",flexDirection:"column",width:"calc(100% - 8px)"},children:[Object(i.jsx)(st,{onSave:function(e){console.log(e);var t=b.slice(),n=t.map((function(e){return e.id})).indexOf(e.id),a={};e.title&&(a.label=e.title),e.description&&(a.description=e.description),e.dueDate&&(a.dueDate=e.dueDate),t[n]=Object(d.a)(Object(d.a)({},t[n]),{},{data:Object(d.a)(Object(d.a)({},t[n].data),a),members:e.members}),N(t)},open:a,plan:a,onClose:function(){return r(null)}}),Object(i.jsxs)("div",{className:"plan-header",children:[Object(i.jsx)("div",{}),Object(i.jsxs)(B.a,{children:[Object(i.jsx)(R.a,{variant:"kanban"==J&&"contained",onClick:function(){return G("kanban")},children:Object(i.jsx)(Xe.a,{})}),Object(i.jsx)(R.a,{variant:"list"==J&&"contained",onClick:function(){return G("list")},children:Object(i.jsx)(et.a,{})}),Object(i.jsx)(R.a,{variant:"hive"==J&&"contained",onClick:function(){return G("hive")},children:Object(i.jsx)(tt.a,{})})]})]}),Object(i.jsx)(F.a,{}),Object(i.jsx)("div",{className:"plan-container",children:function(){switch(c.view||"kanban"){case"kanban":return Object(i.jsx)(jt,{onClick:function(e){r({id:e.id,title:e.title,dueDate:e.dueDate,members:e.members})},onStatusChange:function(e,t){var n=b.slice(),a=n.map((function(e){return e.id})).indexOf(e.id);n[a].data.status=t,N(n)},onChange:function(e){},template:[{id:0,title:"Blocked",status:"BLOCKED"},{id:1,title:"Ready to be Done",status:"UNFINISHED"},{id:2,title:"Doing",status:"IN PROGRESS"},{id:3,title:"Done",status:"COMPLETE"}],map:W,graph:{nodes:b,links:m}});case"list":return z();case"hive":return Object(i.jsx)("div",{className:"plan-hive",children:Object(i.jsx)(ut.b,{nodes:b,links:m,onNodeChange:function(e){return N(e)},onLinkChange:function(e){return M(e)}})});default:return}}()})]})},St=function(e){return Object(i.jsx)("div",{})};n(715);var qt=Object(p.b)((function(e,t){return{project:e.projects.list.filter((function(e){return e.id==t.match.params.id}))}}))((function(e){var t=s.a.useState({}),n=Object(x.a)(t,2),a=n[0],r=n[1],c=s.a.useState(null),o=Object(x.a)(c,2),u=o[0],l=o[1];return s.a.useEffect((function(){e.project&&e.project.length>0&&r(e.project[0])}),[e.project]),[Object(i.jsx)(N,{tabs:["Plan","Calendar","Team","Files"],onTabSelect:function(t){l(t),e.history.push("".concat(e.match.url,"/").concat(t.toLowerCase()))},selectedTab:u||e.location.pathname.replace("".concat(e.match.url,"/"),""),title:a.name}),Object(i.jsx)(P.a,{style:{flex:1,width:"100%",height:"calc(100vh - 76px)",marginTop:12,display:"flex"},children:Object(i.jsxs)(b.d,{children:[Object(i.jsx)(b.b,{path:"".concat(e.match.url,"/plan"),render:function(e){return Object(i.jsx)(kt,Object(d.a)(Object(d.a)({},e),{},{y:e.y,project:a}))}}),Object(i.jsx)(b.b,{path:"".concat(e.match.url,"/calendar"),render:function(e){return Object(i.jsx)(yt,Object(d.a)(Object(d.a)({},e),{},{y:e.y,project:a}))}}),Object(i.jsx)(b.b,{path:"".concat(e.match.url,"/team"),render:function(e){return Object(i.jsx)(St,Object(d.a)(Object(d.a)({},e),{},{project:a}))}}),Object(i.jsx)(b.b,{path:"".concat(e.match.url,"/files"),render:function(e){return Object(i.jsx)(Ct,Object(d.a)(Object(d.a)({},e),{},{project:a}))}})]})})]})),Et=n(1507),wt=n(1508),It=n(647),Tt=n(1506),Dt=n(1489),Pt=n(1529),Nt=n(1523);function Mt(e){var t=s.a.useState(""),n=Object(x.a)(t,2),a=n[0],r=n[1],c=s.a.useState([]),o=Object(x.a)(c,2),u=o[0],l=o[1];s.a.useEffect((function(){Ye().then((function(e){l(e.map((function(e){return{from:e.sourceFormat,to:[e.targetFormat]}})))}))}),[]);return Object(i.jsxs)(H.a,{fullWidth:!0,open:e.open,onClose:e.onClose,children:[Object(i.jsxs)(Y.a,{children:["Convert ",e.selected&&e.selected.filename]}),Object(i.jsxs)(Q.a,{style:{display:"flex",alignItems:"center"},children:[Object(i.jsx)(_.a,{fullWidth:!0,disabled:!0,label:"From",value:e.selected&&e.selected.extension.toUpperCase()}),Object(i.jsx)(Tt.a,{style:{marginLeft:8,marginRight:8}}),Object(i.jsxs)(Dt.a,{fullWidth:!0,children:[Object(i.jsx)(Pt.a,{children:"To"}),Object(i.jsx)(Nt.a,{value:a,onChange:function(e){r(e.target.value)},fullWidth:!0,children:e.selected&&(u.filter((function(t){return t.from==e.selected.extension}))[0]||{to:[]}).to.map((function(e){return Object(i.jsx)(w.a,{value:e,children:e.toUpperCase()})}))})]})]}),Object(i.jsxs)(K.a,{children:[Object(i.jsx)(R.a,{onClick:e.onClose,children:"Cancel"}),Object(i.jsx)(R.a,{onClick:function(){var t,n;t=e.selected.id,n=a.toLowerCase(),Je.mutate({mutation:Object(f.gql)(We()),variables:{fileId:t,targetFormat:n}}).then((function(e){return e.data.convertFile}))},color:"primary",variant:"contained",children:"Start"})]})]})}var Lt=n(660);n(727);var At=Object(p.b)((function(e){return{files:e.files.list}}),(function(e){return{addFile:function(t){return e(function(e){return function(t){t({type:Oe,file:e})}}(t))},getFiles:function(){return e((function(e,t){return Je.query({query:Object(f.gql)(Re())}).then((function(e){return e.data.files})).then((function(t){e({type:je,files:t})}))}))}}}))((function(e){var t=Object(f.useMutation)(He),n=Object(x.a)(t,2),a=n[0],r=n[1].data,c=s.a.useState(null),u=Object(x.a)(c,2),l=u[0],j=u[1],b=s.a.useState(null),p=Object(x.a)(b,2),O=p[0],m=p[1],g=Object(o.useCallback)(function(){var t=Object(v.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n&&n.length>0&&(console.log(n),a({variables:{file:n[0]}}).then((function(t){t.data&&t.data.uploadFile&&!t.data.uploadFile.duplicate&&e.addFile(t.data.uploadFile.file)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[r]),y=Object(Lt.a)({onDrop:g,noClick:!0}),k=y.getRootProps,S=y.getInputProps,q=y.isDragActive,E=s.a.useState([]),w=Object(x.a)(E,2),T=(w[0],w[1],s.a.useState(["pdf","glb","png"])),D=Object(x.a)(T,1)[0];return s.a.useEffect((function(){e.getFiles()}),[]),[Object(i.jsx)(N,{tabs:[],onTabSelect:function(e){},selectedTab:"",title:"Files"}),Object(i.jsxs)(Z,{type:e.type,permissions:e.permissions,children:[Object(i.jsx)(It.a,{ipfs:e.ipfs,open:O,file:O,onClose:function(){return m(null)}}),Object(i.jsx)(Mt,{open:l,selected:l,onClose:function(){return j(null)}}),Object(i.jsxs)("div",Object(d.a)(Object(d.a)({className:q?"file-list selected":"file-list"},k()),{},{children:[Object(i.jsx)("input",Object(d.a)({},S())),Object(i.jsx)(W,{data:e.files,renderItem:function(e){return Object(i.jsxs)("div",{className:"file-item",children:[Object(i.jsxs)(C.a,{button:!0,onClick:function(t){if(t.stopPropagation(),D.indexOf(e.extension)>-1||e.conversion&&D.indexOf(e.conversion.extension)>-1){var n={};D.indexOf(e.extension)>-1?n={filename:e.filename,cid:e.cid,extension:e.extension}:e.conversion&&D.indexOf(e.conversion.extension)>-1&&(n={filename:e.filename,cid:e.conversion.cid,extension:e.conversion.extension}),m(n)}},children:[Object(i.jsx)(J.a,{onClick:function(e){e.stopPropagation()}}),Object(i.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column"},children:[Object(i.jsx)("div",{children:e.filename}),Object(i.jsx)("span",{style:{fontSize:10},children:e.cid})]})]}),Object(i.jsx)(I,{menu:[{label:"Convert",icon:Object(i.jsx)(Et.a,{}),action:function(){j(e)}},{label:"Get Info",icon:Object(i.jsx)(wt.a,{}),action:function(){}}]})]})}})]}))]})]})),_t=n(1521);function $t(){var e=Object(X.a)(["\n            query GetBookings{\n                calendar{\n                    id\n                    startTime\n                    endTime\n                    allDay\n                    date\n                    project {\n                        id\n                        name\n                    }\n                    items {\n                        equipment{\n                            name\n                        }\n                        team {\n                            name\n\n                        }\n                    }\n                }\n            }\n        "]);return $t=function(){return e},e}function Bt(){var e=Object(X.a)(["\n    mutation AddBooking($time: CalendarInput, $projectId: ID, $booking: BookingInput){\n        addBooking(time: $time, projectId: $projectId, booking: $booking){\n            id\n            startTime\n            endTime\n            allDay\n            date\n            project {\n                id \n                name\n            }\n            items {\n                equipment {\n                    name\n                }\n                team {\n                    name\n                }\n            }\n        }\n    }\n  "]);return Bt=function(){return e},e}var Rt,Ft=ye(),Ut=n(1509),Wt=n(1510),zt=Me();var Gt,Jt=Object(p.b)((function(e){return{projects:e.projects.list,team:e.team.list,equipment:e.equipment.list}}),(function(e){return{addBooking:function(t,n,a){return e(function(e,t,n){return function(a){Ft.mutate({mutation:Object(f.gql)(Bt()),variables:{time:e,projectId:t,booking:n}}).then((function(e){return e.data.addBooking})).then((function(e){a({type:fe,booking:e})}))}}(t,n,a))}}}))((function(e){var t=s.a.useState(0),n=Object(x.a)(t,2),a=n[0],r=n[1],c=s.a.useState(0),o=Object(x.a)(c,2),u=o[0],l=o[1],j=s.a.useState(null),b=Object(x.a)(j,2),f=b[0],p=b[1],O=s.a.useState(null),m=Object(x.a)(O,2),h=m[0],v=m[1],k=s.a.useState(!1),S=Object(x.a)(k,2),q=S[0],E=S[1],w=s.a.useState(null),I=Object(x.a)(w,2),T=I[0],D=I[1],P=s.a.useState(null),N=Object(x.a)(P,2),L=N[0],A=N[1],B=s.a.useState(null),W=Object(x.a)(B,2),z=W[0],V=W[1],Z=s.a.useState({}),X=Object(x.a)(Z,2),ee=X[0],te=X[1];return s.a.useEffect((function(){Rt=zt.getMap("calendar")}),[]),Object(i.jsxs)(H.a,{fullWidth:!0,open:e.open,onClose:e.onClose,children:[Object(i.jsx)(Y.a,{children:function(){switch(a){case 1:return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(_.a,{value:f,onChange:function(e){return p(e.target.value)},fullWidth:!0,InputProps:{startAdornment:Object(i.jsx)($.a,{position:"start",children:Object(i.jsx)(M.a,{})})},label:"Search"}),Object(i.jsxs)(g.a,{value:u,onChange:function(e,t){t!==u&&p(""),l(t)},children:[Object(i.jsx)(y.a,{label:"Team"}),Object(i.jsx)(y.a,{label:"Equipment"})]}),Object(i.jsx)(F.a,{})]});case 0:return"Create a booking";default:return null}}()}),Object(i.jsx)(Q.a,{style:{display:"flex",flexDirection:"column",minHeight:250},children:function(){switch(a){case 0:return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(_t.a,{value:z,onChange:function(e,t){return V(t)},options:e.projects,getOptionLabel:function(e){return e.name},renderInput:function(e){return Object(i.jsx)(_.a,Object(d.a)(Object(d.a)({},e),{},{label:"Project"}))}}),Object(i.jsx)(Ut.a,{value:h,format:"DD/MM/yyyy",onChange:function(e,t){return v(e)},margin:"normal",label:"Date",variant:"inline"}),Object(i.jsx)(G.a,{control:Object(i.jsx)(J.a,{checked:q,onChange:function(e){E(e.target.checked)}}),label:"All day"}),!q&&Object(i.jsxs)("div",{style:{display:"flex",marginTop:8},children:[Object(i.jsx)(Wt.a,{value:T,onChange:function(e){return D(e)},label:"Start Time",fullWidth:!0,style:{marginRight:4},variant:"inline"}),Object(i.jsx)(Wt.a,{value:L,onChange:function(e){return A(e)},label:"End Time",fullWidth:!0,style:{marginLeft:4},variant:"inline"})]})]});case 1:return Object(i.jsx)(U.a,{children:(0==u?e.team:e.equipment).filter((function(e){return!f||e.name.toLowerCase().indexOf(f.toLowerCase())>-1})).map((function(e){return Object(i.jsxs)(C.a,{children:[Object(i.jsx)(J.a,{checked:ee[e.id]&&ee[e.id].selected||!1,onChange:function(t){var n=Object.assign({},ee);n[e.id]={selected:t.target.checked,type:0==u?"team":"equipment"},console.log(n),te(n)}}),e.name]})}))});default:return null}}()}),Object(i.jsxs)(K.a,{children:[Object(i.jsx)(R.a,{onClick:"0"==a?e.onClose:function(){return r(0)},children:"0"==a?"Cancel":"Back"}),Object(i.jsx)(R.a,{color:"primary",onClick:function(){if(0==a)r(1);else{var t,n,c=[],i=[];for(var o in ee)if(ee[o].selected)switch(ee[o].type){case"team":i.push(o);break;case"equipment":c.push(o)}T&&((t=_e()(h)).set("hour",T.get("hour")),t.set("minute",T.get("minute"))),L&&((n=_e()(h)).set("hour",L.get("hour")),n.set("minute",L.get("minute")));var s=new Pe.b,u={date:h.valueOf()/1e3,project:z,startTime:t&&parseInt(t.valueOf()/1e3),endTime:n&&parseInt(n.valueOf()/1e3),allDay:q,items:{team:i,equipment:c}};if(s.set("date",u.date),s.set("project",u.project),Rt){console.log("Inserting into yjs");var l=Rt.toJSON().bookings||[];console.log(l),l.push(u),Rt.set("bookings",l),console.log(Rt.toJSON())}e.onClose()}},variant:"contained",children:"1"==a?"Book":"Next"})]})]})})),Ht=(n(728),Object(Le.b)(_e.a)),Yt=Me();var Qt=Object(p.b)((function(e){return{bookings:e.calendar.bookings}}),(function(e){return{getBookings:function(){return e((function(e,t){Ft.query({query:Object(f.gql)($t())}).then((function(e){return e.data.calendar})).then((function(t){console.log(t),e({type:be,bookings:t})}))}))}}}))((function(e){var t=s.a.useState(!1),n=Object(x.a)(t,2),a=n[0],r=n[1],c=s.a.useState([]),o=Object(x.a)(c,2),u=o[0],l=o[1],d=function(){var e=Gt.toJSON();e.bookings&&e.bookings.length>0&&l(e.bookings)};return s.a.useEffect((function(){(Gt=Yt.getMap("calendar")).observe(d);var e=Gt.toJSON();e.bookings&&e.bookings.length>0&&l(e.bookings)}),[]),[Object(i.jsx)(N,{tabs:["All","Me","Projects"],selectedTab:"",onTabSelect:function(t){e.history.push("".concat(e.match.url,"/").concat(t.toLowerCase()))},title:"Calendar"}),Object(i.jsx)(Jt,{y:Gt,open:a,onClose:function(){return r(!1)}}),Object(i.jsxs)(P.a,{style:{position:"relative",marginTop:12,height:"calc(100vh - 84px)",flex:1,display:"flex",flexDirection:"column",padding:4},children:[Object(i.jsx)(V.a,{onClick:function(){return r(!0)},color:"primary",style:{zIndex:9,position:"absolute",right:12,bottom:12},children:Object(i.jsx)(z.a,{})}),Object(i.jsx)(Le.a,{localizer:Ht,events:u.map((function(e){return{id:e.id,title:e.project.name,allDay:e.allDay,start:new Date(1e3*(e.startTime||e.date)),end:new Date(1e3*(e.endTime||e.date))}})),startAccessor:"start",endAccessor:"end",style:{flex:1}})]})]}));function Kt(e){var t=s.a.useState([]),n=Object(x.a)(t,2),a=n[0],r=n[1];s.a.useEffect((function(){Ye().then((function(e){console.log(e),r(e)}))}),[]);return Object(i.jsxs)(P.a,{style:{flex:1,marginTop:12},children:[Object(i.jsxs)("div",{style:{display:"flex",flexDirection:"column",padding:8},children:[Object(i.jsx)(k.a,{variant:"h6",style:{display:"flex"},children:"Add-ons"}),Object(i.jsx)(U.a,{children:a.map((function(e){return Object(i.jsxs)(C.a,{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.name,e.installed?Object(i.jsx)(k.a,{children:"Installed"}):Object(i.jsx)(R.a,{onClick:function(){var t;t=e.id,Je.mutate({mutation:Object(f.gql)(Fe()),variables:{converterId:t}})},color:"primary",variant:"contained",children:"Install"})]})}))})]}),Object(i.jsx)(F.a,{}),Object(i.jsxs)("div",{style:{display:"flex",flexDirection:"column",padding:8},children:[Object(i.jsx)(k.a,{variant:"h6",style:{display:"flex"},children:"Connections"}),Object(i.jsx)(U.a,{children:[{name:"MSSQL Server"}].map((function(e){return Object(i.jsx)(C.a,{button:!0,children:e.name})}))})]}),Object(i.jsx)(F.a,{})]})}var Vt=n(1511),Zt=n(1512),Xt=n(1513),en=n(1514),tn=n(1515);function nn(){var e=Object(X.a)(["\n        query GetTeam {\n          team {\n            id\n            status\n            name\n            username\n            password\n            phoneNumber\n            email\n            admin\n          }\n        }\n      "]);return nn=function(){return e},e}function an(){var e=Object(X.a)(["\n        mutation RemoveMember($memberId: ID){\n          removeTeamMember(memberId: $memberId)\n        }\n      "]);return an=function(){return e},e}function rn(){var e=Object(X.a)(["\n  mutation UpdateTeam($memberId: String, $member: TeamMemberInput){\n    updateTeamMember(memberId: $memberId, member: $member){\n      name\n      email\n      phoneNumber\n      admin\n    }\n  }\n"]);return rn=function(){return e},e}function cn(){var e=Object(X.a)(["\n  mutation AddTeamMember($member: TeamMemberInput){\n    addTeamMember(member: $member){\n      id\n      name\n      username\n      email\n      status\n      phoneNumber\n      admin\n    }\n  }\n"]);return cn=function(){return e},e}var on=ye();n(729);var sn=Object(p.b)((function(e){return{user:Object(T.a)(e.auth.token),team:e.team.list,type:e.dashboard.types.filter((function(e){return"Team Members"==e.name})),permissions:e.dashboard.permissions.filter((function(e){return"Team Members"==e.type}))}}),(function(e){return{getTeam:function(){return e((function(e){return on.query({query:Object(f.gql)(nn())}).then((function(e){return e.data.team})).then((function(t){e({type:re,team:t})}))}))},addTeamMember:function(t){return e(function(e){return function(t){on.mutate({mutation:Object(f.gql)(cn()),variables:{member:e}}).then((function(e){return e.data.addTeamMember})).then((function(e){t({type:ce,newMember:e})}))}}(t))},removeTeamMember:function(t){return e(function(e){return function(t,n){return on.mutate({mutation:Object(f.gql)(an()),variables:{memberId:e}}).then((function(e){return e.data.removeTeamMember})).then((function(n){t({type:ie,id:e})}))}}(t))},updateTeamMember:function(t,n){return e(function(e,t){return function(n){on.mutate({mutation:Object(f.gql)(rn()),variables:{memberId:e,member:t}}).then((function(e){return e.data.updateTeamMember})).then((function(a){n({type:oe,member:t,id:e})}))}}(t,n))}}}))((function(e){var t=s.a.useState(null),n=Object(x.a)(t,2),a=n[0],r=n[1];return s.a.useEffect((function(){e.getTeam()}),[]),console.log(e.user),[Object(i.jsx)(N,{tabs:[],onTabSelect:function(e){},selectedTab:"",title:"Team"}),Object(i.jsx)(Z,{onSave:function(t){if(t.id){var n=Object.assign({},t);delete n.id,e.updateTeamMember(t.id,n)}else e.addTeamMember(t)},onClose:function(){return r(null)},selected:a,type:e.type,permissions:e.permissions,children:Object(i.jsx)(W,{data:e.team,renderItem:function(t){return Object(i.jsxs)("div",{className:"team-item",children:[Object(i.jsxs)(C.a,{button:!0,children:["pending"==t.status?Object(i.jsx)(Vt.a,{}):t.admin?Object(i.jsx)(Zt.a,{}):Object(i.jsx)(Xt.a,{}),Object(i.jsx)(k.a,{style:{marginLeft:12},children:t.name})]}),Object(i.jsx)(I,{menu:[].concat("pending"==t.status?[{icon:Object(i.jsx)(en.a,{}),label:"Share Signup",action:function(){}}]:[]).concat(e.user.admin?[{label:"Edit",icon:Object(i.jsx)(nt.a,{}),action:function(){return r(t)}},{label:"Delete",color:"red",icon:Object(i.jsx)(tn.a,{}),action:function(){return e.removeTeamMember(t.id)}}]:[])})]})}})})]}));function un(){var e=Object(X.a)(["\n        query GetEquipment {\n          equipment {\n            id\n            name\n            type\n            description\n          }\n        }\n      "]);return un=function(){return e},e}function ln(){var e=Object(X.a)(["\n        mutation RemoveEquipment($id: String){\n          removeEquipment(equipmentId: $id)\n        }\n      "]);return ln=function(){return e},e}function dn(){var e=Object(X.a)(["\n      mutation UpdateEquipment($equipmentId: String, $equipment: EquipmentInput){\n        updateEquipment(equipmentId: $equipmentId, equipment: $equipment){\n          name\n          type\n          description\n        }\n      }\n    "]);return dn=function(){return e},e}function jn(){var e=Object(X.a)(["\n  mutation AddEquipment($equipment: EquipmentInput){\n    addEquipment(equipment: $equipment){\n      id\n      name\n      type\n      description\n    }\n  }\n"]);return jn=function(){return e},e}var bn=ye();n(730);var fn=Object(p.b)((function(e){return{user:Object(T.a)(e.auth.token),equipment:e.equipment.list,type:e.dashboard.types.filter((function(e){return"Equipment"==e.name})),permissions:e.dashboard.permissions.filter((function(e){return"Equipment"==e.type}))}}),(function(e){return{getEquipment:function(){return e((function(e){return bn.query({query:Object(f.gql)(un())}).then((function(e){return e.data.equipment})).then((function(t){e({type:se,equipment:t})}))}))},addEquipment:function(t){return e(function(e){return function(t){bn.mutate({mutation:Object(f.gql)(jn()),variables:{equipment:e}}).then((function(e){return e.data.addEquipment})).then((function(e){t({type:ue,newItem:e})}))}}(t))},updateEquipment:function(t,n){return e(function(e,t){return console.log(e,t),function(n){return bn.mutate({mutation:Object(f.gql)(dn()),variables:{equipmentId:e,equipment:t}}).then((function(e){return e.data.updateEquipment})).then((function(a){n({type:le,equipment:t,id:e})}))}}(t,n))},removeEquipment:function(t){return e(function(e){return function(t){return bn.mutate({mutation:Object(f.gql)(ln()),variables:{id:e}}).then((function(e){return e.data.removeEquipment})).then((function(n){t({type:de,id:e})}))}}(t))}}}))((function(e){var t=s.a.useState(null),n=Object(x.a)(t,2),a=n[0],r=n[1];return s.a.useEffect((function(){e.getEquipment()}),[]),[Object(i.jsx)(N,{tabs:Object(O.a)(new Set(e.equipment.filter((function(e){return e.type})).map((function(e){return e.type})))),onTabSelect:function(e){},selectedTab:"",title:"Equipment"}),Object(i.jsx)(Z,{onSave:function(t){if(t.id){var n=Object.assign({},t);console.log(t),delete n.id,e.updateEquipment(t.id,n)}else e.addEquipment(t)},onClose:function(){return r(null)},selected:a,type:e.type,permissions:e.permissions,children:Object(i.jsx)(W,{data:e.equipment,renderItem:function(t){return Object(i.jsxs)("div",{className:"equipment-item",children:[Object(i.jsx)(C.a,{button:!0,onClick:function(e){},children:Object(i.jsx)(k.a,{variant:"subtitle1",style:{flex:1},children:t.name})}),Object(i.jsx)(I,{menu:[].concat(e.user.admin?[{label:"Edit",action:function(){return r(t)}},{label:"Delete",color:"red",action:function(){return e.removeEquipment(t.id)}}]:[])})]})}})})]})),pn=n(653),On=n.n(pn),mn="typeDef",hn=Object(ut.c)((function(e){return Object(i.jsx)("div",{style:{flex:1},children:Object(i.jsx)(On.a,{src:e.node.data.typedef})})})),vn=Object(ut.c)((function(e){return Object(i.jsx)(ut.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(i.jsx)("div",{style:{padding:8},className:"type-def",children:e.data.label})}))}));function xn(){var e=Object(X.a)(['\n          query GetProjects {\n            bucketLayout(storeId: "','", bucketId: "','"){\n              name\n              datatype\n            }\n          }\n        ']);return xn=function(){return e},e}function gn(){var e=Object(X.a)(['\n        query GetLayout{\n          connectionLayout(storeId: "','"){\n            name\n          }\n        }\n      ']);return gn=function(){return e},e}function yn(){var e=Object(X.a)(["\n        query GetTypes{\n          adminTypes{\n            name\n            typeDef\n          }\n        }\n      "]);return yn=function(){return e},e}function Cn(){var e=Object(X.a)(["\n      query GetIntegrations{\n        integrationMap{\n          nodes{\n            id\n            type\n            data\n            position{\n              x\n              y\n            }\n          }\n          links{\n            id\n            target\n            source\n          }\n        }\n      }\n    "]);return Cn=function(){return e},e}function kn(){var e=Object(X.a)(["\n      query GetPermissions{\n        typePermissions{\n          type\n          create\n          read\n          update\n          delete\n        }\n      }\n      "]);return kn=function(){return e},e}function Sn(){var e=Object(X.a)(["\n  mutation UpdateIntegrationMap($nodes: [MapNodeInput], $links: [MapLinkInput]){\n    updateIntegrationMap(nodes: $nodes, links: $links){\n      nodes{\n        id\n        type\n        data\n        position{\n          x\n          y\n        }\n      }\n      links{\n        id\n        target\n        source\n      }\n    }\n  }\n"]);return Sn=function(){return e},e}var qn=ye(),En=Object(f.gql)(Sn()),wn=function(){return function(e,t){return qn.query({query:Object(f.gql)(yn())}).then((function(e){return e.data.adminTypes})).then((function(t){console.log(t),e({type:me,types:t})}))}},In=(n(731),n(732),"mssqlAdapter"),Tn=Object(ut.c)((function(e){var t=s.a.useState([]),n=Object(x.a)(t,2),a=n[0],r=n[1],c=s.a.useState(null),o=Object(x.a)(c,2),u=(o[0],o[1],s.a.useState([])),l=Object(x.a)(u,2);l[0],l[1];s.a.useEffect((function(){var e,t=j();(e=t.id,qn.query({query:Object(f.gql)(gn(),e)}).then((function(e){return e.data.connectionLayout}))).then((function(e){r(e)})),console.log(j())}),[]);var j=function(){var t=e.editor.links.filter((function(t){return t.source==e.node.id}));if(t&&t.length>0){var n=t.map((function(t){return e.editor.nodes.filter((function(e){return e.id==t.target}))[0]}));if(n&&n.length>0)return n[0]}};return Object(i.jsxs)("div",{style:{display:"flex",flex:1,flexDirection:"column"},children:[Object(i.jsx)(_.a,{disabled:!0,error:!j(),label:"Connection Name",value:j().data.label}),Object(i.jsx)(_t.a,{value:e.node.data.table,onChange:function(t,n){console.log(t,n),n&&n.name&&(e.editor.updateNode(e.node.id,(function(e){return e.data.table=n,e})),function(e,t){return qn.query({query:Object(f.gql)(xn(),e,t)}).then((function(e){return e.data.bucketLayout}))}(j().id,n.name).then((function(t){console.log("Searching for cols",n.name,t),e.editor.updateNode(e.node.id,(function(e){return e.data.availableColumns=t,e.data.provides={},e}))})))},options:a,getOptionLabel:function(e){return e.name},autoHighlight:!0,renderInput:function(e){return Object(i.jsx)(_.a,Object(d.a)(Object(d.a)({},e),{},{margin:"normal",label:"Table"}))}}),Object(i.jsx)("div",{style:{marginTop:8},children:function(){var t=e.editor.links.filter((function(t){return t.target==e.node.id}));if(t&&t.length>0){var n=t.map((function(t){return e.editor.nodes.filter((function(e){return e.id==t.source}))[0]}));if(n&&n.length>0){var a=n[0].data.typedef,r=[],c=function(){var t=o;r.push(Object(i.jsxs)("div",{style:{marginTop:4,display:"flex",alignItems:"center"},children:[Object(i.jsx)("div",{style:{width:100},children:o}),":",Object(i.jsx)("select",{value:e.node&&e.node.data&&e.node.data.provides&&e.node.data.provides[o],onChange:function(n){e.editor.updateNode(e.node.id,(function(e){return e.data.provides||(e.data.provides={}),console.log(n.target.value," provides ",t),e.data.provides[t]=n.target.value,e}))},children:(e.node.data.availableColumns||[]).concat([{name:"N/A"}]).map((function(e){return Object(i.jsx)("option",{value:e.name,children:e.name})}))})]}))};for(var o in a)c();return r}}}()})]})})),Dn=Object(ut.c)((function(e){return Object(i.jsx)(ut.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(i.jsxs)("div",{style:{padding:8},className:"mssql-adapter",children:[Object(i.jsx)("div",{className:"adapter-header",children:e.data.label||"MSSQL Adapter"}),Object(i.jsx)("div",{className:"adapter-info",children:e.data&&e.data.table&&e.data.table.name})]})}))})),Pn="mssql server",Nn=Object(ut.c)((function(e){return Object(i.jsxs)("div",{style:{display:"flex",flex:1,flexDirection:"column"},children:[Object(i.jsx)(_.a,{label:"Connection Name",value:e.node.data.label,onChange:function(t){e.editor.updateNode(e.node.id,(function(e){return e.data.label=t.target.value,e}))}}),Object(i.jsx)(_.a,{label:"Host IP:Host Port",value:e.node.data.host,onChange:function(t){e.editor.updateNode(e.node.id,(function(e){return e.data.host=t.target.value,e}))}}),Object(i.jsx)(_.a,{label:"Database Name",value:e.node.data.db,onChange:function(t){e.editor.updateNode(e.node.id,(function(e){return e.data.db=t.target.value,e}))}}),Object(i.jsx)(_.a,{label:"Username",value:e.node.data.username,onChange:function(t){e.editor.updateNode(e.node.id,(function(e){return e.data.username=t.target.value,e}))}}),Object(i.jsx)(_.a,{label:"Password",type:"password",value:e.node.data.password,onChange:function(t){e.editor.updateNode(e.node.id,(function(e){return e.data.password=t.target.value,e}))}})]})})),Mn=Object(ut.c)((function(e){return Object(i.jsx)(ut.a,Object(d.a)(Object(d.a)({},e),{},{children:Object(i.jsx)("div",{style:{padding:8},className:"mssql-adapter",children:e.data.label||"MSSQL Server"})}))}));n(733),n(734);var Ln=Object(p.b)((function(e){return{types:(e.dashboard.types||[]).map((function(e,t){return{id:e.name.toLowerCase(),type:"typeDef",data:{label:e.name,typedef:e.typeDef},position:{x:200+200*t,y:300},draggable:!1}}))}}),(function(e){return{getTypes:function(){return e(wn())}}}))((function(e){s.a.useEffect((function(){e.getTypes()}),[]);var t=Object(f.useMutation)(En),n=Object(x.a)(t,2),o=n[0],u=(n[1].data,s.a.useState([])),l=Object(x.a)(u,2),d=l[0],j=l[1],b=s.a.useState([]),p=Object(x.a)(b,2),O=p[0],m=p[1];return s.a.useEffect((function(){qn.query({query:Object(f.gql)(Cn())}).then((function(e){return e.data.integrationMap})).then((function(e){e.nodes&&j(e.nodes.map((function(e){var t=Object(ve.cloneDeep)(e);return delete t.__typename,delete t.position.__typename,t})).slice()),e.links&&m(e.links.map((function(e){var t=Object(ve.cloneDeep)(e);return delete t.__typename,t})).slice())}))}),[]),Object(i.jsx)("div",{className:"admin-view",children:Object(i.jsx)(ut.b,{nodeTypes:[a,r,c],nodes:(e.types||[]).concat(d),links:O,onNodeChange:function(t){var n=t.filter((function(t){return e.types.map((function(e){return e.id})).indexOf(t.id)<0}));o({variables:{nodes:n,links:O}}),j(n)},onLinkChange:function(e){o({variables:{nodes:d,links:e}}),m(e)}})})})),An=n(654),_n=n.n(An),$n=n(1530),Bn=n(1516),Rn=n(1517),Fn=n(1518),Un=n(1519),Wn=n(1520);var zn=Object(b.g)((function(e){var t=[{icon:Object(i.jsx)(Xe.a,{}),label:"Dashboard",path:""},{icon:Object(i.jsx)(Bn.a,{}),label:"Calendar",path:"/calendar"},{icon:Object(i.jsx)(Rn.a,{}),label:"Projects",path:"/projects"},{icon:Object(i.jsx)(Zt.a,{}),label:"Team",path:"/team"},{icon:Object(i.jsx)(Fn.a,{}),label:"Equipment",path:"/equipment"},{icon:Object(i.jsx)(Un.a,{}),label:"Files",path:"/files"}];return Object(i.jsxs)($n.a,{variant:"permanent",style:{width:200},children:[Object(i.jsxs)(U.a,{style:{flex:1,width:200},children:[Object(i.jsxs)(C.a,{style:{color:"teal",padding:12,fontSize:20},children:[Object(i.jsx)("img",{src:"/assets/teal.png",style:{height:33,marginRight:8}})," WorkHub"]}),Object(i.jsx)(F.a,{}),t.map((function(n,a){return Object(i.jsxs)(C.a,{className:t.map((function(e){return e.path})).indexOf(window.location.pathname.split(e.match.url)[1])==a?"selected menu-item":"menu-item",onClick:function(){return e.history.push("".concat(e.match.url).concat(n.path))},button:!0,children:[n.icon," ",n.label]})}))]}),Object(i.jsx)(F.a,{}),Object(i.jsxs)(C.a,{button:!0,onClick:function(){return e.history.push("".concat(e.match.url,"/settings"))},children:[Object(i.jsx)(Wn.a,{style:{marginRight:12}}),"Settings"]})]})})),Gn=(n(1427),Me());var Jn=Object(p.b)((function(e){return{projects:e.projects.list,user:Object(T.a)(e.auth.token)}}),(function(e){return{getTypes:function(){return e(wn())},getPermissions:function(){return e((function(e){return qn.query({query:Object(f.gql)(kn())}).then((function(e){return e.data.typePermissions})).then((function(t){console.log(t),e({type:he,perms:t})}))}))}}}))((function(e){Ie.a.parse(e.location.search,{ignoreQueryPrefix:!0}),window.location.pathname.replace(/\/dashboard/g,"");var t=s.a.useState(null),n=Object(x.a)(t,2),a=n[0],r=n[1];return s.a.useEffect(Object(v.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.getTypes(),e.getPermissions(),a){t.next=7;break}return t.next=5,_n.a.create();case 5:n=t.sent,r(n);case 7:return t.abrupt("return",Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(a||n).stop();case 2:case"end":return e.stop()}}),e)}))));case 8:case"end":return t.stop()}}),t)}))),[]),Object(i.jsxs)("div",{className:"dashapp",children:[Object(i.jsx)(zn,{match:e.match}),Object(i.jsx)("div",{className:"dashapp-body",children:Object(i.jsxs)(b.d,{children:[Object(i.jsx)(b.b,{path:"".concat(e.match.url,"/calendar"),render:function(e){return Object(i.jsx)(Qt,Object(d.a)(Object(d.a)({},e),{},{y:Gn}))}}),Object(i.jsx)(b.b,{path:"".concat(e.match.url,"/projects"),component:De,exact:!0}),Object(i.jsx)(b.b,{path:"".concat(e.match.url,"/projects/:id"),render:function(e){return Object(i.jsx)(qt,Object(d.a)(Object(d.a)({},e),{},{y:Gn}))}}),Object(i.jsx)(b.b,{path:"".concat(e.match.url,"/files"),render:function(e){return Object(i.jsx)(At,Object(d.a)(Object(d.a)({},e),{},{ipfs:a}))}}),Object(i.jsx)(b.b,{path:"".concat(e.match.url,"/team"),component:sn}),Object(i.jsx)(b.b,{path:"".concat(e.match.url,"/equipment"),component:fn}),Object(i.jsx)(b.b,{path:"".concat(e.match.url,"/settings"),component:Kt}),Object(i.jsx)(b.b,{path:"".concat(e.match.url,"/admin"),component:Ln})]})})]})}));function Hn(){var e=Object(X.a)(["\n    mutation Login($username: String, $password: String){\n        login(username: $username, password: $password){\n            token\n            error\n        }\n    }\n"]);return Hn=function(){return e},e}var Yn=Object(f.gql)(Hn());n(1428);var Qn,Kn=Object(p.b)(null,(function(e){return{setToken:function(t){return e(function(e){return function(t){t({type:pe,token:e})}}(t))}}}))((function(e){var t=s.a.useState({}),n=Object(x.a)(t,2),a=n[0],r=n[1],c=s.a.useState(null),o=Object(x.a)(c,2),u=o[0],l=o[1],d=s.a.useState(""),j=Object(x.a)(d,2),b=j[0],p=j[1],O=s.a.useState(""),m=Object(x.a)(O,2),h=m[0],v=m[1],g=Object(f.useMutation)(Yn),y=Object(x.a)(g,1)[0],C=function(){y({variables:{username:b,password:h}}).then((function(t){t.data.login&&t.data.login.token?(e.setToken(t.data.login.token),e.history.push("/dashboard")):t.data.login&&t.data.login.error&&l(t.data.login.error)}))};return s.a.useEffect((function(){fetch("https://zenquotes.io/api/today").then((function(e){return e.json()})).then((function(e){r(e)}))})),Object(i.jsxs)("div",{className:"login-view",children:[Object(i.jsx)("div",{className:"image-banner",children:Object(i.jsxs)("div",{className:"quotes",children:[Object(i.jsx)("span",{children:a.q}),Object(i.jsx)("span",{children:a.a})]})}),Object(i.jsxs)(P.a,{style:{display:"flex",flex:.3,flexDirection:"column",padding:8},children:[Object(i.jsxs)("div",{style:{display:"flex",alignItems:"center",paddingBottom:8},children:[Object(i.jsx)("img",{style:{height:70,marginRight:12},src:"/assets/teal.png"}),Object(i.jsx)(k.a,{style:{color:"teal"},variant:"h4",children:"WorkHub"})]}),Object(i.jsx)(F.a,{style:{marginBottom:22}}),Object(i.jsx)(_.a,{error:u,label:"Username",value:b,onChange:function(e){return p(e.target.value)}}),Object(i.jsx)(_.a,{error:u,label:"Password",type:"password",value:h,onKeyDown:function(e){13==e.keyCode&&C()},onChange:function(e){return v(e.target.value)}}),Object(i.jsx)(R.a,{onClick:C,style:{marginTop:33},color:"primary",variant:"contained",children:"Login"})]})]})})),Vn=n(655),Zn=n(656),Xn=n(82),ea=n(141),ta=n(657),na=n(433),aa=n(658),ra=n.n(aa),ca={list:[]};var ia={permissions:[],types:[]};var oa={list:[]};var sa={token:null};var ua,la={list:[]};var da,ja,ba={list:[]};var fa={bookings:[]};var pa=Object(ea.c)({projects:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ca,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case ee:return Object(d.a)(Object(d.a)({},e),{},{list:t.projects});case ne:var n=(Qn=e.list.slice()).map((function(e){return e.id})).indexOf(t.id);return Qn.splice(n,1),Object(d.a)(Object(d.a)({},e),{},{list:Qn});case te:return Object(d.a)(Object(d.a)({},e),{},{list:e.list.concat([t.newProject])});case ae:var a=(Qn=e.list.slice()).map((function(e){return e.id})).indexOf(t.id);return Qn[a]=Object(d.a)(Object(d.a)({},Qn[a]),t.project),Object(d.a)(Object(d.a)({},e),{},{list:Qn});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sa,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case pe:return{token:t.token};default:return e}},files:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oa,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case je:return Object(d.a)(Object(d.a)({},e),{},{list:t.files});case Oe:return Object(d.a)(Object(d.a)({},e),{},{list:e.list.concat([t.file])});default:return e}},calendar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fa,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case be:return Object(d.a)(Object(d.a)({},e),{},{bookings:t.bookings});case fe:return Object(d.a)(Object(d.a)({},e),{},{bookings:e.bookings.concat([t.booking])});default:return e}},dashboard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ia,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case he:return Object(d.a)(Object(d.a)({},e),{},{permissions:t.perms});case me:return Object(d.a)(Object(d.a)({},e),{},{types:t.types});default:return e}},equipment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:la,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case se:return Object(d.a)(Object(d.a)({},e),{},{list:t.equipment});case ue:return Object(d.a)(Object(d.a)({},e),{},{list:e.list.concat([t.newItem])});case le:var n=(ua=e.list.slice()).map((function(e){return e.id})).indexOf(t.id);return ua[n]=Object(d.a)(Object(d.a)({},ua[n]),t.equipment),Object(d.a)(Object(d.a)({},e),{},{list:ua});case de:var a=(ua=e.list.slice()).map((function(e){return e.id})).indexOf(t.id);return ua.splice(a,1),Object(d.a)(Object(d.a)({},e),{},{list:ua});default:return e}},team:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ba,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case re:return Object(d.a)(Object(d.a)({},e),{},{list:t.team});case ce:return Object(d.a)(Object(d.a)({},e),{},{list:e.list.concat([t.newMember])});case oe:return da=e.list.slice(),ja=da.map((function(e){return e.id})).indexOf(t.id),da[ja]=Object(d.a)(Object(d.a)({},da[ja]),t.member),Object(d.a)(Object(d.a)({},e),{},{list:da});case ie:return da=e.list.slice(),ja=da.map((function(e){return e.id})).indexOf(t.id),da.splice(ja,1),Object(d.a)(Object(d.a)({},e),{},{list:da});default:return e}}}),Oa={key:"root",storage:ra.a},ma=Object(na.a)(Oa,pa),ha=(n(1431),function(){var e=Object(ea.d)(ma,Object(ea.a)(ta.a));return{store:e,persistor:Object(na.b)(e)}}()),va=ha.store,xa=ha.persistor,ga=ye();var ya=function(){return Object(i.jsx)(Xn.a,{utils:Zn.a,children:Object(i.jsx)(p.a,{store:va,children:Object(i.jsx)(f.ApolloProvider,{client:ga,children:Object(i.jsx)(j.a,{children:Object(i.jsx)(Vn.a,{loading:null,persistor:xa,children:Object(i.jsxs)("div",{className:"App",children:[Object(i.jsx)(b.b,{path:"/",exact:!0,component:Kn}),Object(i.jsx)(b.b,{path:"/dashboard",render:function(e){return va.getState().auth.token?Object(i.jsx)(Jn,Object(d.a)({},e)):Object(i.jsx)(b.a,{to:"/"})}})]})})})})})})},Ca=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1531)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))},ka=n(236);ka.c.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(ka.c.version,"/pdf.worker.js"),l.a.render(Object(i.jsx)(s.a.StrictMode,{children:Object(i.jsx)(ya,{})}),document.getElementById("root")),Ca()},353:function(e,t){},647:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return h}));var a=n(2),r=n.n(a),c=n(86),i=n(14),o=n(100),s=n(3),u=n(0),l=n.n(u),d=n(664),j=n(1438),b=n(666),f=n(667),p=n(237),O=n(648),m=n(649);function h(t){var n=t.file||{},a=l.a.useState(null),u=Object(i.a)(a,2),h=u[0],v=u[1];l.a.useEffect(Object(c.a)(r.a.mark((function n(){var a,c,i,s,u,l,d,j,b;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(h&&URL.revokeObjectURL(h),!t.file||!t.ipfs){n.next=40;break}console.log("Fetching",t.file.cid),a=t.ipfs.cat(t.file.cid),c=e.from(""),i=!0,s=!1,n.prev=7,l=Object(o.a)(a);case 9:return n.next=11,l.next();case 11:return d=n.sent,i=d.done,n.next=15,d.value;case 15:if(j=n.sent,i){n.next=22;break}b=j,c=e.concat([c,b]);case 19:i=!0,n.next=9;break;case 22:n.next=28;break;case 24:n.prev=24,n.t0=n.catch(7),s=!0,u=n.t0;case 28:if(n.prev=28,n.prev=29,i||null==l.return){n.next=33;break}return n.next=33,l.return();case 33:if(n.prev=33,!s){n.next=36;break}throw u;case 36:return n.finish(33);case 37:return n.finish(28);case 38:console.log("Setting data"),v(URL.createObjectURL(new Blob([c])));case 40:case"end":return n.stop()}}),n,null,[[7,24,28,38],[29,,33,37]])}))),[t.file,t.ipfs]);var x=function(){h&&URL.revokeObjectURL(h),t.onClose&&t.onClose()};return Object(s.jsxs)(d.a,{fullWidth:!0,maxWidth:"lg",open:t.open,onClose:x,children:[Object(s.jsx)(j.a,{children:n.name}),Object(s.jsx)(b.a,{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:function(){if(h)switch(n.extension){case"pdf":return Object(s.jsx)(m.a,{data:h});case"glb":return Object(s.jsx)(O.a,{data:h});case"png":return Object(s.jsx)("img",{style:{width:"33%",height:"100%"},src:h});default:return null}}()}),Object(s.jsx)(f.a,{children:Object(s.jsx)(p.a,{onClick:x,children:"Close"})})]})}}).call(this,n(30).Buffer)},648:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(3),r=n(0),c=n.n(r);function i(e){var t,n,r;c.a.useEffect((function(){var a=function(){r&&r.resize()};if(e.data){r||(r=new window.BABYLON.Engine(t,!0)),n||(n=new window.BABYLON.Scene(r)).createDefaultEnvironment();var c=new window.BABYLON.ArcRotateCamera("camera",-Math.PI/2,Math.PI/2.5,3,new window.BABYLON.Vector3(0,0,10),n);c.setTarget(window.BABYLON.Vector3.Zero()),c.minZ=0,c.wheelPrecision=7,c.speed=.5,console.log(e.data),window.BABYLON.SceneLoader.ImportMesh(null,"",e.data,n,(function(e){console.log(e)}),null,null,".glb"),c.attachControl(t,!1),window.addEventListener("resize",a),r.runRenderLoop((function(){n.render()}))}return function(){r&&r.stopRenderLoop(),n&&(n.dispose(),n=null),window.removeEventListener("resize",a)}}),[e.data]);return Object(a.jsx)("canvas",{style:{width:"100%"},ref:function(e){null!==e&&(t=e)}})}},649:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(14),r=n(3),c=n(0),i=n.n(c),o=n(236);function s(e){var t=i.a.useState(null),n=Object(a.a)(t,2),c=n[0],s=n[1],u=i.a.useState(1),l=Object(a.a)(u,2);l[0],l[1];return Object(r.jsx)(o.a,{file:{data:e.data},onLoadSuccess:function(e){var t=e.numPages;s(t)},children:Array.from(new Array(c),(function(e,t){return Object(r.jsx)(o.b,{pageNumber:t+1},"page_".concat(t+1))}))})}},683:function(e,t,n){},688:function(e,t,n){},689:function(e,t,n){},700:function(e,t,n){},702:function(e,t,n){},703:function(e,t,n){},710:function(e,t,n){},711:function(e,t,n){},715:function(e,t,n){},722:function(e,t){},723:function(e,t){},724:function(e,t){},725:function(e,t){},726:function(e,t){},727:function(e,t,n){},729:function(e,t,n){},730:function(e,t,n){},732:function(e,t,n){},734:function(e,t,n){},738:function(e,t){},744:function(e,t){},818:function(e,t){},819:function(e,t){},915:function(e,t){},917:function(e,t){},976:function(e,t){}},[[1432,1,2]]]);
//# sourceMappingURL=main.2b40a9c0.chunk.js.map