{"version":3,"sources":["components/more-menu/index.js","components/dashboard-header/index.js","components/search-table/index.js","components/permission-form/index.js","actions/types.js","graph/index.js","actions/projectActions.js","views/Projects/index.js","tabs/project/calendar.js","graph/yjs.js","actions/fileActions.js","components/file-dialog/index.js","components/plan-dialog/index.js","components/graph-kanban/index.js","tabs/project/plan.js","tabs/project/index.js","tabs/project/files.js","tabs/project/team.js","views/ProjectView/index.js","components/converter-dialog/index.js","views/Files/index.js","actions/calendarActions.js","components/calendar-dialog/index.js","views/Calendar/index.js","views/Settings/index.js","actions/teamActions.js","views/Team/index.js","actions/equipmentActions.js","views/Equipment/index.js","nodes/TypeDefNode.js","actions/adminActions.js","nodes/MSSQLNode.js","nodes/MSSQLServerNode.js","views/Admin/index.js","components/sidebar/index.js","controllers/DashboardController/index.js","actions/authActions.js","views/Login/index.js","reducers/projects.js","reducers/dashboard.js","reducers/files.js","reducers/auth.js","reducers/equipment.js","reducers/team.js","reducers/calendar.js","reducers/index.js","configureStore.js","App.js","reportWebVitals.js","index.js","components/file-preview-dialog/index.js","components/glb-card/index.js","components/pdf-card/index.js"],"names":["MoreMenu","props","React","useState","menuOpen","openMenu","IconButton","className","onClick","e","preventDefault","stopPropagation","currentTarget","MoreVert","Menu","open","menu","length","onClose","anchorEl","map","x","MenuItem","action","style","color","icon","Typography","marginLeft","label","connect","state","user","jwt_decode","auth","token","dispatch","Paper","variant","title","Tabs","value","tabs","toLowerCase","indexOf","selectedTab","onChange","newVal","onTabSelect","Tab","Notifications","name","SearchTable","flex","marginTop","TextField","InputProps","startAdornment","InputAdornment","position","Search","size","ButtonGroup","Button","ViewHeadline","ViewModule","Divider","List","data","ListItem","renderItem","PermissionForm","dialogOpen","openDialog","changes","setChanges","dataObj","setDataObj","permissions","type","useEffect","selected","Dialog","fullWidth","DialogTitle","DialogContent","display","flexDirection","fields","typeKey","k","typeDef","push","d","Object","assign","changed","target","FormControlLabel","control","Checkbox","checked","renderFields","DialogActions","onSave","children","create","Fab","bottom","right","Add","SET_PROJECTS","ADD_PROJECT","REMOVE_PROJECT","UPDATE_PROJECT","SET_TEAM","ADD_TEAM_MEMBER","REMOVE_TEAM_MEMBER","UPDATE_TEAM_MEMBER","SET_EQUIPMENT","ADD_EQUIPMENT","UPDATE_EQUIPMENT","REMOVE_EQUIPMENT","SET_FILES","SET_BOOKINGS","ADD_BOOKING","SET_TOKEN","ADD_FILE","SET_DASHBOARD_TYPES","SET_DASHBOARD_PERMS","ApolloClient","link","createUploadLink","uri","process","REACT_APP_GRAPH_URL","cache","InMemoryCache","addTypename","client","GClient","yDoc","projects","list","dashboard","types","filter","a","getProjects","query","gql","then","r","y","cloneDeep","__typename","addProject","project","mutate","mutation","variables","newProject","updateProject","id","projectId","removeProject","query_string","qs","parse","location","search","ignoreQueryPrefix","setSelected","Set","status","undefined","trim","toUpperCase","tab","history","window","pathname","stringify","obj","item","button","match","url","concat","admin","ydoc","Y","host","URL","hostname","WebsocketProvider","getMap","YActions","localizer","momentLocalizer","moment","UPLOAD_FILE","getConverters","converters","files","setSearch","selectedFiles","filename","onAttach","ID","setID","setTitle","description","setDescription","dueDate","setDueDate","members","setMembers","plan","Date","rows","multiline","rowsMax","m","slice","splice","format","valueOf","GraphKanban","cards","graph","nodes","columns","setColumns","renderCard","card","onCardDragEnd","source","destination","console","log","cols","fromIx","fromColumnId","toIx","toColumnId","spliced","fromPosition","toPosition","onStatusChange","template","onColumnDragEnd","col","links","parents","getColumns","MinusSquare","SvgIcon","fontSize","width","height","PlusSquare","CloseSquare","TransitionComponent","useSpring","from","opacity","transform","to","in","div","Collapse","StyledTreeItem","withStyles","theme","iconContainer","group","paddingLeft","borderLeft","fade","palette","text","primary","TreeItem","alignItems","justifyContent","editChild","Edit","addChild","makeStyles","root","flexGrow","maxWidth","setNodes","doc","setDoc","docProject","setProject","observer","toJSON","unobserve","_doc","observe","init","events","allDay","start","end","startAccessor","endAccessor","fileId","attachFileToProject","selectedCard","setSelectedCard","setLinks","expanded","setExpanded","_setNodes","set","_setLinks","renderTree","tree_branch","_children","parent_pos","n","addNode","addLink","nodeId","node","uuidv4","l","columnMap","renderList","rootNodes","TreeView","multiSelect","defaultExpanded","onNodeToggle","event","newExpanded","defaultCollapseIcon","defaultExpandIcon","defaultEndIcon","setView","view","padding","ix","Dashboard","EmojiNature","onNodeChange","onLinkChange","renderPlan","ownProps","params","setSelectedTab","replace","path","render","ConverterDialog","outputFormat","setOutputFormat","formats","setFormats","sourceFormat","targetFormat","disabled","extension","Forward","marginRight","FormControl","InputLabel","Select","convertFile","addFile","file","getFiles","getState","useMutation","uploadFile","convertDoc","setConvertDoc","selectedData","setData","onDrop","useCallback","acceptedFiles","duplicate","useDropzone","noClick","getRootProps","getInputProps","isDragActive","viewable","ipfs","conversion","cid","Contactless","Info","team","equipment","addBooking","time","booking","step","setStep","searchTab","setSearchTab","date","setDate","setAllDay","startTime","setStart","endTime","setEnd","selectedItems","setSelectedItems","renderStepTitle","minHeight","Autocomplete","options","getOptionLabel","renderInput","margin","s","renderStep","sTime","eTime","get","_booking","parseInt","items","bookings","calendar","getBookings","setBookings","zIndex","Settings","setConverters","installed","converterId","getTeam","addTeamMember","member","newMember","removeTeamMember","memberId","updateTeamMember","Schedule","SupervisorAccount","SupervisedUserCircle","Share","Delete","getEquipment","addEquipment","newItem","updateEquipment","equipmentId","removeEquipment","modal","withEditor","src","typedef","UPDATE_INTEGRATION_MAP","getTypes","adminTypes","tables","setTables","store","getSource","connectionLayout","editor","error","table","updateNode","bucketLayout","availableColumns","provides","autoHighlight","ret","changeKey","db","username","password","draggable","updateIntegrationMap","integrationMap","integrations","nodeTypes","TypeDefNode","MSSQLNode","MSSQLServer","withRouter","CalendarToday","AccountTree","BusinessCenter","Description","Drawer","split","getPermissions","typePermissions","perms","ipfsNode","setIPFS","IPFS","stop","Calendar","component","Projects","exact","Teams","Equipment","SettingsView","AdminView","LOGIN","updated","setToken","quote","setQuote","setError","setUsername","setPassword","doLogin","login","fetch","json","q","paddingBottom","marginBottom","onKeyDown","keyCode","INIT","tIx","combineReducers","pIx","eIx","persistConfig","key","storage","persistedReducer","persistReducer","rootReducer","createStore","applyMiddleware","thunk","persistor","persistStore","configureStore","App","utils","MomentUtils","loading","Login","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","pdfjs","GlobalWorkerOptions","workerSrc","version","ReactDOM","StrictMode","document","getElementById","FilePreviewDialog","revokeObjectURL","cat","Buffer","chunk","createObjectURL","Blob","renderContent","GLBCard","canvas","scene","engine","onResizeWindow","resize","BABYLON","Engine","Scene","createDefaultEnvironment","camera","ArcRotateCamera","Math","PI","Vector3","setTarget","Zero","minZ","wheelPrecision","speed","SceneLoader","ImportMesh","attachControl","addEventListener","runRenderLoop","stopRenderLoop","dispose","removeEventListener","ref","c","PDFCard","numPages","setNumPages","onLoadSuccess","Array","el","index","pageNumber"],"mappings":"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","file":"static/js/main.11439d95.chunk.js","sourcesContent":["import React from 'react';\n\nimport {\n    MoreVert\n} from '@material-ui/icons'\n\nimport {\n    IconButton,\n    Menu,\n    MenuItem,\n    Typography\n} from '@material-ui/core';\n\nexport default function MoreMenu(props){\n    const [ menuOpen, openMenu ] = React.useState(null);\n\n    const toggleMenu = (e) => {\n        e.preventDefault()\n        e.stopPropagation()\n        openMenu(e.currentTarget)\n    }\n\n    return [\n        <IconButton className=\"more-menu\" onClick={toggleMenu}>\n            <MoreVert />\n        </IconButton>,\n        <Menu open={props.menu.length > 0 && menuOpen} onClose={() => openMenu(null)} anchorEl={menuOpen}>\n            {props.menu.map((x) => {\n                return (\n                    <MenuItem onClick={(e) => {\n                        e.stopPropagation()\n                        openMenu(null)\n                        x.action()\n                    }} style={{color: x.color || 'black'}}>\n                        {x.icon}\n                        <Typography style={{marginLeft: 8}}>\n                            {x.label}\n                        </Typography>\n                    </MenuItem>\n                )\n            })}\n        </Menu>\n    ]\n}","import React from 'react';\nimport jwt_decode from 'jwt-decode';\n\nimport {\n    Notifications\n} from \"@material-ui/icons\"\n\nimport {\n    Paper,\n    Typography,\n    Tabs,\n    Tab\n} from '@material-ui/core';\n\nimport { connect } from 'react-redux';\n\nfunction DashboardHeader(props){\n    return (\n        <Paper className=\"dashapp-header\">\n        <Typography variant=\"h6\">{props.title}</Typography>\n        <div className=\"dashapp-header__tabs\">\n            <Tabs value={props.tabs.map((x) => x.toLowerCase()).indexOf(props.selectedTab.toLowerCase())} onChange={(e, newVal) => {\n                props.onTabSelect(props.tabs[newVal])\n            }}>\n            {(props.tabs || []).map((x) => (\n                <Tab label={x} />\n            ))}\n            </Tabs>\n\n        </div>\n        <div className=\"actions-col\">\n          <Notifications />\n          <div className=\"user-info\">\n            <Typography variant=\"subtitle1\">{props.user.name}</Typography>\n            <span>Online</span>\n          </div>\n        </div>\n        </Paper>\n    )\n}\n\nexport default connect((state) => ({\n    user: jwt_decode(state.auth.token)\n}), (dispatch) => ({\n\n}))(DashboardHeader)","import React from 'react';\n\nimport {\n    Search,\n    ViewHeadline,\n    ViewModule\n} from '@material-ui/icons';\n\nimport {\n    Paper,\n    TextField,\n    ButtonGroup,\n    Button,\n    Divider,\n    List,\n    ListItem,\n    InputAdornment\n} from '@material-ui/core';\n\nimport './index.css';\n\nexport default function SearchTable(props){\n    return (\n        <Paper style={{flex: 1, marginTop: 12}}>\n            <div className=\"options-bar\">\n                <TextField\n                    InputProps={{\n                        startAdornment: <InputAdornment position=\"start\"><Search /></InputAdornment>\n                    }}\n                    label=\"Search\"\n                    variant=\"outlined\"\n                    size=\"small\" />\n                <ButtonGroup>\n                    <Button><ViewHeadline /></Button>\n                    <Button><ViewModule /></Button>\n                </ButtonGroup>\n            </div>\n            <Divider />\n            <div className=\"grid-list\">\n                <List>\n                    {props.data.map((x) => (\n                    <ListItem>\n                        {props.renderItem(x)}\n                    </ListItem>\n                    ))}\n                </List>\n            </div>\n        </Paper>\n    )\n}","import React from 'react';\n\nimport {\n    Add\n} from '@material-ui/icons';\n\nimport {\n    Fab,\n    Dialog,\n    DialogTitle,\n    TextField,\n    DialogActions,\n    Button,\n    Checkbox,\n    FormControlLabel,\n    DialogContent\n} from '@material-ui/core';\n\nimport './index.css';\n\nexport default function PermissionForm(props){\n    const [dialogOpen, openDialog] = React.useState(false)\n\n    const [ changes, setChanges ] = React.useState({})\n    const [ dataObj, setDataObj ] = React.useState({})\n\n    const permissions = props.permissions && props.permissions[0] || {}\n    const type = props.type && props.type[0] || {}\n\n    React.useEffect(() => {\n        if(props.selected){\n            setDataObj(props.selected)\n        }\n    }, [props.selected])\n\n    const renderFields = (type) => {\n        let fields = [];\n    \n        for(var k in type.typeDef){\n            const typeKey = k;\n            switch(type.typeDef[k]){\n                case \"String\":\n                fields.push((\n                    <TextField value={dataObj[typeKey]} onChange={(e) => {\n                        let d = Object.assign({}, dataObj);\n                        let changed = Object.assign({}, changes)\n                        d[typeKey] = e.target.value;\n                        changed[typeKey] = e.target.value;\n                        setDataObj(d)\n                        setChanges(changed)\n                    }} label={typeKey} ></TextField>\n                ))\n                break;\n                case \"Boolean\":\n                    fields.push((\n                        <FormControlLabel\n                            control={(\n                                <Checkbox checked={dataObj[typeKey]} onChange={(e) => {\n                                    let d = Object.assign({}, dataObj)\n                                    let changed = Object.assign({}, changes)\n                                    d[typeKey] = e.target.checked;\n                                    changed[typeKey] = e.target.checked;\n                                    setDataObj(d)\n                                    setChanges(changed)\n                                }}/>\n                            )}\n                            label={typeKey} />\n\n                    ))\n            }\n        }\n        return fields;\n    }\n\n    const onClose = () => {\n        props.onClose()\n        openDialog(false)\n        setDataObj({})\n    }\n\n    const onSave = () => {\n        props.onSave(dataObj, changes)\n        onClose();\n    }\n\n    return (\n        <div className=\"permission-form\">\n            <Dialog fullWidth open={props.selected || dialogOpen} onClose={() => {\n               onClose()\n            }}>\n                <DialogTitle>{type.name}</DialogTitle>\n                <DialogContent style={{display: 'flex', flexDirection: \"column\"}}>\n                    {renderFields(type)}\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => {onClose()}}>Cancel</Button>\n                    <Button onClick={() => onSave()} color=\"primary\" variant=\"contained\">Save</Button>\n                </DialogActions>\n            </Dialog>\n            <div className=\"permission-form__inner\">\n                {props.children}\n            </div>\n            {permissions.create && (\n                <Fab onClick={() => openDialog(true)} color=\"primary\" style={{position: 'absolute', bottom: 12, right: 12}}>\n                    <Add />\n                </Fab>\n            )}\n        </div>\n    )\n}","//Projects\nexport const SET_PROJECTS = \"SET_PROJECTS\";\nexport const ADD_PROJECT = \"ADD_PROJECT\"\nexport const REMOVE_PROJECT = \"REMOVE_PROJECT\"\nexport const UPDATE_PROJECT = \"UPDATE_PROJECT\"\n\n//Team\nexport const SET_TEAM = 'SET_TEAM';\nexport const ADD_TEAM_MEMBER = \"ADD_TEAM_MEMBER\";\nexport const REMOVE_TEAM_MEMBER = \"REMOVE_TEAM_MEMBER\"\nexport const UPDATE_TEAM_MEMBER = \"UPDATE_TEAM_MEMBER\"\n\n//Equipment\nexport const SET_EQUIPMENT = \"SET_EQUIPMENT\";\nexport const ADD_EQUIPMENT = \"ADD_EQUIPMENT\";\nexport const UPDATE_EQUIPMENT = \"UPDATE_EQUIPMENT\"\nexport const REMOVE_EQUIPMENT = \"REMOVE_EQUIPMENT\"\n\nexport const SET_FILES = \"SET_FILES\";\n\n//Calendar things\nexport const SET_BOOKINGS = \"SET_BOOKINGS\";\nexport const ADD_BOOKING = \"ADD_BOOKING\";\n\nexport const SET_TOKEN = 'SET_TOKEN';\n\nexport const ADD_FILE = 'ADD_FILE';\n\nexport const SET_DASHBOARD_TYPES = 'SET_DASHBOARD_TYPES';\nexport const SET_DASHBOARD_PERMS = 'SET_DASHBOARD_PERMS';\n","import { ApolloClient, InMemoryCache } from '@apollo/client';\nimport { createUploadLink } from 'apollo-upload-client'\n\nexport default () => {\n  return new ApolloClient({\n    link: createUploadLink({\n      uri: (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') ? \n        'https://thetechcompany.workhub.services/graphql' || 'http://localhost:4000/graphql' : \n        process.env.REACT_APP_GRAPH_URL || '/graphql',\n    }),\n    cache: new InMemoryCache({\n      addTypename: false\n    })\n  })\n}\n","import * as types from './types';\nimport { gql } from '@apollo/client';\nimport { cloneDeep } from 'lodash';\nimport GClient from '../graph';\n\nconst client = GClient()\n\nexport const addProject = (project) => {\n  return (dispatch) => {\n    return client.mutate({\n      mutation: gql`\n      mutation AddProject($project: ProjectInput){\n        addProject(project: $project){\n          id\n          name\n          description\n          status\n        }\n      }\n    `,\n    variables: {\n      project: project\n    }\n    }).then((r) => r.data.addProject).then((r) => {\n      dispatch({type: types.ADD_PROJECT, newProject: r})\n    })\n  }\n}\n\nexport const updateProject = (projectId, project) => {\n  return (dispatch) => {\n    return client.mutate({\n      mutation: gql`\n  mutation UpdateProject($projectId: ID, $project: ProjectInput){\n    updateProject(projectId: $projectId, project: $project){\n      id\n      name\n      description\n      status\n    }\n  }\n`, \nvariables: {\n  projectId: projectId,\n  project: project\n}}).then((r) => r.data.updateProject).then((r) => {\n  dispatch({type: types.UPDATE_PROJECT, project: project, id: projectId})\n})\n} \n  }\n\n  export const removeProject = (projectId) => {\n    return (dispatch) => {\n      return client.mutate({\n        mutation: gql`\n          mutation RemoveProject($projectId: ID){\n            removeProject(projectId: $projectId)\n          }\n        `,\n          variables: {\n            projectId: projectId\n          }\n      }).then((r) => r.data.removeProject).then((r) => {\n        if(r) dispatch({type: types.REMOVE_PROJECT, id: projectId})\n      })\n    }\n\n  }\n\nexport const getProjects = () => {\n  return (dispatch) => {\n    return client.query({\n      query: gql`\n        query GetProjects {\n          projects{\n            id\n            name\n            description\n            status\n            files{\n              filename\n              cid\n            }\n          }\n        }\n      `\n    }).then((r) => {\n      dispatch({type: types.SET_PROJECTS, projects: r.data.projects.map((x) => {\n        let y = cloneDeep(x)\n        delete y.__typename;\n        return y;\n      })})      \n    })\n  }\n}\n","import React from 'react';\n\nimport {\n  ViewHeadline,\n  ViewModule,\n  Search,\n  Add\n} from '@material-ui/icons';\n\nimport {\n  List,\n  ListItem,\n  InputAdornment,\n  ButtonGroup,\n  Button,\n  Paper,\n  Divider,\n  TextField,\n  Fab,\n  Typography\n} from '@material-ui/core';\n\nimport MoreMenu from '../../components/more-menu';\nimport DashboardHeader from '../../components/dashboard-header';\n\nimport { useMutation } from '@apollo/client'\nimport { connect } from 'react-redux';\nimport SearchTable from '../../components/search-table';\nimport PermissionForm from '../../components/permission-form';\nimport { updateProject, addProject, removeProject,   getProjects } from '../../actions/projectActions';\nimport qs from 'qs';\nimport jwt_decode from 'jwt-decode';\n\nimport './index.css';\n\nfunction Projects(props){\n  const query_string = qs.parse(props.location.search, {ignoreQueryPrefix: true})\n  const [ selected, setSelected ] = React.useState(null)\n\n  React.useEffect(() => {\n    props.getProjects() \n  }, [])\n\n  return [\n    <DashboardHeader \n    tabs={[\"ALL\", ...new Set(props.projects.filter((a) => a.status != null && a.status != undefined).map((x) => x.status.trim().toUpperCase()))] || []}\n    onTabSelect={(tab) => {\n      if(tab == \"ALL\"){\n        delete query_string.status;\n        props.history.push(`${window.location.pathname}?${qs.stringify(query_string)}`)\n      }else{\n        query_string.status = tab;\n        props.history.push(`${window.location.pathname}?${qs.stringify(query_string)}`)\n      }\n        //setSelectedTab(tab)\n        //props.history.push(`${props.match.url}/${tab.toLowerCase()}`)\n    }}\n    selectedTab={query_string.status && query_string.status.toUpperCase() || 'ALL'}\n    title={\"Projects\"} />,\n    <PermissionForm\n      onSave={(obj, data) => {\n        if(obj.id){\n          let d = Object.assign({}, data);\n          delete d.id\n          props.updateProject(obj.id, d)\n        }else{\n          props.addProject(data)\n        }\n      }} \n      onClose={() => setSelected(null)}\n      selected={selected} \n      type={props.type} \n      permissions={props.permissions}>\n      <SearchTable\n        data={props.projects.filter((a) => {\n          if(query_string.status && a.status == query_string.status){\n            return true;\n          }else if(!query_string.status){\n            return true;\n          }\n          return false;\n        }).filter((a) => a.name)}\n        renderItem={(item) => [\n          <div className=\"project-item\">\n            <ListItem button onClick={() => {\n              props.history.push(`${props.match.url}/${item.id}/plan`)\n              }}>\n              <Typography style={{flex: 1}} variant=\"subtitle1\">{item.name}</Typography>\n            </ListItem>\n            <MoreMenu \n              menu={[\n              ].concat(props.user.admin ? [\n                {\n                  label: \"Edit\",\n                  action: () => setSelected(item)\n                },\n                {\n                  label: \"Delete\",\n                  color: 'red',\n                  action: () => props.removeProject(item.id)\n                }\n              ] : [])} />\n          </div>\n        ]} />\n\n    </PermissionForm>\n\n  ]\n}\n\nexport default connect((state) => ({\n  user: jwt_decode(state.auth.token),\n  projects: state.projects.list,\n  type: state.dashboard.types.filter((a) => a.name == \"Projects\"),\n  permissions: state.dashboard.permissions.filter((a) => a.type == \"Projects\")\n}), (dispatch) => ({\n  getProjects: () => dispatch(getProjects()),\n  addProject: (project) => dispatch(addProject(project)),\n  updateProject: (id, project) => dispatch(updateProject(id, project)),\n  removeProject: (id) => dispatch(removeProject(id))\n}))(Projects)\n","import React from 'react';\nimport YActions from '../../graph/yjs';\nimport { Calendar, momentLocalizer } from 'react-big-calendar'\nimport moment from 'moment'\nimport './calendar.css';\n\nconst ydoc = YActions()\nlet yDoc;\n\nconst localizer = momentLocalizer(moment)\nexport default function CalendarTab(props){\n    const [ bookings, setBookings ] = React.useState([])\n    const [ nodes, setNodes ] = React.useState([])\n    const [ doc, setDoc ] = React.useState(null)\n    const [ docProject, setProject ] = React.useState({})\n\n    const observer = () => {\n        if(yDoc){\n          let obj = yDoc.toJSON()\n          console.log(\"OBSERVE\", obj)\n          if(obj.nodes != null){\n            setNodes(obj.nodes.map((x) => Object.assign({}, x)))\n          }\n        \n        }\n      }\n  \n      React.useEffect(() => {\n        console.log(\"YDC\", props)\n        if(props.project && ydoc && props.project.id != docProject.id){\n          if(doc) doc.unobserve(observer);\n  \n          console.log(\"Setting up YDOC\")\n          let _doc = ydoc.getMap(`plan-${props.project.id}`)\n          yDoc = _doc;\n            setDoc(_doc)\n          _doc.observe(observer)\n  \n          setProject(props.project)\n          \n          let init = _doc.toJSON();\n  \n          if(init.nodes != null) setNodes(init.nodes)\n        }\n      }, [props.project, doc])\n\n    return (\n        <div className=\"calendar-tab\">\n            <Calendar\n                localizer={localizer}\n                events={nodes.filter((a) => a.data && a.data.dueDate).map((x) => ({\n                    id: x.id,\n                    title: x.data.label,\n                    allDay: false,\n                    start: new Date(((x.data.dueDate)*1000) -( 5 * 1000 * 60)),\n                    end: new Date((x.data.dueDate)* 1000)\n                }))}\n                startAccessor=\"start\"\n                endAccessor=\"end\"\n                style={{ flex: 1 }} />\n        </div>\n    )\n}","import * as Y from 'yjs';\nimport { WebsocketProvider } from 'y-websocket';\n\nexport default function (){\n\n    const ydoc = new Y.Doc();\n    let host = new URL(window.location).hostname;\n    const websocketProvider = new WebsocketProvider(`wss://${host}:1234`, 'workhub', ydoc)\n  \n    const yArray = ydoc.getMap('')\n  \n    return ydoc;\n  }","import * as types from './types';\nimport { gql, useMutation } from '@apollo/client';\n\nimport GClient from '../graph';\n\nconst client = GClient()\n\nexport const UPLOAD_FILE = gql`\n    mutation UploadFile($file: Upload!){\n      uploadFile(file: $file) {\n        duplicate\n        file{\n          id\n          filename\n          cid\n          extension\n        }\n      }\n    }\n  `\n\nexport const attachFile = (projectId, fileId) => {\n  client.mutate({\n    mutation: gql`\n    mutation AttachFile($projectId: ID, $fileId: ID){\n      attachFileToProject(projectId: $projectId, fileId: $fileId){\n        files{\n          cid\n        }\n      }\n    }\n    `,\n    variables: {\n      projectId: projectId,\n      fileId: fileId\n    }\n  }).then((r) => r.data.attachFileToProject).then((r) => {\n      console.log(r)\n  }) \n}\n\nexport const convertFile = (fileId, targetFormat) => {\n  client.mutate({\n    mutation: gql`\n    mutation ConvertFile($fileId: ID, $targetFormat:String){\n      convertFile(fileId: $fileId, targetFormat: $targetFormat){\n        msg\n        error\n      }\n    }\n  `,\n    variables: {\n      fileId,\n      targetFormat\n    }\n  }).then((r) => r.data.convertFile)\n}\n\nexport const getConverters = () => {\n  return client.query({\n    query: gql`\n      query GetConverters{\n        converters{\n          id\n          name\n          sourceFormat\n          targetFormat\n          installed\n        }\n      }\n    `\n  }).then((r) => r.data.converters)\n}\n\nexport const installConverter = (id) => {\n  return client.mutate({\n    mutation: gql`\n      mutation InstallConverter($converterId: ID){\n        installConverter(converterId: $converterId)\n      }\n    `,\n    variables: {\n      converterId: id\n    }\n  })\n}\n\nexport const addFile = (file) => {\n  return (dispatch) => {\n    dispatch({type: types.ADD_FILE, file: file})\n  }\n}\n\nexport const getFiles = () => {\n  return (dispatch, getState) => {\n    return client.query({\n      query: gql`\n        query GetFiles{\n          files{\n            id\n            filename\n            cid\n            extension\n            conversion{\n              extension\n              cid\n            }\n          }\n        }\n      `\n    }).then((r) => r.data.files).then((r) => {\n      dispatch({type: types.SET_FILES, files: r})\n    })\n  }\n}\n\n","import React from 'react';\n\nimport {\n    Search\n} from '@material-ui/icons';\n\nimport {\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    DialogActions,\n    List,\n    ListItem,\n    Button,\n    InputAdornment,\n    TextField,\n    Checkbox\n} from '@material-ui/core';\n\nimport { connect } from 'react-redux';\n\nfunction FileDialog(props){\n    const [ search, setSearch ] = React.useState('')\n\n    const [ selectedFiles, setSelected ] = React.useState({})\n\n    const attachFiles = () => {\n        if(props.onAttach){\n            props.onAttach(selectedFiles)\n            setSelected({})\n            props.onClose()\n        }\n    }\n    return (\n        <Dialog fullWidth open={props.open} onClose={props.onClose}>\n            <DialogTitle>Files</DialogTitle>\n            <DialogContent>\n                <TextField \n                    fullWidth \n                    value={search}\n                    onChange={(e) => setSearch(e.target.value)}\n                    label=\"Search\" \n                    InputProps={{\n                        startAdornment: <InputAdornment position=\"start\"><Search /></InputAdornment>\n                    }} />\n                <List>\n                    {props.files.filter((a) => a.filename && a.filename.toLowerCase().indexOf(search.toLowerCase()) > -1).map((x) => (\n                        <ListItem button><Checkbox checked={selectedFiles[x.id]} onChange={(e) => {\n                            let files = selectedFiles;\n                            files[x.id] = e.target.checked;\n                            setSelected(files)\n                        }}/>{x.filename}</ListItem>\n                    ))}    \n                </List>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={props.onClose}>Close</Button>\n                <Button color=\"primary\" variant=\"contained\" onClick={attachFiles}>Attach</Button>\n            </DialogActions>\n\n        </Dialog>\n    )\n}\n\nexport default connect((state) => ({\n    files: state.files.list\n}))(FileDialog)","import React from 'react';\n\nimport {\n    Dialog,\n    DialogContent,\n    DialogActions,\n    DialogTitle,\n    TextField,\n    Button\n} from '@material-ui/core';\n\nimport { KeyboardDateTimePicker } from '@material-ui/pickers'\nimport jwt_decode from 'jwt-decode';\nimport { connect } from 'react-redux';\nimport moment from 'moment';\n\nimport './index.css';\n\nfunction PlanDialog(props){\n    const [ ID, setID ] = React.useState('')\n    const [ title, setTitle ] = React.useState('')\n    const [ description, setDescription ] = React.useState('')\n    const [ dueDate, setDueDate ] = React.useState(null);\n    const [ members, setMembers ] = React.useState([])\n\n    React.useEffect(() => {\n        if(props.plan){\n            setID(props.plan.id)\n            setTitle(props.plan.title)\n            setDescription(props.plan.description)\n            setMembers(props.plan.members || [])\n            if(props.plan.dueDate) setDueDate(moment(new Date(props.plan.dueDate * 1000)))\n        }\n    }, [props.plan])\n\n    const onSave = () => {\n        let plan = {\n            id: ID,\n            title: title,\n            description: description,\n            dueDate: dueDate && dueDate.valueOf() / 1000,\n            members: members\n        }\n\n        if(props.onSave){\n            props.onSave(plan)\n            props.onClose();\n        }\n    }\n\n    return (\n        <Dialog fullWidth open={props.open} onClose={props.onClose}>\n            <DialogTitle>\n                <TextField value={title} onChange={(e) => setTitle(e.target.value)} fullWidth label=\"Title\" />\n            </DialogTitle>\n            <DialogContent className=\"plan-dialog__content\">\n                <div className=\"plan-info\">\n                    <TextField \n                        value={description}\n                        onChange={(e) => setDescription(e.target.value)}\n                        fullWidth \n                        label=\"Description\" \n                        rows={3} multiline rowsMax={6} />\n\n                </div>\n                <div className=\"plan-actions\">\n                    <Button \n                        onClick={() => {\n                            let m = members.slice();\n                            if(members.indexOf(props.user.id) > -1){\n                                m.splice(members.indexOf(props.user.id), 1)\n                            }else{\n                                m.push(props.user.id)\n                            }\n                            setMembers(m)\n                        }}\n                        color={members.indexOf(props.user.id) > -1 ? \"\" : \"primary\"}\n                        variant=\"contained\">{members.indexOf(props.user.id) > -1 ? \"Leave\" : \"Join\"}</Button>\n                    <Button color=\"primary\" variant=\"contained\">Members</Button>\n                    <KeyboardDateTimePicker\n                        label=\"Due Date\"\n                        value={dueDate}\n                        onChange={(e) => {\n                            setDueDate(e)\n                        }}\n                        format={\"DD/MM/yyyy\"} />\n                </div>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={props.onClose}>Cancel</Button>\n                <Button onClick={onSave} color=\"primary\" variant=\"contained\">Save</Button>\n            </DialogActions>\n        </Dialog>\n    );\n}\n\nexport default connect((state) => ({\n    user: jwt_decode(state.auth.token)\n}))(PlanDialog)","import React from 'react';\n\nimport Board from '@lourenci/react-kanban'\nimport '@lourenci/react-kanban/dist/styles.css'\nimport './index.css';\n\nexport default function GraphKanban(props){\n    const [ columns, setColumns ] = React.useState([\n        {\n            id: 0,\n            title: 'Blocked',\n            cards: []\n        },\n        {\n            id: 1,\n            title: 'Backlog',\n            cards: props.graph.nodes.filter((a) => a.status != \"COMPLETED\" && a.status != \"BLOCKED\").map((x) => ({\n                id: x.id,\n                title: x.data.label,\n            }))\n        },\n        {\n            id: 2,\n            title: 'Doing',\n            cards: []\n        },\n        {\n            id: 3,\n            title: 'Done',\n            cards: []\n        }\n    ])\n\n    const getColumns = () => {\n        let template = []\n        if(props.template){\n            template = props.template || [];\n        }\n\n        return template.map((col) => {\n            let col_id = col.id;\n            console.log(props.graph.nodes)\n            let cards = props.graph.nodes.filter((a) => {\n                return a.data.status == col.status\n            }) || []\n\n            console.log(props.graph.links)\n            return {\n                ...col,\n                cards: cards.map((x) => {\n                    let parents = props.graph.links.filter((a) => a.target == x.id).map((y) => props.graph.nodes.filter((a) => a.id == y.source)[0])\nreturn {\n                    id: x.id,\n                    title: x.data.label,\n                    description: parents.length > 0 && parents[0].data.label,\n                    dueDate: x.data.dueDate,\n                    members: x.members || []\n}\n                })\n            }\n        })\n    }\n\n  \n    return (\n        <Board \n            renderCard={(card) => {\n                return (\n                    <div onClick={() => {\n                        if(props.onClick){\n                            props.onClick(card)\n                        }\n                    }} className=\"react-kanban-card\">\n                        <div className=\"react-kanban-card__title\">\n                            {card.title}\n                        </div>\n                        <div>\n                            {card.description}    \n                        </div>\n                    </div>\n                )\n            }}\n            onCardDragEnd={(card, source, destination) => {\n                console.log(source, destination)\n                let cols = columns.slice()\n\n                let fromIx = cols.map((x) => x.id).indexOf(source.fromColumnId);\n                let toIx = cols.map((x) => x.id).indexOf(destination.toColumnId)\n\n                let spliced = cols[fromIx].cards.splice(source.fromPosition, 1)\n                cols[toIx].cards.splice(destination.toPosition, 0, spliced[0])\n\n\n                if(props.onStatusChange) props.onStatusChange(card, props.template.filter((a) => a.id == destination.toColumnId)[0].status)\n                if(props.onChange)props.onChange(cols)\n                setColumns(cols)\n            }}\n            onColumnDragEnd={(obj, source, destination) => {\n                let cols = columns.slice()\n\n                let spliced = cols.splice(source.fromPosition, 1)[0]\n                cols.splice(destination.toPosition, 0, spliced)\n                if(props.onChange)props.onChange(cols)\n                setColumns(cols)\n            }}\n            children={{columns: getColumns()}} />\n    )\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { fade, makeStyles, withStyles } from '@material-ui/core/styles';\n\nimport {\n    Add,\n    Dashboard as DashboardIcon,\n    List as ListIcon,\n    EmojiNature,\n    Edit\n} from '@material-ui/icons';\n\nimport {\n    IconButton,\n    SvgIcon,\n    Collapse,\n    ButtonGroup,\n    Divider,\n    Button\n} from \"@material-ui/core\"\n\nimport {\n    TreeView,\n    TreeItem,\n} from '@material-ui/lab'\n\nimport PlanDialog from '../../components/plan-dialog';\nimport HiveEditor from 'react-hive-flow'\nimport GraphKanban from '../../components/graph-kanban';\n\nimport { v4 as uuidv4 } from 'uuid';\nimport { useSpring, animated } from 'react-spring/web.cjs';\nimport YActions from '../../graph/yjs';\nimport qs from 'qs';\nimport './plan.css';\n\nconst ydoc = YActions()\nlet yDoc;\n\nexport default function PlanTab(props){\n  const [ selectedCard , setSelectedCard ] = React.useState(null)\n  let query = qs.parse(window.location.search, {ignoreQueryPrefix: true})\n  const [ selectedView, _setView ] = React.useState('list')\n\n    const [ nodes, setNodes ] = React.useState([])\n    const [ links, setLinks ] = React.useState([])\n\n    const [ expanded, setExpanded ] = React.useState(['root'])\n\n    const [ docProject, setProject ] = React.useState({})\n    const [ doc, setDoc ] = React.useState(null)\n    \n    const observer = () => {\n      if(yDoc){\n        let obj = yDoc.toJSON()\n        console.log(\"OBSERVE\", obj)\n        if(obj.nodes != null){\n          setNodes(obj.nodes.map((x) => Object.assign({}, x)))\n        }\n        if(obj.links != null) {\n          setLinks(obj.links.map((x) => Object.assign({}, x)))\n        }\n      }\n    }\n\n    React.useEffect(() => {\n      console.log(\"YDC\", props)\n      if(props.project && ydoc && props.project.id != docProject.id){\n        if(doc) doc.unobserve(observer);\n\n        console.log(\"Setting up YDOC\")\n        let _doc = ydoc.getMap(`plan-${props.project.id}`)\n        yDoc = _doc;\n        setDoc(_doc)\n        _doc.observe(observer)\n\n        setProject(props.project)\n        \n        let init = _doc.toJSON();\n\n        if(init.nodes != null) setNodes(init.nodes)\n        if(init.links != null) setLinks(init.links)\n      }\n    }, [props.project, doc])\n\n    const _setNodes = (nodes) => {\n      if(doc){\n        doc.set('nodes', nodes)\n      }\n      setNodes(nodes)\n    }\n\n    const _setLinks = (links) => {\n      if(doc){\n        doc.set('links', links)\n      }\n      setLinks(links)\n    }\n\n    const renderTree = (tree_branch) => {\n        if(tree_branch){\n            let _links = links.filter((a) => a.source == tree_branch.id)\n            let _children = _links.map((x) => nodes.filter((a) => a.id == x.target)[0])\n\n            let parent_pos = nodes.filter((a) => a.id == tree_branch.id)[0].position\n\n            let item = (\n                <StyledTreeItem \n                  editChild={() => {\n                    setSelectedCard({\n                      id: tree_branch.id,\n                      title: tree_branch.data.label,\n                      description: tree_branch.data.description,\n                      dueDate: tree_branch.dueDate,\n                      members: tree_branch.members})\n                  }}\n                  addChild={() => {\n                    let n = addNode({\n                        type: 'baseNode',\n                        data:{\n                          label: \"\"\n                        },\n                        position: {\n                          x: parent_pos.x,\n                          y: parent_pos.y + 121\n                        }\n                    })\n                    addLink({target: n.id, source: tree_branch.id})\n\n                    setSelectedCard({\n                      id: n.id,\n                      title: \"\",\n                      dueDate: null,\n                      members: []\n                    })\n        \n                }} nodeId={tree_branch.id} label={tree_branch && tree_branch.data && tree_branch.data.label}>\n                    {(_children || []).map((x) => renderTree(x))}\n                </StyledTreeItem>\n            )\n            return item;\n        }\n    }\n\n    const addNode = (node) => {\n        let n = nodes.slice();\n        node.id = uuidv4()\n        if(!node.data)node.data = {};\n        if(!node.position)node.position = {x:300, y:300}\n        n.push(node)\n        _setNodes(n)\n        return node;\n    }\n\n    const addLink = (link) => {\n        let l = links.slice();\n        link.id = uuidv4()\n        l.push(link);\n        _setLinks(l)\n        return link;\n    }\n\n    const [ columnMap, setColumnMap ] = React.useState([])\n\n    const renderKanban = () => {\n      return (\n        <GraphKanban \n          onClick={(card) => {\n            setSelectedCard({\n              id: card.id,\n              title: card.title,\n              dueDate: card.dueDate,\n              members: card.members\n            })\n          }}\n          onStatusChange={(card, status) => {\n            let n = nodes.slice()\n            let ix = n.map((x) => x.id).indexOf(card.id)\n            n[ix].data.status = status;\n            _setNodes(n)\n           // console.log(card, status)\n          }}\n          onChange={(cols) => {\n            //Add column -> node mapping to yjs\n            /*let output = cols.map((x) => ({\n              id: x.id,\n              title: x.title,\n              cards: x.cards.map((x) => x.id)\n            }))\n            setColumnMap(output)*/\n          }}\n          template={[\n            {\n              id: 0,\n              title: \"Blocked\",\n              status: \"BLOCKED\"\n            },\n            {\n              id: 1,\n              title: \"Ready to be Done\",\n              status: \"UNFINISHED\"\n            },\n            {\n              id: 2,\n              title: \"Doing\",\n              status: \"IN PROGRESS\"\n            },\n            {\n              id: 3,\n              title: \"Done\",\n              status: \"COMPLETE\"\n            }\n          ]}\n          map={columnMap}\n          graph={{nodes: nodes, links: links}} />\n      )\n    }\n\n    const renderList = () => {\n      let rootNodes = nodes.filter((x) => links.filter((a) => a.target == x.id).length == 0)\n//      let rootNodes = links.filter((a) => a.source == 'root').map((x) => nodes.filter((a) =>  a.id == x.target)[0])\n\n      return (\n        <TreeView\n        multiSelect\n        defaultExpanded={['1']}\n        expanded={expanded}\n        onNodeToggle={(event, newExpanded) => {\n            console.log(event, newExpanded)\n            setExpanded(newExpanded)\n        }}\n        defaultCollapseIcon={<MinusSquare />}\n        defaultExpandIcon={<PlusSquare />}\n        defaultEndIcon={<CloseSquare />}>\n         <StyledTreeItem \n          addChild={() => {\n            let n = addNode({\n                type: 'baseNode',\n                data: {label: ''}\n            })\n            setSelectedCard({\n              id: n.id,\n              title: \"\",\n              dueDate: null,\n              members: []\n            })\n          //  addLink({target: n.id, source: 'root'})\n                        \n            console.log(nodes, links)\n         }} nodeId=\"root\" label={props.project.name}>\n             {rootNodes.map((x) => renderTree(x))}\n        </StyledTreeItem>\n     </TreeView>\n      )\n    }\n\n    const renderHive = () => {\n      return (\n        <div className=\"plan-hive\">\n      <HiveEditor\n          nodes={nodes}\n          links={links}\n          onNodeChange={(nodes) => _setNodes(nodes)}\n          onLinkChange={(links) => _setLinks(links)} />\n        </div>\n      )\n    }\n\n\n    const renderPlan = () => {\n      let view = query.view || 'kanban'\n      switch(view){\n        case 'kanban':\n          return renderKanban()\n        case 'list':\n          return renderList()\n        case 'hive':\n          return renderHive()\n        default:\n          return\n      }\n    }\n\n    const setView = (view) => {\n      if(!query) query = {};\n      query.view = view;\n      props.history.push(`${props.location.pathname}?${qs.stringify(query)}`)\n    }\n\n    let view = query.view || 'kanban';\n\n    return (\n        <div style={{padding: 4, display: 'flex', flex: 1, position: 'relative', flexDirection: 'column', width: 'calc(100% - 8px)'}}>\n            <PlanDialog \n              onSave={(plan) => {\n                console.log(plan)\n                let n = nodes.slice()\n                let ix = n.map((x) => x.id).indexOf(plan.id)\n                let data = {}\n\n                if(plan.title) data.label = plan.title;\n                if(plan.description) data.description = plan.description\n                if(plan.dueDate) data.dueDate = plan.dueDate;\n                \n                n[ix] = {\n                  ...n[ix],\n                  data: {\n                    ...n[ix].data,\n                    ...data\n                  },\n                  members: plan.members\n                };\n                _setNodes(n)\n              }}\n              open={selectedCard} \n              plan={selectedCard} \n              onClose={() => setSelectedCard(null)}/>\n            <div className=\"plan-header\">\n              <div>\n      \n              </div>\n              <ButtonGroup>\n                <Button variant={view == 'kanban' && 'contained'} onClick={() => setView('kanban')}><DashboardIcon /></Button>\n                <Button variant={view == 'list' && 'contained'} onClick={() => setView('list')}><ListIcon /></Button>\n                <Button variant={view == 'hive' && 'contained'} onClick={() => setView('hive')}><EmojiNature /></Button>\n              </ButtonGroup>\n            </div>\n            <Divider />\n            <div className=\"plan-container\">\n            {renderPlan()}\n            </div>\n        </div>\n    )\n}\n\nfunction MinusSquare(props) {\n    return (\n      <SvgIcon fontSize=\"inherit\" style={{ width: 14, height: 14 }} {...props}>\n        {/* tslint:disable-next-line: max-line-length */}\n        <path d=\"M22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0zM17.873 11.023h-11.826q-.375 0-.669.281t-.294.682v0q0 .401.294 .682t.669.281h11.826q.375 0 .669-.281t.294-.682v0q0-.401-.294-.682t-.669-.281z\" />\n      </SvgIcon>\n    );\n  }\n  \n  function PlusSquare(props) {\n    return (\n      <SvgIcon fontSize=\"inherit\" style={{ width: 14, height: 14 }} {...props}>\n        {/* tslint:disable-next-line: max-line-length */}\n        <path d=\"M22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0zM17.873 12.977h-4.923v4.896q0 .401-.281.682t-.682.281v0q-.375 0-.669-.281t-.294-.682v-4.896h-4.923q-.401 0-.682-.294t-.281-.669v0q0-.401.281-.682t.682-.281h4.923v-4.896q0-.401.294-.682t.669-.281v0q.401 0 .682.281t.281.682v4.896h4.923q.401 0 .682.281t.281.682v0q0 .375-.281.669t-.682.294z\" />\n      </SvgIcon>\n    );\n  }\n  \n  function CloseSquare(props) {\n    return (\n      <SvgIcon className=\"close\" fontSize=\"inherit\" style={{ width: 14, height: 14 }} {...props}>\n        {/* tslint:disable-next-line: max-line-length */}\n        <path d=\"M17.485 17.512q-.281.281-.682.281t-.696-.268l-4.12-4.147-4.12 4.147q-.294.268-.696.268t-.682-.281-.281-.682.294-.669l4.12-4.147-4.12-4.147q-.294-.268-.294-.669t.281-.682.682-.281.696 .268l4.12 4.147 4.12-4.147q.294-.268.696-.268t.682.281 .281.669-.294.682l-4.12 4.147 4.12 4.147q.294.268 .294.669t-.281.682zM22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0z\" />\n      </SvgIcon>\n    );\n  }\n\n\nfunction TransitionComponent(props) {\n    const style = useSpring({\n      from: { opacity: 0, transform: 'translate3d(20px,0,0)' },\n      to: { opacity: props.in ? 1 : 0, transform: `translate3d(${props.in ? 0 : 20}px,0,0)` },\n    });\n  \n    return (\n      <animated.div style={style}>\n        <Collapse {...props} />\n      </animated.div>\n    );\n  }\n  \n  TransitionComponent.propTypes = {\n    /**\n     * Show the component; triggers the enter or exit states\n     */\n    in: PropTypes.bool,\n  };\n  \n  const StyledTreeItem = withStyles((theme) => ({\n    iconContainer: {\n      '& .close': {\n        opacity: 0.3,\n      },\n    },\n    group: {\n      marginLeft: 7,\n      paddingLeft: 18,\n      borderLeft: `1px dashed ${fade(theme.palette.text.primary, 0.4)}`,\n    },\n\n  }))((props) => {\n      return(\n    <TreeItem {...props} label={(\n        <div className=\"tree-item\" style={{display: 'flex', alignItems: 'center', justifyContent: 'space-between'}}>\n            {props.label}\n            <div style={{display: 'flex'}}>\n            <IconButton onClick={(e) => {\n                e.stopPropagation();\n                if(props.editChild) props.editChild()\n            }}>\n              <Edit />\n            </IconButton>\n            <IconButton onClick={(e) => {\n                e.stopPropagation()\n                props.addChild()\n            }}>\n                <Add />\n            </IconButton>\n            </div>\n        </div>\n    )} TransitionComponent={TransitionComponent}/>\n\n  )});\n  \n  const useStyles = makeStyles({\n    root: {\n      height: 264,\n      flexGrow: 1,\n      maxWidth: 400,\n    },\n  });","import CalendarTab from './calendar';\nimport FileTab from './files';\nimport PlanTab from './plan';\nimport TeamTab from './team';\n\nexport default {\n    CalendarTab,\n    FileTab,\n    PlanTab,\n    TeamTab\n}","import React from 'react';\n\nimport {\n    Add\n} from '@material-ui/icons';\n\nimport {\n    Fab,\n    List,\n    ListItem\n} from '@material-ui/core';\n\nimport { useMutation } from '@apollo/client';\nimport { attachFile } from '../../actions/fileActions';\nimport FileDialog from '../../components/file-dialog';\n\nexport default function FileTab(props){\n    const [ dialogOpen, openDialog ] = React.useState(false)\n\n    React.useEffect(() => {\n        console.log(props.project)\n    })\n    return (\n        <div>\n            <List>\n                {props.project && props.project.files && props.project.files.map((x) => (\n                    <ListItem>{x.filename}</ListItem>\n                ))}\n            </List>\n            <FileDialog onAttach={(selected) => {\n                for(var k in selected){\n                    attachFile(props.project.id, k);\n                    \n                }\n    \n            }} open={dialogOpen} onClose={() => openDialog(false)} />\n            <Fab style={{position: 'absolute', bottom: 12, right: 12}} color=\"primary\" onClick={() => openDialog(true)}>\n                <Add />\n            </Fab>\n\n        </div>\n    )\n}","import React from 'react';\n\nexport default function TeamTab(props){\n    return (\n        <div>\n            \n        </div>\n    )\n}","import React from 'react'\nimport {\n    Paper,\n    Typography,\n    Divider\n} from '@material-ui/core';\n\nimport {\n    KeyboardDatePicker\n} from '@material-ui/pickers'\n\nimport { Switch, Route } from 'react-router-dom';\n\nimport DashboardHeader from '../../components/dashboard-header';\nimport ProjectTabs from '../../tabs/project'\nimport { connect } from 'react-redux';\nimport './index.css';\n\nfunction ProjectView(props){\n    const [ project, setProject ] = React.useState({});\n    const [ selectedTab, setSelectedTab ] = React.useState(null)\n\n    React.useEffect(() => {\n        if(props.project && props.project.length > 0){\n            setProject(props.project[0])\n        }\n    }, [props.project])\n\n\n    const tabs = [\"Plan\", \"Calendar\", \"Team\", \"Files\"]\n\n    return [\n        <DashboardHeader \n            tabs={tabs}\n            onTabSelect={(tab) => {\n                setSelectedTab(tab)\n                props.history.push(`${props.match.url}/${tab.toLowerCase()}`)\n            }}\n            selectedTab={selectedTab || props.location.pathname.replace(`${props.match.url}/`, '')}\n            title={project.name} />,\n        <Paper style={{flex: 1, width: '100%', height: 'calc(100vh - 76px)', marginTop: 12, display: 'flex'}}>\n            <Switch>\n                <Route path={`${props.match.url}/plan`} render={(props) => {\n                    return <ProjectTabs.PlanTab {...props} y={props.y} project={project} />\n                }} />\n                <Route path={`${props.match.url}/calendar`} render={(props) => {\n                    return <ProjectTabs.CalendarTab {...props} y={props.y} project={project} />\n                }} />\n                <Route path={`${props.match.url}/team`} render={(props) => {\n                    return <ProjectTabs.TeamTab {...props} project={project} />\n                }} />\n                <Route path={`${props.match.url}/files`} render={(props) => {\n                    return <ProjectTabs.FileTab {...props} project={project} />\n                }} />\n            </Switch>\n        </Paper>\n\n    ]\n}\n\nexport default connect((state, ownProps) => ({\n    project: state.projects.list.filter((a) => a.id == ownProps.match.params.id)\n}))(ProjectView)","import React from 'react';\n\nimport {\n    Forward\n} from '@material-ui/icons'\n\nimport {\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    DialogActions,\n    Button,\n    FormControl,\n    InputLabel,\n    Select,\n    MenuItem,\n    TextField\n} from '@material-ui/core';\n\nimport { getConverters, convertFile } from '../../actions/fileActions';\n\nexport default function ConverterDialog(props){\n    const [ outputFormat, setOutputFormat ] = React.useState('')\n\n    const [ formats, setFormats ] = React.useState([])\n\n    React.useEffect(() => {\n        getConverters().then((converters) => {\n            setFormats(converters.map((x) => ({\n                from: x.sourceFormat,\n                to: [x.targetFormat]\n            })))\n        })\n    }, [])\n\n    const convert = () => {\n        convertFile(props.selected.id, outputFormat.toLowerCase())\n    }\n\n    return (\n        <Dialog fullWidth open={props.open} onClose={props.onClose}>\n            <DialogTitle>Convert {props.selected && props.selected.filename}</DialogTitle>\n            <DialogContent style={{display: 'flex', alignItems: 'center'}}>\n                <TextField \n                    fullWidth \n                    disabled\n                    label=\"From\" \n                    value={props.selected && props.selected.extension.toUpperCase()}/>\n                <Forward style={{marginLeft: 8, marginRight: 8}}/>\n                <FormControl fullWidth>\n                    <InputLabel>To</InputLabel>\n                    <Select value={outputFormat} onChange={(e) => {\n                        setOutputFormat(e.target.value) \n                    }} fullWidth>\n                        {props.selected && (formats.filter((a) => a.from == props.selected.extension)[0] || {to: []}).to.map((x) => (\n                            <MenuItem value={x}>{x.toUpperCase()}</MenuItem>\n\n                        ))}\n                    </Select>\n                </FormControl>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={props.onClose}>Cancel</Button>\n                <Button onClick={convert} color=\"primary\" variant=\"contained\">Start</Button>\n            </DialogActions>\n        </Dialog>\n    )\n}","import React, {useCallback} from 'react';\n\nimport {\n  Add,\n  MoreVert,\n  Contactless,\n  Info\n} from '@material-ui/icons';\n\nimport {\n  Paper,\n  Fab,\n  List,\n  IconButton,\n  ListItem,\n  Divider,\n  Checkbox\n} from '@material-ui/core';\nimport MoreMenu from '../../components/more-menu'\nimport DashboardHeader from '../../components/dashboard-header';\nimport PermissionForm from '../../components/permission-form';\nimport SearchTable from '../../components/search-table';\n\nimport FilePreviewDialog from '../../components/file-preview-dialog';\n\nimport ConverterDialog from '../../components/converter-dialog';\n\nimport { useMutation } from '@apollo/client';\nimport { addFile, CONVERT_FILE, getFiles, UPLOAD_FILE } from '../../actions/fileActions';\nimport {useDropzone} from 'react-dropzone'\nimport { connect } from 'react-redux';\n\nimport './index.css';\n\nfunction Files(props){\n  const [ uploadFile, {data} ] = useMutation(UPLOAD_FILE)\n  const [ convertDoc, setConvertDoc ] = React.useState(null)\n  const [ selectedData, setData ] = React.useState(null)\n\n  const onDrop = useCallback(async (acceptedFiles) => {\n    if(acceptedFiles && acceptedFiles.length > 0){\n      console.log(acceptedFiles)\n      uploadFile({variables: {file: acceptedFiles[0]}}).then((r) => {\n        if(r.data && r.data.uploadFile && !r.data.uploadFile.duplicate){\n          props.addFile(r.data.uploadFile.file)\n        }\n      })\n     \n    }\n    // Do something with the files\n  }, [data])\n\n\n  const {getRootProps, getInputProps, isDragActive} = useDropzone({onDrop, noClick: true})\n\n  const [ files, setFiles ] = React.useState([])\n  const [ viewable ] = React.useState([\"pdf\", \"glb\", \"png\"])\n  React.useEffect(() => {\n    props.getFiles()\n  }, [])\n\n  return [\n    <DashboardHeader \n    tabs={[]}\n    onTabSelect={(tab) => {\n        //setSelectedTab(tab)\n        //props.history.push(`${props.match.url}/${tab.toLowerCase()}`)\n    }}\n    selectedTab={''}\n    title={\"Files\"} />,\n\n    <PermissionForm\n      type={props.type}\n      permissions={props.permissions}\n      >\n        <FilePreviewDialog ipfs={props.ipfs} open={selectedData} file={selectedData} onClose={() => setData(null)} />\n        <ConverterDialog open={convertDoc} selected={convertDoc} onClose={() => setConvertDoc(null)}/>\n        <div className={isDragActive ? 'file-list selected' : 'file-list'} {...getRootProps()} >\n        <input {...getInputProps()} />\n\n        <SearchTable \n          data={props.files}\n          renderItem={(x) => (\n            <div className=\"file-item\">\n              <ListItem button onClick={(e) => {\n                e.stopPropagation();\n                if(viewable.indexOf(x.extension) > -1 ||(x.conversion && viewable.indexOf(x.conversion.extension) > -1)){\n               //   alert(\"Viewable\")\n                  let file = {}\n                  if(viewable.indexOf(x.extension) > -1){\n                    file = {\n                      filename: x.filename,\n                      cid: x.cid,\n                      extension: x.extension\n                    }\n                  }else if(x.conversion && viewable.indexOf(x.conversion.extension) > -1){\n                    file = {\n                      filename: x.filename,\n                      cid: x.conversion.cid,\n                      extension: x.conversion.extension\n                    }\n                  }\n                  setData(file)\n                }\n         \n                /*\n                if(props.ipfs){\n                  const get = async (x) => {\n                    if(props.ipfs){\n                      console.log(x)\n                      let file =  props.ipfs.cat(x.cid)\n                      let data = Buffer.from('')\n                      for await (const chunk of file){\n                        data = Buffer.concat([data, chunk])\n                      }\n                      setData({\n                        filename: x.filename,\n                        extension: x.extension,\n                        content: data\n                      })\n                     // console.log(data)\n                    }\n                    \n                  }\n                  //get(x)*/\n\n                \n              }}>\n                 <Checkbox onClick={(e) => {\n              e.stopPropagation();\n            }}/>  \n            <div style={{ flex: 1, display: 'flex', flexDirection: 'column'}}>\n              <div>{x.filename}</div>\n              <span style={{fontSize: 10}}>{x.cid}</span>\n            </div>\n              </ListItem>\n              <MoreMenu \n              menu={[\n                {\n                  label: \"Convert\",\n                  icon: <Contactless />,\n                  action: () => {\n                    setConvertDoc(x)\n                  }\n                },\n                {\n                  label: \"Get Info\",\n                  icon: <Info />,\n                  action: () => {}\n                }\n              ]} />\n            </div>\n          )}/>\n          </div>\n    </PermissionForm>\n  ]\n}\n\nexport default connect((state) => ({\n  files: state.files.list\n}), (dispatch) => ({\n  addFile: (file) => dispatch(addFile(file)),\n  getFiles: () => dispatch(getFiles())\n}))(Files)\n","import { gql } from '@apollo/client';\nimport GClient from '../graph';\nimport * as types from './types';\n\nconst client = GClient()\n\n\nexport const addBooking = (time, projectId, booking) => {\n    return (dispatch) => {\n    client.mutate({\n        mutation: gql`\n    mutation AddBooking($time: CalendarInput, $projectId: ID, $booking: BookingInput){\n        addBooking(time: $time, projectId: $projectId, booking: $booking){\n            id\n            startTime\n            endTime\n            allDay\n            date\n            project {\n                id \n                name\n            }\n            items {\n                equipment {\n                    name\n                }\n                team {\n                    name\n                }\n            }\n        }\n    }\n  `,\n  variables: {\n      time: time,\n      projectId: projectId,\n      booking: booking\n  }\n}).then((r) => r.data.addBooking).then((r) => {\n    dispatch({type: types.ADD_BOOKING, booking: r})\n})\n    }\n}\n\n  export const getBookings = () => {\n      return (dispatch, getState) => {\n    client.query({\n        query: gql`\n            query GetBookings{\n                calendar{\n                    id\n                    startTime\n                    endTime\n                    allDay\n                    date\n                    project {\n                        id\n                        name\n                    }\n                    items {\n                        equipment{\n                            name\n                        }\n                        team {\n                            name\n\n                        }\n                    }\n                }\n            }\n        `\n    }).then((r) => r.data.calendar).then((r) => {\n        console.log(r)\n        dispatch({type: types.SET_BOOKINGS, bookings: r})\n    })\n}\n  }\n","import React from 'react';\nimport * as Y from 'yjs'\nimport { \n    Dialog,\n    DialogActions,\n    DialogTitle,\n    DialogContent,\n    Button,\n    Checkbox,\n    FormControlLabel,\n    TextField,\n    InputAdornment,\n    Tabs,\n    Tab,\n    List,\n    ListItem,\n    Divider\n} from '@material-ui/core'\n\nimport {\n    Autocomplete\n} from '@material-ui/lab'\n\nimport {\n    Search\n} from '@material-ui/icons';\n\nimport { useMutation } from '@apollo/client';\nimport { addBooking } from '../../actions/calendarActions';\nimport { KeyboardDatePicker, KeyboardTimePicker } from '@material-ui/pickers';\nimport { connect } from 'react-redux';\nimport YActions from '../../graph/yjs';\n\nimport moment from 'moment';\nconst doc = YActions();\n\nlet yDoc; \n\nfunction CalendarDialog(props){\n    \n    const [ step, setStep ] = React.useState(0)\n    const [ searchTab, setSearchTab ] = React.useState(0)\n    const [ search, setSearch ] = React.useState(null)\n\n    const [ date, setDate ] = React.useState(null);\n    const [ allDay, setAllDay ] = React.useState(false);\n    const [ startTime, setStart ] = React.useState(null)\n    const [ endTime, setEnd ] = React.useState(null)\n    const [ project, setProject ] = React.useState(null)\n\n    const [ selectedItems, setSelectedItems ] = React.useState({})\n\n    React.useEffect(() => {\n       yDoc = doc.getMap('calendar')    \n    }, [])\n\n    const stepButton = () => {\n        if(step == 0){\n            setStep(1)\n        }else{\n            //Book items\n            let equipment = [];\n            let team = [];\n\n            for(var k in selectedItems){\n                if(selectedItems[k].selected){\n                    switch(selectedItems[k].type){\n                        case 'team':\n                            team.push(k)\n                            break\n                        case 'equipment':\n                            equipment.push(k)\n                            break;\n                    }\n                }\n            }\n\n            let sTime, eTime;\n            if(startTime){\n                sTime = moment(date)\n                sTime.set('hour', startTime.get('hour'))\n                sTime.set('minute', startTime.get('minute'))\n\n            }\n            if(endTime){\n                eTime = moment(date)\n            \n                eTime.set('hour', endTime.get('hour'))\n                eTime.set('minute', endTime.get('minute'))\n            }\n\n\n            let booking = new Y.Map();\n            let _booking = {\n                date: date.valueOf() / 1000,\n                project: project,\n                startTime: sTime && parseInt(sTime.valueOf() / 1000),\n                endTime: eTime && parseInt(eTime.valueOf() / 1000),\n                allDay: allDay,\n                items: {\n                    team: team,\n                    equipment: equipment\n                }\n            }\n            \n            booking.set('date', _booking.date)\n            booking.set('project', _booking.project)\n\n            if(yDoc){\n                //yDoc.set('bookings', [])\n                console.log(\"Inserting into yjs\")\n                let obj = yDoc.toJSON()\n                let bookings = obj.bookings || [];\n                console.log(bookings)\n                bookings.push(_booking)\n                yDoc.set('bookings', bookings)\n                console.log(yDoc.toJSON())\n            }\n\n            \n\n            /*props.addBooking({\n                    allDay: allDay,\n                    startTime: startTime && parseInt(sTime.valueOf() / 1000),\n                    endTime: endTime && parseInt(eTime.valueOf() / 1000),\n                    date: date.valueOf() / 1000\n                },\n                project.id,\n                {\n                    equipment: equipment,\n                    team: team\n                })*/\n                props.onClose()\n        }\n    }\n\n    \n    const renderStep = () => {\n        switch(step){\n            case 0:\n                return (\n                <>\n                <Autocomplete \n                    value={project}\n                    onChange={(e, newVal) => setProject(newVal)}\n                    options={props.projects}\n                    getOptionLabel={(project) => project.name} \n                    renderInput={(params) => {\n                        return (\n                            <TextField {...params} label=\"Project\"  />\n                        )\n                    }}/>\n                <KeyboardDatePicker \n                    value={date}\n                    format=\"DD/MM/yyyy\"\n                    onChange={(e, newVal) => setDate(e)}\n                    margin=\"normal\" \n                    label=\"Date\" \n                    variant=\"inline\" ></KeyboardDatePicker>\n                <FormControlLabel \n                    control={<Checkbox checked={allDay} onChange={(e) => {\n                        setAllDay(e.target.checked)\n                    }}/>}\n                    label=\"All day\" />\n                {!allDay && <div style={{display: 'flex', marginTop: 8}}>\n                    <KeyboardTimePicker \n                        value={startTime}\n                        onChange={(e) => setStart(e)}\n                        label=\"Start Time\"\n                        fullWidth \n                        style={{marginRight: 4}} \n                        variant=\"inline\" ></KeyboardTimePicker>\n                    <KeyboardTimePicker \n                        value={endTime}\n                        onChange={(e) => setEnd(e)}\n                        label=\"End Time\"\n                        fullWidth \n                        style={{marginLeft: 4}} \n                        variant=\"inline\" ></KeyboardTimePicker>\n                </div>}\n                </>\n                )\n            case 1:\n                return (\n                    \n                        <List>\n                            {(searchTab == 0 ? props.team : props.equipment).filter((a) => !search || a.name.toLowerCase().indexOf(search.toLowerCase()) > -1).map((x) => (\n                                <ListItem>\n                                    <Checkbox checked={selectedItems[x.id] && selectedItems[x.id].selected || false} onChange={(e) => {\n                                        let s = Object.assign({}, selectedItems);\n                                        s[x.id] = {\n                                            selected: e.target.checked,\n                                            type: searchTab == 0 ? \"team\" :\"equipment\"\n                                        } \n                                        console.log(s)\n                                        setSelectedItems(s)  \n                                    }}/>\n                                    {x.name}\n                                </ListItem>\n                            ))}\n                        </List>\n                    \n                )\n            default:\n                return null;\n        }\n    }\n\n    const renderStepTitle = () => {\n        switch(step){\n            case 1:\n                return (\n                    <>\n                    <TextField\n                    value={search}\n                    onChange={(e) => setSearch(e.target.value)} fullWidth InputProps={{\n                        startAdornment: <InputAdornment position=\"start\"><Search /></InputAdornment> \n                    }} label=\"Search\" />\n                    <Tabs value={searchTab} onChange={(e, newVal) => {\n                        if(newVal !== searchTab) setSearch('')\n                        setSearchTab(newVal)\n                    }}>\n                        <Tab label=\"Team\" />\n                        <Tab label=\"Equipment\" />\n                    </Tabs>\n                    <Divider />\n                    \n                    </>\n                )\n            case 0:\n                return \"Create a booking\"\n            default:\n                return null\n        }\n    }\n    return (\n        <Dialog fullWidth open={props.open} onClose={props.onClose}>\n            <DialogTitle>\n                {renderStepTitle()}</DialogTitle>\n            <DialogContent style={{display: 'flex', flexDirection: 'column', minHeight: 250}}>\n                {renderStep()}\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={step == \"0\" ? props.onClose : () => setStep(0)}>{step == \"0\" ? \"Cancel\" : \"Back\"}</Button>\n                <Button color=\"primary\" onClick={stepButton} variant=\"contained\">{step == \"1\" ? \"Book\" : \"Next\"}</Button>\n            </DialogActions>\n        </Dialog>\n    )\n}\n\nexport default connect((state) => ({\n    projects: state.projects.list,\n    team: state.team.list,\n    equipment: state.equipment.list\n}), (dispatch) => ({\n    addBooking: (time, project, booking) => dispatch(addBooking(time, project, booking))\n}))(CalendarDialog)","import React from 'react';\nimport {\n    Paper,\n    Fab\n} from '@material-ui/core';\n\nimport {\n    Add\n} from '@material-ui/icons';\n\nimport DashboardHeader from '../../components/dashboard-header'\nimport CalendarDialog from '../../components/calendar-dialog'\nimport { Calendar, momentLocalizer } from 'react-big-calendar'\nimport moment from 'moment'\nimport { getBookings } from '../../actions/calendarActions';\nimport { connect } from 'react-redux';\nimport YActions from '../../graph/yjs';\nimport 'react-big-calendar/lib/css/react-big-calendar.css'\n\nconst localizer = momentLocalizer(moment)\nconst doc = YActions();\n\nlet yDoc;\n\nfunction CalendarView(props){\n    const [ dialogOpen, openDialog ] = React.useState(false)\n    const [ bookings, setBookings ] = React.useState([])\n\n    const myEventsList = [];\n\n    const tabs = [\"All\", \"Me\", \"Projects\"];\n    \n    const observer = () => {\n        let obj = yDoc.toJSON()\n        if(obj.bookings && obj.bookings.length > 0){\n            setBookings(obj.bookings)\n        }\n    }\n    React.useEffect(() => {\n        yDoc = doc.getMap('calendar')\n        yDoc.observe(observer)\n        \n        let obj = yDoc.toJSON()\n        if(obj.bookings && obj.bookings.length > 0){\n            setBookings(obj.bookings)\n        }\n       // props.getBookings()\n    }, [])\n\n    return [\n        <DashboardHeader \n        tabs={tabs}\n        selectedTab={\"\"}\n        onTabSelect={(tab) => {\n            //setSelectedTab(tab)\n            props.history.push(`${props.match.url}/${tab.toLowerCase()}`)\n        }}\n        title={\"Calendar\"} />,\n        <CalendarDialog y={yDoc} open={dialogOpen} onClose={() => openDialog(false)} />,\n        \n        <Paper style={{\n            position: 'relative',\n            marginTop: 12, \n            height: 'calc(100vh - 84px)', \n            flex: 1,\n            display: 'flex', \n            flexDirection: 'column', \n            padding: 4}}>\n            <Fab onClick={() => openDialog(true)} color=\"primary\" style={{zIndex: 9, position: 'absolute', right: 12, bottom: 12}}>\n                <Add />\n            </Fab>\n            <Calendar\n                localizer={localizer}\n                events={bookings.map((x) => ({\n                    id: x.id,\n                    title: x.project.name,\n                    allDay: x.allDay,\n                    start: new Date((x.startTime || x.date)*1000),\n                    end: new Date((x.endTime || x.date)* 1000)\n                }))}\n                startAccessor=\"start\"\n                endAccessor=\"end\"\n                style={{ flex: 1 }} />\n        </Paper>\n    ]\n}\n\nexport default connect((state) => ({\n    bookings: state.calendar.bookings\n}), (dispatch) => ({\n    getBookings: () => dispatch(getBookings())\n}))(CalendarView)","import React from 'react';\n\nimport {\n  Paper,\n  Divider,\n  Typography,\n  List,\n  Button,\n  ListItem\n} from '@material-ui/core';\n\nimport { getConverters, installConverter } from '../../actions/fileActions';\n\nexport default function Settings(props){\n\n  const [ converters, setConverters ] = React.useState([])\n\n  React.useEffect(() => {\n    getConverters().then((converters) => {\n      console.log(converters)\n      setConverters(converters)\n    })\n  }, [])\n  const connections = [\n    {\n      name: \"MSSQL Server\"\n    }\n  ]\n\n  return (\n    <Paper style={{flex: 1, marginTop: 12}}>\n      <div style={{display: 'flex', flexDirection: 'column', padding: 8}}>\n        <Typography variant=\"h6\" style={{display: 'flex'}}>Add-ons</Typography>\n        <List>\n            {converters.map((x) => (\n              <ListItem style={{display: 'flex', alignItems: 'center', justifyContent: 'space-between'}}>\n                {x.name}\n                {x.installed ? (<Typography>Installed</Typography>): (<Button onClick={() => {\n                  installConverter(x.id)\n                }} color=\"primary\" variant=\"contained\">Install</Button>)}\n              </ListItem>\n            ))}\n        </List>\n    \n      </div>\n      <Divider />\n      <div style={{display: 'flex', flexDirection: 'column', padding: 8}}>\n        <Typography variant=\"h6\" style={{display: 'flex'}}>Connections</Typography>\n        <List>\n            {connections.map((x) => (\n              <ListItem button>{x.name}</ListItem>\n            ))}\n        </List>\n    \n      </div>\n      <Divider />\n    </Paper>\n  );\n}\n","import { gql } from '@apollo/client';\nimport * as types from './types';\nimport GClient from '../graph';\n\nconst client = GClient()\n\nexport const addTeamMember = (member) => {\n  return (dispatch) => {\n    client.mutate({\n      mutation: gql`\n  mutation AddTeamMember($member: TeamMemberInput){\n    addTeamMember(member: $member){\n      id\n      name\n      username\n      email\n      status\n      phoneNumber\n      admin\n    }\n  }\n`,\n      variables: {\n        member: member\n      }\n    }).then((r) => r.data.addTeamMember).then((r) => {\n      dispatch({type: types.ADD_TEAM_MEMBER, newMember: r})\n    })\n  }\n}\n\nexport const updateTeamMember = (memberId, member) => {\n  return (dispatch) => {\n     client.mutate({\n       mutation: gql`\n  mutation UpdateTeam($memberId: String, $member: TeamMemberInput){\n    updateTeamMember(memberId: $memberId, member: $member){\n      name\n      email\n      phoneNumber\n      admin\n    }\n  }\n`,\n    variables: {\n      memberId: memberId,\n      member: member\n    }\n  }).then((r) => r.data.updateTeamMember).then((r) => {\n    dispatch({type: types.UPDATE_TEAM_MEMBER, member: member, id: memberId})\n  })\n  }\n}\n\nexport const removeTeamMember = (id) => {\n  return (dispatch, getState) => {\n    return client.mutate({\n      mutation: gql`\n        mutation RemoveMember($memberId: ID){\n          removeTeamMember(memberId: $memberId)\n        }\n      `,\n      variables: {\n        memberId: id\n      }\n    }).then((r) => r.data.removeTeamMember).then((r) => {\n      dispatch({type: types.REMOVE_TEAM_MEMBER, id: id})\n    })\n  }\n}\n\nexport const getTeam = () => {\n  return (dispatch) => {\n    return client.query({\n      query: gql`\n        query GetTeam {\n          team {\n            id\n            status\n            name\n            username\n            password\n            phoneNumber\n            email\n            admin\n          }\n        }\n      `\n    }).then((r) => r.data.team).then((r) => {\n      dispatch({type: types.SET_TEAM, team: r})\n    })\n  }\n}\n","import React from 'react';\n\nimport {\n  Paper,\n  Typography,\n  List,\n  ListItem\n} from '@material-ui/core';\n\nimport {\n  SupervisedUserCircle,\n  SupervisorAccount,\n  Schedule,\n  Edit,\n  Delete,\n  Share\n} from '@material-ui/icons';\n\nimport DashboardHeader from '../../components/dashboard-header';\nimport SearchTable from '../../components/search-table';\nimport { useMutation } from \"@apollo/client\";\nimport { removeTeamMember, addTeamMember, updateTeamMember, getTeam } from '../../actions/teamActions';\nimport PermissionForm from '../../components/permission-form';\nimport MoreMenu from '../../components/more-menu';\nimport { connect } from 'react-redux';\nimport jwt_decode from 'jwt-decode'\nimport './index.css';\n\nfunction Teams(props){\n  const [ selected, setSelected ] = React.useState(null)\n\n  React.useEffect(() => {\n    props.getTeam()\n  }, [])\n\n  console.log(props.user)\n\n  return [\n    <DashboardHeader \n    tabs={[]}\n    onTabSelect={(tab) => {\n       // setSelectedTab(tab)\n      //  props.history.push(`${props.match.url}/${tab.toLowerCase()}`)\n    }}\n    selectedTab={''}\n    title={\"Team\"} />,\n    <PermissionForm \n      onSave={(data) => {\n        if(data.id){\n          let d = Object.assign({}, data);\n          delete d.id;\n          props.updateTeamMember(data.id, d)\n      \n        }else{\n          props.addTeamMember(data)\n        }\n      }}\n      onClose={() => setSelected(null)} \n      selected={selected}\n      type={props.type} \n      permissions={props.permissions}>\n      <SearchTable \n        data={props.team}\n        renderItem={(item) => (\n          <div className=\"team-item\">\n          <ListItem button >\n            {item.status == \"pending\" ? <Schedule /> : item.admin ? <SupervisorAccount /> : <SupervisedUserCircle />}\n            <Typography style={{marginLeft: 12}}>\n              {item.name}\n            </Typography>\n          </ListItem>\n          <MoreMenu \n            menu={[\n            ].concat(item.status == \"pending\" ? [\n              {\n                icon: <Share />,\n                label: \"Share Signup\",\n                action: () => {}\n              }\n            ] : []).concat(props.user.admin ? [{\n              label: \"Edit\",\n              icon: <Edit />,\n              action: () => setSelected(item)\n            },\n            {\n              label: \"Delete\",\n              color: 'red',\n              icon: <Delete />,\n              action: () => props.removeTeamMember(item.id)\n            }] : [])} />\n          </div>\n        )} />\n    </PermissionForm>\n  ]\n}\n\nexport default connect((state) => ({\n  user: jwt_decode(state.auth.token),\n  team: state.team.list,\n  type: state.dashboard.types.filter((a) => a.name == \"Team Members\"),\n  permissions: state.dashboard.permissions.filter((a) => a.type == \"Team Members\")\n}), (dispatch) => ({\n  getTeam: () => dispatch(getTeam()),\n  addTeamMember: (member) => dispatch(addTeamMember(member)),\n  removeTeamMember: (id) => dispatch(removeTeamMember(id)),\n  updateTeamMember: (id, member) => dispatch(updateTeamMember(id, member))\n}))(Teams)\n","import { gql } from '@apollo/client';\nimport * as types from './types';\nimport GClient from '../graph';\n\nconst client = GClient()\n\nexport const addEquipment = (equipment) => {\n  return (dispatch) => {\n    client.mutate({\n      mutation: gql`\n  mutation AddEquipment($equipment: EquipmentInput){\n    addEquipment(equipment: $equipment){\n      id\n      name\n      type\n      description\n    }\n  }\n`,\n    variables: {\n      equipment: equipment\n    }\n  }).then((r) => r.data.addEquipment).then((r) => {\n    dispatch({type: types.ADD_EQUIPMENT, newItem: r})\n  })\n}\n}\n\nexport const updateEquipment = (id, equipment) => {\n  console.log(id, equipment)\n  return (dispatch) => {\n    return client.mutate({\n      mutation:  gql`\n      mutation UpdateEquipment($equipmentId: String, $equipment: EquipmentInput){\n        updateEquipment(equipmentId: $equipmentId, equipment: $equipment){\n          name\n          type\n          description\n        }\n      }\n    `,\n    variables: {\n      equipmentId: id,\n      equipment\n    }\n    }).then((r) => r.data.updateEquipment).then((r) => {\n      dispatch({type: types.UPDATE_EQUIPMENT, equipment, id})\n    })\n  }\n}\n\nexport const removeEquipment = (id) => {\n  return (dispatch) => {\n    return client.mutate({\n      mutation: gql`\n        mutation RemoveEquipment($id: String){\n          removeEquipment(equipmentId: $id)\n        }\n      `,\n      variables: {\n        id: id\n      }\n    }).then((r) => r.data.removeEquipment).then((r) => {\n      dispatch({type: types.REMOVE_EQUIPMENT, id: id})\n    })\n  }\n}\n\n\nexport const getEquipment = () => {\n  return (dispatch) => {\n    return client.query({\n      query: gql`\n        query GetEquipment {\n          equipment {\n            id\n            name\n            type\n            description\n          }\n        }\n      `\n    }).then((r) => r.data.equipment).then((r) => {\n      dispatch({type: types.SET_EQUIPMENT, equipment: r})\n    })\n  }\n \n}\n","import React from 'react';\n\nimport {\n  Paper,\n  List,\n  ListItem,\n  Typography\n} from '@material-ui/core';\n\nimport DashboardHeader from '../../components/dashboard-header';\nimport SearchTable from '../../components/search-table';\nimport PermissionForm from '../../components/permission-form';\nimport { connect } from 'react-redux';\nimport { removeEquipment, getEquipment, updateEquipment, addEquipment } from '../../actions/equipmentActions';\nimport MoreMenu from '../../components/more-menu';\nimport jwt_decode from 'jwt-decode';\nimport './index.css';\n\nfunction Equipment(props){\n  const [ selected, setSelected] = React.useState(null)\n\n  React.useEffect(() => {\n    props.getEquipment()\n  }, [])\n\n  return [\n    <DashboardHeader \n    tabs={[...new Set(props.equipment.filter((a) => a.type).map((x) => x.type))]}\n    onTabSelect={(tab) => {\n        //setSelectedTab(tab)\n        //props.history.push(`${props.match.url}/${tab.toLowerCase()}`)\n    }}\n    selectedTab={''}\n    title={'Equipment'} />,\n    <PermissionForm \n      onSave={(data) => {\n        if(data.id){\n          let d = Object.assign({}, data);\n          console.log(data)\n          delete d.id;\n          props.updateEquipment(data.id, d)\n        }else{\n          props.addEquipment(data)\n        }\n      }}\n      onClose={() => setSelected(null)}\n      selected={selected} \n      type={props.type} \n      permissions={props.permissions}>\n    <SearchTable\n      data={props.equipment}\n      renderItem={(item) => (\n        <div className=\"equipment-item\">\n        <ListItem button onClick={(e) => {\n        }}>\n          <Typography variant=\"subtitle1\" style={{flex: 1}}>{item.name}</Typography>\n        </ListItem>\n          <MoreMenu\n            menu={[\n            ].concat(props.user.admin ? [\n              {\n                label: \"Edit\",\n                action: () => setSelected(item)\n              },\n              {\n                label: \"Delete\",\n                color: 'red',\n                action: () => props.removeEquipment(item.id)\n              }\n            ] : [])} />\n        </div>\n\n      )} />\n      </PermissionForm>\n  ]\n}\nexport default connect((state) => ({\n  user: jwt_decode(state.auth.token),\n  equipment: state.equipment.list,\n  type: state.dashboard.types.filter((a) => a.name ==\"Equipment\"),\n  permissions: state.dashboard.permissions.filter((a) => a.type == \"Equipment\")\n}), (dispatch) => ({\n  getEquipment: () => dispatch(getEquipment()),\n  addEquipment: (equipment) => dispatch(addEquipment(equipment)),\n  updateEquipment: (id, equipment) => dispatch(updateEquipment(id, equipment)),\n  removeEquipment: (id) => dispatch(removeEquipment(id))\n}))(Equipment)\n","import React from 'react'\n\nimport { NodeWrapper, withEditor } from 'react-hive-flow';\nimport  ReactJson from 'react-json-view'\nexport const type = 'typeDef'\n\nexport const modal = withEditor((props) => {\n\n  return (\n    <div style={{flex: 1}}>\n      <ReactJson src={props.node.data.typedef} />\n    </div>\n  )\n})\n\nexport const node = withEditor((props) => {\n    return (\n    <NodeWrapper {...props}>\n      <div style={{padding: 8}} className=\"type-def\">\n        {props.data.label}\n     </div>\n    </NodeWrapper>\n    )\n})","import * as types from './types';\nimport { gql } from '@apollo/client';\n\nimport GClient from '../graph';\n\nconst client = GClient()\n\nexport const UPDATE_INTEGRATION_MAP = gql`\n  mutation UpdateIntegrationMap($nodes: [MapNodeInput], $links: [MapLinkInput]){\n    updateIntegrationMap(nodes: $nodes, links: $links){\n      nodes{\n        id\n        type\n        data\n        position{\n          x\n          y\n        }\n      }\n      links{\n        id\n        target\n        source\n      }\n    }\n  }\n`\n\nexport const getPermissions = () => {\n  return (dispatch) => {\n    return client.query({\n      query: gql`\n      query GetPermissions{\n        typePermissions{\n          type\n          create\n          read\n          update\n          delete\n        }\n      }\n      `\n    }).then((r) => r.data.typePermissions).then((r) => {\n      console.log(r)\n      dispatch({type: types.SET_DASHBOARD_PERMS, perms: r})\n    })\n  }\n}\n\nexport const getIntegrationMap = () => {\n  return client.query({\n    query: gql`\n      query GetIntegrations{\n        integrationMap{\n          nodes{\n            id\n            type\n            data\n            position{\n              x\n              y\n            }\n          }\n          links{\n            id\n            target\n            source\n          }\n        }\n      }\n    `\n  }).then((r) => r.data.integrationMap)\n}\n\nexport const getTypes = () => {\n  return (dispatch, getState) => {\n    return client.query({\n      query: gql`\n        query GetTypes{\n          adminTypes{\n            name\n            typeDef\n          }\n        }\n      `\n    }).then((r) => r.data.adminTypes).then((r) => {\n      console.log(r)\n      dispatch({type: types.SET_DASHBOARD_TYPES, types: r})\n    })\n  }\n \n}\n\nexport const getTables = (store) => {\n    return client.query({\n      query: gql`\n        query GetLayout{\n          connectionLayout(storeId: \"${store}\"){\n            name\n          }\n        }\n      `\n    }).then((r) => {\n      return r.data.connectionLayout;\n    })\n}\n\nexport const getColumns = (store, table) => {\n    return client.query({\n        query: gql`\n          query GetProjects {\n            bucketLayout(storeId: \"${store}\", bucketId: \"${table}\"){\n              name\n              datatype\n            }\n          }\n        `\n      }).then((r) => {\n        return r.data.bucketLayout;\n      })\n}\n\nexport const getViews = () => {\n    return client.query({\n        query: gql`\n          query GetProjects {\n            getSQLViews{\n              name\n            }\n          }\n        `\n      }).then((r) => {\n        return r.data.getSQLViews;\n      })\n}\n","import React from 'react'\n\nimport {\n  Autocomplete\n} from '@material-ui/lab';\n\nimport {\n    TextField\n} from '@material-ui/core';\n\nimport { NodeWrapper, withEditor } from 'react-hive-flow';\n\nimport { getColumns, getTables, getViews } from '../actions/adminActions'\nimport async from 'async';\nimport './MSSQLNode.css';\n\nexport const type = 'mssqlAdapter'\n\nexport const modal = withEditor((props) => {\n\n  const [ tables, setTables ] = React.useState([])\n\n  const [ table, setTable ] = React.useState(null)\n\n  const [ columns, setColumns ] = React.useState([])\n\n  React.useEffect(() => {\n    let source = getSource();\n    getTables(source.id).then((tables) => {\n      setTables(tables)\n    })\n    console.log(getSource())\n  }, [])\n\n  const getSource = () => {\n      let links = props.editor.links.filter((a) => a.source == props.node.id)\n      if(links && links.length > 0){\n        let nodes = links.map((x) => props.editor.nodes.filter((a) => a.id == x.target)[0])\n        if(nodes && nodes.length > 0){\n            return nodes[0]\n        }\n      }\n  }\n\n  const renderFields = () => {\n    let links = props.editor.links.filter((a) => a.target == props.node.id)\n    if(links && links.length > 0){\n        let nodes = links.map((x) => props.editor.nodes.filter((a) => a.id == x.source)[0])\n        if(nodes && nodes.length > 0){\n            let type = nodes[0].data.typedef;\n            let ret = []\n            for(var k in type){\n                let changeKey = k\n                ret.push(\n                <div style={{marginTop: 4, display: 'flex', alignItems: 'center'}}>\n                    <div style={{width: 100}}>\n                      {k}\n                    </div>: \n                    <select \n                      value={props.node && props.node.data && props.node.data.provides && props.node.data.provides[k]}\n                      onChange={(e) => {\n                    \n                        props.editor.updateNode(props.node.id, (node) => {\n                          if(!node.data.provides) node.data.provides = {}\n                          console.log(e.target.value, \" provides \", changeKey)\n                          node.data.provides[changeKey] = e.target.value;\n                          return node;\n                        })\n                      }}>\n                      {(props.node.data.availableColumns || []).concat([{name: \"N/A\"}]).map((x) => (\n                        <option value={x.name}>\n                          {x.name}\n                        </option>))}\n                      </select>\n                </div>\n                )\n            }\n            return ret;\n        }\n    }\n  }\n\n  return (\n    <div style={{display: 'flex', flex: 1, flexDirection: 'column'}}>\n        <TextField disabled error={!getSource()} label=\"Connection Name\" value={getSource().data.label}/>\n\n        <Autocomplete \n          value={props.node.data.table}\n          onChange={(e, newVal) => {\n            console.log(e, newVal)\n            if(newVal && newVal.name){\n           // setTable(newVal)\n              props.editor.updateNode(props.node.id, (node) => {\n                node.data.table = newVal;\n                return node;\n              })\n              getColumns(getSource().id, newVal.name).then((r) => {\n                console.log(\"Searching for cols\", newVal.name, r)\n                props.editor.updateNode(props.node.id, (node) => {\n                  node.data.availableColumns = r;\n                  node.data.provides = {}\n                  return node;\n                })\n              })\n            }\n          }}\n          options={tables}\n          getOptionLabel={(x) => x.name}\n          autoHighlight\n          renderInput={(params) => (\n            <TextField {...params} margin=\"normal\" label=\"Table\" />\n          )} />\n        <div style={{marginTop: 8}}>\n        {renderFields()}\n        </div>\n    </div>\n  )\n})\n\nexport const node = withEditor((props) => {\n    return (\n    <NodeWrapper {...props}>\n      <div style={{padding: 8}} className=\"mssql-adapter\">\n        <div className=\"adapter-header\">\n        {props.data.label || \"MSSQL Adapter\"}\n        </div>\n        <div className=\"adapter-info\">\n          {props.data && props.data.table && props.data.table.name}\n        </div>\n     </div>\n    </NodeWrapper>\n    )\n})","import React from 'react'\n\nimport {\n    TextField\n} from '@material-ui/core';\n\nimport { NodeWrapper, withEditor } from 'react-hive-flow';\n\nexport const type = 'mssql server'\n\nexport const modal = withEditor((props) => {\n\n  return (\n    <div style={{display: 'flex', flex: 1, flexDirection: 'column'}}>\n        <TextField label=\"Connection Name\" value={props.node.data.label} onChange={(e) => {\n            props.editor.updateNode(props.node.id, (node) => {\n                node.data.label = e.target.value;\n                return node;\n            })\n        }}/>\n        <TextField label=\"Host IP:Host Port\" value={props.node.data.host} onChange={(e) => {\n          props.editor.updateNode(props.node.id, (node) => {\n            node.data.host = e.target.value;\n            return node;\n          })\n        }}/>\n        <TextField label=\"Database Name\" value={props.node.data.db} onChange={(e) => {\n          props.editor.updateNode(props.node.id, (node) => {\n            node.data.db = e.target.value;\n            return node;\n          })\n        }}/>\n        <TextField label=\"Username\" value={props.node.data.username} onChange={(e) => {\n          props.editor.updateNode(props.node.id, (node) => {\n            node.data.username = e.target.value;\n            return node;\n          })\n        }}/>\n        <TextField label=\"Password\" type=\"password\" value={props.node.data.password} onChange={(e) => {\n          props.editor.updateNode(props.node.id, (node) => {\n            node.data.password = e.target.value;\n            return node;\n          })\n        }} />\n    </div>\n  )\n})\n\nexport const node = withEditor((props) => {\n    return (\n    <NodeWrapper {...props}>\n      <div style={{padding: 8}} className=\"mssql-adapter\">\n        {props.data.label || \"MSSQL Server\"}\n     </div>\n    </NodeWrapper>\n    )\n})","import React from 'react';\n\nimport { cloneDeep } from 'lodash';\nimport * as TypeDefNode from '../../nodes/TypeDefNode'\nimport * as MSSQLNode from '../../nodes/MSSQLNode';\nimport * as MSSQLServer from '../../nodes/MSSQLServerNode';\n\nimport { useMutation } from '@apollo/client';\nimport { getTypes, getIntegrationMap, UPDATE_INTEGRATION_MAP} from '../../actions/adminActions'\nimport { connect } from 'react-redux';\nimport HiveEditor from 'react-hive-flow';\nimport 'react-hive-flow/dist/index.css';\nimport './index.css'\n\nfunction Admin(props){\n\n    React.useEffect(() => {\n        props.getTypes()\n        \n    }, [])\n\n\n    const [ updateIntegrationMap, {data}] = useMutation(UPDATE_INTEGRATION_MAP)\n       \n    const [ nodes, setNodes ] = React.useState([])\n    const [ links, setLinks ] = React.useState([])\n\n    React.useEffect(() => {\n        getIntegrationMap().then((integrations) => {\n            if(integrations.nodes) setNodes(integrations.nodes.map((x) => {\n                let y = cloneDeep(x)\n                delete y.__typename;\n                delete y.position.__typename;\n                return y;\n            }).slice());\n            if(integrations.links) setLinks(integrations.links.map((x) => {\n                let y = cloneDeep(x)\n                delete y.__typename;\n                return y;\n            }).slice());\n        })\n    }, [])\n\n    return (\n        <div className=\"admin-view\">\n        <HiveEditor\n            nodeTypes={[TypeDefNode, MSSQLNode, MSSQLServer]}\n            nodes={(props.types||[]).concat(nodes)}\n            links={links}\n            onNodeChange={(nodes) => {\n                let n = nodes.filter((a) => props.types.map((x) => x.id).indexOf(a.id) < 0)\n                updateIntegrationMap({variables: {\n                    nodes: n,\n                    links: links\n                }})\n                setNodes(n)\n            }}\n            onLinkChange={(link) => {\n                updateIntegrationMap({variables: {\n                    nodes: nodes,\n                    links: link\n                }})\n                setLinks(link)\n            }} />\n        </div>\n    )\n}\n\nexport default connect(\n    (state) => ({\n        types: (state.dashboard.types||[]).map((x, ix) => ({\n            id: x.name.toLowerCase(),\n            type: 'typeDef',\n            data: {\n                label: x.name,\n                typedef: x.typeDef\n            },\n            position: {\n                x: 200 + (ix * 200),\n                y: 300\n            },\n            draggable: false\n        }))\n    }),\n    (dispatch) => ({\n        getTypes: () => dispatch(getTypes())\n    })\n)(Admin)","import React from 'react';\n\nimport {\n    Drawer,\n    List,\n    ListItem,\n    Divider,\n} from '@material-ui/core';\n\nimport {\n    Notifications,\n    AccountTree,\n    Dashboard,\n    CalendarToday,\n    SupervisorAccount,\n    BusinessCenter,\n    Description,\n    Settings\n  } from '@material-ui/icons';\n\nimport { withRouter } from 'react-router-dom'\n\nfunction Sidebar(props){\n    const menu = [\n        {\n          icon: <Dashboard />,\n          label: \"Dashboard\",\n          path: \"\"\n        },\n        {\n          icon: <CalendarToday />,\n          label: \"Calendar\",\n          path: \"/calendar\"\n        },\n        {\n          icon: <AccountTree />,\n          label: \"Projects\",\n          path: \"/projects\"\n        },\n        {\n          icon: <SupervisorAccount />,\n          label: \"Team\",\n          path: \"/team\"\n        },\n        {\n          icon: <BusinessCenter /> ,\n          label: \"Equipment\",\n          path: \"/equipment\"\n        },\n        {\n          icon: <Description />,\n          label: \"Files\",\n          path: \"/files\"\n        },\n      ]\n\n    return (\n        <Drawer variant=\"permanent\" style={{width: 200}}>\n        <List style={{flex: 1, width: 200}}> \n        <ListItem style={{color: 'teal', padding: 12, fontSize: 20}}>\n           <img src=\"/assets/teal.png\" style={{height: 33, marginRight: 8}} /> WorkHub\n        </ListItem>\n        <Divider />\n        {menu.map((x, ix) => (\n            <ListItem \n            className={menu.map((x) => x.path).indexOf(window.location.pathname.split(props.match.url)[1]) == ix ? 'selected menu-item': 'menu-item'}\n            onClick={() => props.history.push(`${props.match.url}${x.path}`)}\n            button >{x.icon} {x.label}</ListItem>\n        ))}\n        </List>\n        <Divider />\n        <ListItem button onClick={() => props.history.push(`${props.match.url}/settings`)}>\n            <Settings style={{marginRight: 12}} />\n            Settings\n        </ListItem>\n        </Drawer>\n    )\n}\n\nexport default withRouter(Sidebar)","import React from 'react';\n\nimport {\n  Drawer,\n  List,\n  Divider,\n  ListItem,\n  Paper,\n  Typography,\n  Tabs,\n  Tab\n} from '@material-ui/core';\n\nimport {\n  Notifications,\n  AccountTree,\n  Dashboard,\n  CalendarToday,\n  SupervisorAccount,\n  BusinessCenter,\n  Description,\n  Settings\n} from '@material-ui/icons';\n\nimport { connect } from 'react-redux';\n\nimport Projects from '../../views/Projects';\nimport ProjectView from '../../views/ProjectView';\n\nimport Files from '../../views/Files';\nimport Calendar from '../../views/Calendar';\nimport SettingsView from '../../views/Settings';\nimport Teams from '../../views/Team';\nimport Equipment from '../../views/Equipment';\nimport AdminView from '../../views/Admin';\nimport qs from 'qs';\nimport jwt_decode from 'jwt-decode';\nimport { Switch, Route } from 'react-router-dom';\n\nimport IPFS from 'ipfs';\n\nimport { getTypes, getPermissions } from '../../actions/adminActions'\nimport Sidebar from '../../components/sidebar';\nimport YActions from '../../graph/yjs';\n\nimport './index.css';\n\nconst doc = YActions()\n\nfunction DashboardController(props){\n  let query_string = qs.parse(props.location.search, {ignoreQueryPrefix: true})\n\n  const currentPath = window.location.pathname.replace(/\\/dashboard/g, '')\n\n  const [ ipfsNode, setIPFS ] = React.useState(null)\n\n  React.useEffect(async () => {\n    props.getTypes()\n    props.getPermissions()\n    let node;\n    if(!ipfsNode){\n      node = await IPFS.create()\n    setIPFS(node)\n    }\n  \n    //console.log(await node.id())\n\n    return async () => {\n      await (ipfsNode || node).stop()\n    }\n  }, [])\n\n  const renderTitle = () => {\n    switch(currentPath){\n      case '':\n      case '/':\n        return \"Dashboard\";\n      case '/calendar':\n        return \"Calendar\"\n      case '/projects':\n        return \"Projects\"\n      case '/team':\n        return \"Team\";\n      case '/equipment':\n        return \"Equipment\"\n      case '/files':\n        return \"Files\";\n    }\n  }\n\n  const renderActionBlock = () => {\n    console.log(currentPath)\n    switch(currentPath){\n      case '/projects':\n        let project_set = [...new Set(props.projects.map((x) => x.status))]\n        console.log(project_set)\n        return (\n        <Tabs value={project_set.indexOf(query_string.status)}>\n          {project_set.map((x) => (\n            <Tab label={x} onClick={() => {\n              query_string.status = x;\n            props.history.push(`${props.location.pathname}?${qs.stringify(query_string)}`)\n          }}/>\n          ))}\n        </Tabs>\n        )\n      default:\n        return null;\n    }\n  }\n\n  return (\n    <div className=\"dashapp\">\n      <Sidebar match={props.match} />\n      <div className=\"dashapp-body\">\n\n        <Switch>\n          <Route path={`${props.match.url}/calendar`} render={(props) => (\n            <Calendar {...props} y={doc} />\n          )} />\n          <Route path={`${props.match.url}/projects`} component={Projects} exact />\n          <Route path={`${props.match.url}/projects/:id`} render={(props) => (\n            <ProjectView {...props} y={doc}/>\n          )} />\n          <Route path={`${props.match.url}/files`} render={(props) => {\n            return <Files {...props} ipfs={ipfsNode} />\n          }} />\n          <Route path={`${props.match.url}/team`} component={Teams} />\n          <Route path={`${props.match.url}/equipment`} component={Equipment} />\n          <Route path={`${props.match.url}/settings`} component={SettingsView} />\n          <Route path={`${props.match.url}/admin`} component={AdminView} />\n        </Switch>\n      </div>\n    </div>\n  );\n}\n\nexport default connect((state) => ({\n  projects: state.projects.list,\n  user: jwt_decode(state.auth.token)\n}), (dispatch) => ({\n  getTypes: () => dispatch(getTypes()),\n  getPermissions: () => dispatch(getPermissions())\n}))(DashboardController)\n","import * as types from './types';\nimport { gql } from '@apollo/client';\n\nexport const LOGIN = gql`\n    mutation Login($username: String, $password: String){\n        login(username: $username, password: $password){\n            token\n            error\n        }\n    }\n`\n\nexport const getQuote = () => {\n    return fetch('https://zenquotes.io/api/today').then((r) => r.json())\n}\n\nexport const setToken = (token) => {\n    return (dispatch) => {\n        dispatch({type: types.SET_TOKEN, token: token})\n    }\n}","import React from 'react';\n\nimport {\n    TextField,\n    Button,\n    Paper,\n    Typography,\n    Divider\n} from '@material-ui/core'\n\nimport { useMutation } from '@apollo/client';\nimport { getQuote, LOGIN, setToken } from '../../actions/authActions';\nimport { connect } from 'react-redux';\n\nimport './index.css';\n\nfunction Login(props){\n    const [ quote, setQuote ] = React.useState({})\n    const [ error, setError ] = React.useState(null)\n    const [ username, setUsername ] = React.useState('')\n    const [ password, setPassword ] = React.useState('')\n\n    const [ doLogin ] = useMutation(LOGIN)\n\n    const login = () => {\n        doLogin({variables: {\n            username: username,\n            password: password\n        }}).then((r) => {\n            if(r.data.login && r.data.login.token){\n                props.setToken(r.data.login.token)\n                props.history.push('/dashboard')\n            }else if(r.data.login && r.data.login.error){\n                setError(r.data.login.error)\n            }\n        })\n    }\n\n    React.useEffect(() => {\n        getQuote().then((quote) => {\n            setQuote(quote)\n        })\n    })\n\n    return (\n        <div className=\"login-view\">\n            <div className=\"image-banner\">\n                <div className=\"quotes\">\n                <span>\n                    {quote.q}\n                </span>\n                <span>{quote.a}</span>\n                </div>\n            </div>\n            <Paper style={{display: 'flex', flex: 0.3, flexDirection: 'column', padding: 8}}>\n                <div style={{display: 'flex', alignItems: 'center', paddingBottom: 8}}>\n                    <img style={{height: 70, marginRight: 12}} src=\"/assets/teal.png\" />\n                    <Typography style={{color: 'teal'}} variant=\"h4\">WorkHub</Typography>\n\n                </div>\n                <Divider style={{marginBottom: 22}} />\n            <TextField \n                error={error}\n                label=\"Username\" \n                value={username} \n                onChange={(e) => setUsername(e.target.value)}/>\n            <TextField \n                error={error}\n                label=\"Password\" \n                type=\"password\" \n                value={password} \n                onKeyDown={(e) => {if(e.keyCode == 13) {login()}}}\n                onChange={(e) => setPassword(e.target.value)}/>\n            <Button \n                onClick={login}\n                style={{marginTop: 33}} \n                color=\"primary\" \n                variant=\"contained\">Login</Button>\n            </Paper>\n\n        </div>\n    )\n}\n\nexport default connect(null, (dispatch) => ({\n    setToken: (token) => dispatch(setToken(token))\n}))(Login)","import * as types from '../actions/types';\n\nconst init = {\n  list: []\n}\n\nlet updated;\n\nexport default function projectReducer(state = init, action={}){\n  switch(action.type){\n    case types.SET_PROJECTS:\n      return {\n        ...state,\n        list: action.projects\n      }\n    case types.REMOVE_PROJECT:\n      updated = state.list.slice()\n      let pIx = updated.map((x) => x.id).indexOf(action.id)\n      updated.splice(pIx, 1)\n      return {\n        ...state,\n        list: updated\n      }\n    case types.ADD_PROJECT:\n      return {\n        ...state,\n        list: state.list.concat([action.newProject])\n      }\n    case types.UPDATE_PROJECT:\n      updated = state.list.slice()\n      let ix = updated.map((x) => x.id).indexOf(action.id)\n      updated[ix] = {\n        ...updated[ix],\n        ...action.project\n      }\n      return {\n        ...state,\n        list: updated\n      }\n    default:\n      return state;\n  }\n}\n","import * as types from '../actions/types';\n\nconst INIT = {\n    permissions: [],\n    types: []\n}\n\nexport default function dashboardReducer(state = INIT, action = {}){\n    switch(action.type){\n        case types.SET_DASHBOARD_PERMS:\n            return {\n                ...state,\n                permissions: action.perms\n            }\n        case types.SET_DASHBOARD_TYPES:\n            return {\n                ...state,\n                types: action.types\n            }\n        default:\n            return state;\n    }\n}","import * as types from '../actions/types';\n\nconst INIT = {\n  list: []\n}\n\nexport default function fileReducer(state = INIT, action = {}){\n  switch(action.type){\n    case types.SET_FILES:\n      return {\n        ...state,\n        list: action.files\n      }\n    case types.ADD_FILE:\n      return {\n        ...state,\n        list: state.list.concat([action.file])\n      }\n    default:\n      return state;\n  }\n}\n","import * as types from '../actions/types';\n\nconst INIT = {\n    token: null\n}\n\nexport default function authReducer(state = INIT, action = {}){\n    switch(action.type){\n        case types.SET_TOKEN:\n            return {\n                token: action.token\n            }\n        default:\n            return state;\n    }\n}","import * as types from '../actions/types';\n\nconst INIT = {\n    list: []\n}\n\nlet updated;\nexport default function equipmentReducer(state = INIT, action={}){\n    switch(action.type){\n        case types.SET_EQUIPMENT:\n            return {\n                ...state,\n                list: action.equipment\n            }\n        case types.ADD_EQUIPMENT:\n            return {\n                ...state,\n                list: state.list.concat([action.newItem])\n            }\n        case types.UPDATE_EQUIPMENT:\n            updated = state.list.slice()\n            let ix = updated.map((x) => x.id).indexOf(action.id)\n            updated[ix] = {\n                ...updated[ix],\n                ...action.equipment\n            }\n            return {\n                ...state,\n                list: updated\n            }\n        case types.REMOVE_EQUIPMENT:\n            updated = state.list.slice()\n            let eIx = updated.map((x) => x.id).indexOf(action.id)\n            updated.splice(eIx, 1)\n            return {\n                ...state,\n                list: updated\n            }\n        default:\n            return state;\n    }\n}","import * as types from '../actions/types'\n\nconst INIT = {\n    list: []\n}\n\nlet updated, tIx;\n\nexport default function teamReducer(state = INIT, action = {} ){\n    switch(action.type){\n        case types.SET_TEAM:\n            return {\n                ...state,\n                list: action.team\n            }\n        case types.ADD_TEAM_MEMBER:\n            return {\n                ...state,\n                list: state.list.concat([action.newMember])\n            }\n        case types.UPDATE_TEAM_MEMBER:\n            updated = state.list.slice()\n            tIx = updated.map((x) => x.id).indexOf(action.id)\n            updated[tIx] = {\n                ...updated[tIx],\n                ...action.member\n            }\n            return {\n                ...state,\n                list: updated\n            }\n        case types.REMOVE_TEAM_MEMBER:\n            updated = state.list.slice()\n            tIx = updated.map((x) => x.id).indexOf(action.id)\n            updated.splice(tIx, 1)\n            return {\n                ...state,\n                list: updated\n            }\n        default:\n            return state;\n    }\n}","import * as types from '../actions/types';\n\nconst INIT = {\n    bookings: []\n}\n\nexport default function calendarReducer(state = INIT, action = {}){\n    switch(action.type){\n        case types.SET_BOOKINGS:\n            return {\n                ...state,\n                bookings: action.bookings\n            }\n        case types.ADD_BOOKING:\n            return {\n                ...state,\n                bookings: state.bookings.concat([action.booking])\n            }\n        default:\n            return state;\n    }\n}","import { combineReducers } from 'redux';\n\nimport projects from './projects';\nimport dashboard from './dashboard';\nimport files from './files';\nimport auth from './auth';\nimport equipment from './equipment';\nimport team from './team';\nimport calendar from './calendar';\n\nexport default combineReducers({\n  projects,\n  auth,\n  files,\n  calendar,\n  dashboard,\n  equipment,\n  team\n})\n","import { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport { persistStore, persistReducer } from 'redux-persist'\nimport storage from 'redux-persist/lib/storage' // defaults to localStorage for web\n\nimport rootReducer from './reducers'\n\nconst persistConfig = {\n  key: 'root',\n  storage,\n}\n\nconst persistedReducer = persistReducer(persistConfig, rootReducer)\n\nexport default () => {\n  let store = createStore(persistedReducer, applyMiddleware(thunk))\n  let persistor = persistStore(store)\n  return { store, persistor }\n}\n\n","import React from 'react';\nimport { BrowserRouter as Router, Route, Redirect } from 'react-router-dom';\nimport { ApolloProvider } from '@apollo/client';\nimport { Provider } from 'react-redux';\nimport DashboardController from './controllers/DashboardController';\nimport Login from './views/Login';\nimport { PersistGate } from 'redux-persist/integration/react'\n\nimport MomentUtils from '@date-io/moment';\nimport {\n  MuiPickersUtilsProvider\n} from '@material-ui/pickers'\n\nimport GClient from './graph';\nimport configureStore from './configureStore';\n\nimport './App.css';\n\nconst { store, persistor } = configureStore();\nconst client = GClient();\n\nfunction App() {\n  return (\n    <MuiPickersUtilsProvider utils={MomentUtils}>\n      <Provider store={store}>\n      <ApolloProvider client={client}>\n      <Router>\n      <PersistGate loading={null} persistor={persistor}>\n\n      <div className=\"App\">\n        <Route path=\"/\" exact component={Login} />\n        <Route path=\"/dashboard\" render={(props) => {\n          if(store.getState().auth.token){\n            return <DashboardController {...props} />\n          }else{\n            return <Redirect to=\"/\" />\n          }\n        }} />\n      </div>\n      </PersistGate>\n    </Router>\n      </ApolloProvider>\n    </Provider>\n  </MuiPickersUtilsProvider>\n\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { pdfjs } from 'react-pdf';\npdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`;\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import React from 'react';\n\nimport {\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    DialogActions,\n    Button\n} from '@material-ui/core';\n\nimport GLBCard from '../glb-card'\nimport PDFCard from '../pdf-card';\n\nexport default function FilePreviewDialog(props){\n\n    const file = props.file || {}\n    const [data, setData] = React.useState(null)\n\n    const renderContent = () => {\n        if(data){\n        switch(file.extension){\n            case 'pdf':\n                return (\n                    <PDFCard data={data}/>\n                )\n            case 'glb':\n                return (\n                    <GLBCard data={data}/>\n                )\n            case 'png':\n                return (\n                    <img style={{width: '33%', height: '100%'}} src={data} />\n                )\n            default:\n                return null;\n        }\n    }\n    }\n\n    React.useEffect( async () => {\n        if(data) URL.revokeObjectURL(data)\n        if(props.file && props.ipfs){\n            console.log(\"Fetching\", props.file.cid)\n            let file =  props.ipfs.cat(props.file.cid)\n            let data = Buffer.from('')\n            for await (const chunk of file){\n              data = Buffer.concat([data, chunk])\n            }\n            console.log(\"Setting data\")\n            setData(URL.createObjectURL(new Blob([data])))\n        }\n    }, [props.file, props.ipfs])\n\n    const onClose = () => {\n        if(data) URL.revokeObjectURL(data)\n        if(props.onClose) props.onClose();\n    }\n\n    return (\n        <Dialog fullWidth maxWidth=\"lg\" open={props.open} onClose={onClose}>\n            <DialogTitle>{file.name}</DialogTitle>\n            <DialogContent style={{display: 'flex', flexDirection: 'column', alignItems: 'center'}}>\n                {renderContent()}\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={onClose}>Close</Button>\n            </DialogActions>\n        </Dialog>\n    )\n}","import React from 'react';\n\n\nexport default function GLBCard(props){\n    let canvas;\n    let scene;\n    let engine;\n\n  \n    React.useEffect(() => {\n        const onResizeWindow = () => {\n            if (engine) {\n              engine.resize();\n            }\n        }\n        if(props.data){\n\n        \n        if(!engine){\n        engine = new window.BABYLON.Engine(\n            canvas,\n            true\n        )\n        }\n\n        if(!scene){\n        scene = new window.BABYLON.Scene(engine)\n        scene.createDefaultEnvironment();\n        }\n\n        var camera = new window.BABYLON.ArcRotateCamera(\"camera\", -Math.PI / 2, Math.PI / 2.5, 3, new window.BABYLON.Vector3(0, 0, 10), scene);\n      \n        camera.setTarget(window.BABYLON.Vector3.Zero());\n        camera.minZ = 0;\n        camera.wheelPrecision = 7;\n        camera.speed = 0.5;\n\n        console.log(props.data)\n\n        window.BABYLON.SceneLoader.ImportMesh(null, \"\", props.data, scene, (e) => {\n            console.log(e)   \n        }, null, null, \".glb\")\n      \n        camera.attachControl(canvas, false);\n        window.addEventListener(\"resize\", onResizeWindow);\n        engine.runRenderLoop(function(){\n            scene.render();\n        });\n\n   \n    }\n    return () => {\n        if(engine){\n            engine.stopRenderLoop()\n        }\n        if(scene) {\n            scene.dispose()\n            scene = null\n        }\n\n        window.removeEventListener('resize', onResizeWindow)\n    }\n    }, [props.data])\n\n    const onCanvasLoad = (c) => {\n        if(c !== null){\n            canvas = c;\n        }\n    }\n\n    return (\n        <canvas style={{width: '100%'}} ref={onCanvasLoad}/>\n    )\n}","import React from 'react';\n\nimport { Document, Page } from 'react-pdf';\n\nexport default function PDFCard(props){\n    \n    const [ numPages, setNumPages ] = React.useState(null)\n    const [ pageNumber, setPageNumber ] = React.useState(1)\n\n    const onDocumentLoad = ({numPages}) => {\n        setNumPages(numPages)\n    }\n\n    return (\n        <Document\n            file={{data: props.data}}\n            onLoadSuccess={onDocumentLoad}>\n             {\n              Array.from(\n                new Array(numPages),\n                (el, index) => (\n                  <Page\n                    key={`page_${index + 1}`}\n                    pageNumber={index + 1}\n                  />\n                ),\n              )\n            }\n        </Document>\n    )\n}"],"sourceRoot":""}