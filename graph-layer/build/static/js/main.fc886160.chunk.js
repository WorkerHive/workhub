(this["webpackJsonpreact-workerhub"]=this["webpackJsonpreact-workerhub"]||[]).push([[0],{1006:function(e,t){},1015:function(e,t){},1090:function(e,t){},1091:function(e,t){},1174:function(e,t){},1176:function(e,t){},1304:function(e,t){},1368:function(e,t){},1377:function(e,t){},1379:function(e,t){},1456:function(e,t){},1461:function(e,t){},1530:function(e,t){},1551:function(e,t){},1553:function(e,t){},1584:function(e,t){},1716:function(e,t,n){},1717:function(e,t,n){},1719:function(e,t,n){},1720:function(e,t,n){},1724:function(e,t,n){},1725:function(e,t,n){},1726:function(e,t,n){},1740:function(e,t,n){},1741:function(e,t){},1742:function(e,t){},1743:function(e,t){},1744:function(e,t){},1745:function(e,t){},1746:function(e,t,n){},1748:function(e,t,n){},1749:function(e,t,n){},1751:function(e,t,n){},1752:function(e,t,n){},1753:function(e,t,n){},1756:function(e,t,n){},1820:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"type",(function(){return et})),n.d(a,"modal",(function(){return tt})),n.d(a,"node",(function(){return nt}));var r={};n.r(r),n.d(r,"type",(function(){return Rn})),n.d(r,"modal",(function(){return _n})),n.d(r,"node",(function(){return Bn}));var c={};n.r(c),n.d(c,"type",(function(){return $n})),n.d(c,"modal",(function(){return Un})),n.d(c,"node",(function(){return Wn}));var i={};n.r(i),n.d(i,"type",(function(){return Kn})),n.d(i,"modal",(function(){return zn})),n.d(i,"node",(function(){return Hn}));var o=n(2),s=n(0),u=n.n(s),l=n(36),d=n.n(l),j=(n(852),n(14)),f=n(316),b=n(95),p=n(39),m=n(34),O=n(40),h=n(3),x=n.n(h),v=n(74),g=n(1908),y=n(1872),C=n(12),S=n(1833),k=n(177),w=n(1869),D=n(1828),T=n(365),E=n(545);function q(e){var t=u.a.useState(null),n=Object(C.a)(t,2),a=n[0],r=n[1];return[Object(o.jsx)(D.a,{className:"more-menu",onClick:function(e){e.preventDefault(),e.stopPropagation(),r(e.currentTarget)},children:Object(o.jsx)(w.a,{})}),Object(o.jsx)(T.a,{open:e.menu.length>0&&a,onClose:function(){return r(null)},anchorEl:a,children:e.menu.map((function(e){return Object(o.jsxs)(E.a,{onClick:function(t){t.stopPropagation(),r(null),e.action()},style:{color:e.color||"black"},children:[e.icon,Object(o.jsx)(k.a,{style:{marginLeft:8},children:e.label})]})}))})]}var I=n(150),N=n(1873),P=n(1832),A=n(153),F=n(534),M=u.a.createContext(),L=function(e){var t=u.a.useState(new A.a),n=Object(C.a)(t,2),a=n[0],r=(n[1],u.a.useState(null)),c=Object(C.a)(r,2),i=c[0],s=c[1],l=u.a.useState("disconnected"),d=Object(C.a)(l,2),j=d[0],f=d[1];return u.a.useEffect((function(){(i=new F.a("wss://".concat("thetechcompany.workhub.services",":1234"),"workhub",a)).on("status",(function(e){console.info("=> YJS Status",e.status),f(e.status)})),s(i)}),[]),Object(o.jsx)(M.Provider,{value:{ydoc:a,status:j},children:e.children})};n(858);var R=Object(m.connect)((function(e){return{status:e.auth.status,user:Object(I.a)(e.auth.token)}}),(function(e){return{}}))((function(e){var t=u.a.useContext(M).status;return Object(o.jsxs)(P.a,{className:"dashapp-header",children:[Object(o.jsx)(k.a,{variant:"h6",children:e.title}),Object(o.jsx)("div",{className:"dashapp-header__tabs",children:Object(o.jsx)(g.a,{value:e.tabs.map((function(e){return e.toLowerCase()})).indexOf(e.selectedTab.toLowerCase()),onChange:function(t,n){e.onTabSelect(e.tabs[n])},children:(e.tabs||[]).map((function(e){return Object(o.jsx)(y.a,{label:e})}))})}),Object(o.jsxs)("div",{className:"actions-col",children:[Object(o.jsx)(N.a,{}),Object(o.jsxs)("div",{className:"user-info",children:[Object(o.jsx)(k.a,{variant:"subtitle1",children:e.user.name}),Object(o.jsxs)("div",{className:t,children:[Object(o.jsx)("div",{className:"bubble"}),"connected"==t?"Online":"Offline"]})]})]})]})})),_=n(1877),B=n(1879),$=n(1880),U=n(524),W=n(548),K=n(1878),z=n(178),H=n(1881),J=n(1871);n(859);function G(e){var t=u.a.useState(""),n=Object(C.a)(t,2),a=n[0],r=n[1];return Object(o.jsxs)(P.a,{style:{flex:"1 1 auto",marginTop:12,height:0,display:"flex",flexDirection:"column"},children:[Object(o.jsxs)("div",{className:"options-bar",children:[Object(o.jsx)(U.a,{InputProps:{startAdornment:Object(o.jsx)(W.a,{position:"start",children:Object(o.jsx)(_.a,{})})},label:"Search",value:a,onChange:function(e){r(e.target.value)},variant:"outlined",size:"small"}),Object(o.jsxs)(K.a,{children:[Object(o.jsx)(z.a,{children:Object(o.jsx)(B.a,{})}),Object(o.jsx)(z.a,{children:Object(o.jsx)($.a,{})})]})]}),Object(o.jsx)(H.a,{}),Object(o.jsx)("div",{className:"grid-list",children:Object(o.jsx)(J.a,{children:e.data.filter((function(t){return!(e.filter&&a.length>0)||e.filter(t,a)})).map((function(t){return Object(o.jsx)(S.a,{children:e.renderItem(t)})}))})})]})}var Y=n(1884),Q=n(1882),V=n(1911),Z=n(535),X=n(832),ee=n(536),te=n(537),ne=n(1883);n(860);function ae(e){var t=u.a.useState(!1),n=Object(C.a)(t,2),a=n[0],r=n[1],c=u.a.useState({}),i=Object(C.a)(c,2),s=i[0],l=i[1],d=u.a.useState({}),j=Object(C.a)(d,2),f=j[0],b=j[1],p=e.permissions&&e.permissions[0]||{},m=e.type&&e.type[0]||{};u.a.useEffect((function(){e.selected&&b(e.selected)}),[e.selected]);var O=function(){e.onClose(),r(!1),b({})};return Object(o.jsxs)("div",{className:"permission-form",style:e.style,children:[Object(o.jsxs)(Z.a,{fullWidth:!0,open:e.selected||a,onClose:function(){O()},children:[Object(o.jsx)(X.a,{children:m.name}),Object(o.jsx)(ee.a,{style:{display:"flex",flexDirection:"column"},children:function(e){var t=[],n=function(){var n=a;switch(e.typeDef[a]){case"String":t.push(Object(o.jsx)(U.a,{value:f[n],onChange:function(e){var t=Object.assign({},f),a=Object.assign({},s);t[n]=e.target.value,a[n]=e.target.value,b(t),l(a)},label:n}));break;case"Boolean":t.push(Object(o.jsx)(Q.a,{control:Object(o.jsx)(V.a,{checked:f[n],onChange:function(e){var t=Object.assign({},f),a=Object.assign({},s);t[n]=e.target.checked,a[n]=e.target.checked,b(t),l(a)}}),label:n}))}};for(var a in e.typeDef)n();return t}(m)}),Object(o.jsxs)(te.a,{children:[Object(o.jsx)(z.a,{onClick:function(){O()},children:"Cancel"}),Object(o.jsx)(z.a,{onClick:function(){return e.onSave(f,s),void O()},color:"primary",variant:"contained",children:"Save"})]})]}),Object(o.jsx)("div",{className:"permission-form__inner",children:e.children}),p.create&&Object(o.jsx)(ne.a,{onClick:function(){return r(!0)},color:"primary",style:{position:"absolute",bottom:12,right:12},children:Object(o.jsx)(Y.a,{})})]})}var re=n(59),ce="SET_PROJECTS",ie="ADD_PROJECT",oe="REMOVE_PROJECT",se="UPDATE_PROJECT",ue="SET_TEAM",le="ADD_TEAM_MEMBER",de="REMOVE_TEAM_MEMBER",je="UPDATE_TEAM_MEMBER",fe="SET_EQUIPMENT",be="ADD_EQUIPMENT",pe="UPDATE_EQUIPMENT",me="REMOVE_EQUIPMENT",Oe="SET_FILES",he="SET_BOOKINGS",xe="ADD_BOOKING",ve="SET_TOKEN",ge="SET_STATUS",ye="SET_NODE_CONF",Ce="ADD_FILE",Se="SET_DASHBOARD_TYPES",ke="SET_DASHBOARD_PERMS",we=n(205),De=n(1885),Te=n.n(De),Ee=function(){try{return new p.ApolloClient({link:Te()({uri:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_GRAPH_URL||"/graphql"}),cache:new p.InMemoryCache({addTypename:!1})})}catch(e){console.log(e)}};function qe(){var e=Object(re.a)(["\n        query GetProjects {\n          projects{\n            id\n            name\n            description\n            status\n            files{\n              filename\n              cid\n            }\n          }\n        }\n      "]);return qe=function(){return e},e}function Ie(){var e=Object(re.a)(["\n          mutation RemoveProject($projectId: ID){\n            removeProject(projectId: $projectId)\n          }\n        "]);return Ie=function(){return e},e}function Ne(){var e=Object(re.a)(["\n  mutation UpdateProject($projectId: ID, $project: ProjectInput){\n    updateProject(projectId: $projectId, project: $project){\n      id\n      name\n      description\n      status\n    }\n  }\n"]);return Ne=function(){return e},e}function Pe(){var e=Object(re.a)(["\n      mutation AddProject($project: ProjectInput){\n        addProject(project: $project){\n          id\n          name\n          description\n          status\n        }\n      }\n    "]);return Pe=function(){return e},e}var Ae=Ee(),Fe=n(176),Me=n.n(Fe);n(871);var Le=Object(m.connect)((function(e){return{user:Object(I.a)(e.auth.token),projects:e.projects.list,type:e.dashboard.types.filter((function(e){return"Projects"==e.name})),permissions:e.dashboard.permissions.filter((function(e){return"Projects"==e.type}))}}),(function(e){return{getProjects:function(){return e((function(e){return Ae.query({query:Object(p.gql)(qe())}).then((function(t){e({type:ce,projects:t.data.projects.map((function(e){var t=Object(we.cloneDeep)(e);return delete t.__typename,t}))})}))}))},addProject:function(t){return e(function(e){return function(t){return Ae.mutate({mutation:Object(p.gql)(Pe()),variables:{project:e}}).then((function(e){return e.data.addProject})).then((function(e){t({type:ie,newProject:e})}))}}(t))},updateProject:function(t,n){return e(function(e,t){return function(n){return Ae.mutate({mutation:Object(p.gql)(Ne()),variables:{projectId:e,project:t}}).then((function(e){return e.data.updateProject})).then((function(a){n({type:se,project:t,id:e})}))}}(t,n))},removeProject:function(t){return e((n=t,function(e){return Ae.mutate({mutation:Object(p.gql)(Ie()),variables:{projectId:n}}).then((function(e){return e.data.removeProject})).then((function(t){t&&e({type:oe,id:n})}))}));var n}}}))((function(e){var t=Me.a.parse(e.location.search,{ignoreQueryPrefix:!0}),n=u.a.useState(null),a=Object(C.a)(n,2),r=a[0],c=a[1];return u.a.useEffect((function(){e.getProjects()}),[]),[Object(o.jsx)(R,{tabs:["ALL"].concat(Object(O.a)(new Set(e.projects.filter((function(e){return null!=e.status&&void 0!=e.status})).map((function(e){return e.status.trim().toUpperCase()})))))||[],onTabSelect:function(n){"ALL"==n?(delete t.status,e.history.push("".concat(window.location.pathname,"?").concat(Me.a.stringify(t)))):(t.status=n,e.history.push("".concat(window.location.pathname,"?").concat(Me.a.stringify(t))))},selectedTab:t.status&&t.status.toUpperCase()||"ALL",title:"Projects"}),Object(o.jsx)(ae,{onSave:function(t,n){if(t.id){var a=Object.assign({},n);delete a.id,e.updateProject(t.id,a)}else e.addProject(n)},onClose:function(){return c(null)},selected:r,type:e.type,permissions:e.permissions,children:Object(o.jsx)(G,{filter:function(e,t){return e.name.indexOf(t)>-1},data:e.projects.filter((function(e){return!(!t.status||e.status!=t.status)||!t.status})).filter((function(e){return e.name})),renderItem:function(t){return[Object(o.jsxs)("div",{className:"project-item",children:[Object(o.jsx)(S.a,{button:!0,onClick:function(){e.history.push("".concat(e.match.url,"/").concat(t.id,"/plan"))},children:Object(o.jsx)(k.a,{style:{flex:1},variant:"subtitle1",children:t.name})}),Object(o.jsx)(q,{menu:[].concat(e.user.admin?[{label:"Edit",action:function(){return c(t)}},{label:"Delete",color:"red",action:function(){return e.removeProject(t.id)}}]:[])})]})]}})})]})),Re=n(73),_e=n(1909);function Be(){var e=Object(re.a)(['\n          query GetProjects {\n            bucketLayout(storeId: "','", bucketId: "','"){\n              name\n              datatype\n            }\n          }\n        ']);return Be=function(){return e},e}function $e(){var e=Object(re.a)(['\n        query GetLayout{\n          connectionLayout(storeId: "','"){\n            name\n          }\n        }\n      ']);return $e=function(){return e},e}function Ue(){var e=Object(re.a)(["\n        query GetTypes{\n          adminTypes{\n            name\n            typeDef\n          }\n        }\n      "]);return Ue=function(){return e},e}function We(){var e=Object(re.a)(["\n      query GetIntegrations{\n        integrationMap{\n          nodes{\n            id\n            type\n            data\n            position{\n              x\n              y\n            }\n          }\n          links{\n            id\n            target\n            source\n          }\n        }\n      }\n    "]);return We=function(){return e},e}function Ke(){var e=Object(re.a)(["\n      query GetPermissions{\n        typePermissions{\n          type\n          create\n          read\n          update\n          delete\n        }\n      }\n      "]);return Ke=function(){return e},e}function ze(){var e=Object(re.a)(["\n  mutation UpdateIntegrationMap($nodes: [MapNodeInput], $links: [MapLinkInput]){\n    updateIntegrationMap(nodes: $nodes, links: $links){\n      nodes{\n        id\n        type\n        data\n        position{\n          x\n          y\n        }\n      }\n      links{\n        id\n        target\n        source\n      }\n    }\n  }\n"]);return ze=function(){return e},e}var He=Ee(),Je=Object(p.gql)(ze()),Ge=function(){return function(e,t){return He.query({query:Object(p.gql)(Ue())}).then((function(e){return e.data.adminTypes})).then((function(t){console.log(t),e({type:Se,types:t})}))}},Ye=function(e){return He.query({query:Object(p.gql)($e(),e)}).then((function(e){return e.data.connectionLayout}))},Qe=function(e,t){return He.query({query:Object(p.gql)(Be(),e,t)}).then((function(e){return e.data.bucketLayout}))},Ve=n(273),Ze=n(127),Xe=n.n(Ze),et=(n(563),"mssqlAdapter"),tt=Object(Re.e)((function(e){var t=u.a.useState([]),n=Object(C.a)(t,2),a=n[0],r=n[1],c=u.a.useState(null),i=Object(C.a)(c,2),s=(i[0],i[1],u.a.useState([])),l=Object(C.a)(s,2);l[0],l[1];u.a.useEffect((function(){var e=d();Ye(e.id).then((function(e){r(e)})),console.log(d())}),[]);var d=function(){var t=e.editor.links.filter((function(t){return t.source==e.node.id}));if(t&&t.length>0){var n=t.map((function(t){return e.editor.nodes.filter((function(e){return e.id==t.target}))[0]}));if(n&&n.length>0)return n[0]}};return Object(o.jsxs)("div",{style:{display:"flex",flex:1,flexDirection:"column"},children:[Object(o.jsx)(U.a,{disabled:!0,error:!d(),label:"Connection Name",value:d().data.label}),Object(o.jsx)(_e.a,{value:e.node.data.table,onChange:function(t,n){console.log(t,n),n&&n.name&&(e.editor.updateNode(e.node.id,(function(e){return e.data.table=n,e})),Qe(d().id,n.name).then((function(t){console.log("Searching for cols",n.name,t),e.editor.updateNode(e.node.id,(function(e){return e.data.availableColumns=t,e.data.provides={},e}))})))},options:a,getOptionLabel:function(e){return e.name},autoHighlight:!0,renderInput:function(e){return Object(o.jsx)(U.a,Object(j.a)(Object(j.a)({},e),{},{margin:"normal",label:"Table"}))}}),Object(o.jsx)("div",{style:{marginTop:8},children:function(){var t=e.editor.links.filter((function(t){return t.target==e.node.id}));if(t&&t.length>0){var n=t.map((function(t){return e.editor.nodes.filter((function(e){return e.id==t.source}))[0]}));if(n&&n.length>0){var a=n[0].data.typedef,r=[],c=function(){var t=i;r.push(Object(o.jsxs)("div",{style:{marginTop:4,display:"flex",alignItems:"center"},children:[Object(o.jsx)("div",{style:{width:100},children:i}),":",Object(o.jsx)("select",{value:e.node&&e.node.data&&e.node.data.provides&&e.node.data.provides[i],onChange:function(n){e.editor.updateNode(e.node.id,(function(e){return e.data.provides||(e.data.provides={}),console.log(n.target.value," provides ",t),e.data.provides[t]=n.target.value,e}))},children:(e.node.data.availableColumns||[]).concat([{name:"N/A"}]).map((function(e){return Object(o.jsx)("option",{value:e.name,children:e.name})}))})]}))};for(var i in a)c();return r}}}()})]})})),nt=Object(Re.e)((function(e){return Object(o.jsxs)(Re.c,Object(j.a)(Object(j.a)({},e),{},{children:[Object(o.jsx)("textarea",{onChange:function(t){return e.editor.updateNode(e.id,(function(e){return{data:{label:t.target.value}}}))},value:e.data&&e.data.label,rows:4,placeholder:"Project Title"}),Object(o.jsxs)("div",{style:{display:"flex"},children:[e.data&&e.data.dueDate&&"ETA:"," ",e.data&&Xe()(new Date(1e3*e.data.dueDate)).format("DD/MM/yyyy")]})]}))}));function at(){var e=Object(re.a)(["\n                mutation GetNode{\n                    connectNode{\n                        swarmKey\n                        peerDiscovery\n                    }\n                }\n            "]);return at=function(){return e},e}function rt(){var e=Object(re.a)(["\n    mutation Login($username: String, $password: String){\n        login(username: $username, password: $password){\n            token\n            error\n        }\n    }\n"]);return rt=function(){return e},e}var ct,it=Ee(),ot=Object(p.gql)(rt()),st=function(e){return function(t){t({type:ge,status:e})}},ut=n(285),lt=(n(877),Object(ut.b)(Xe.a));var dt=Object(m.connect)(null,(function(e){return{setStatus:function(t){return e(st(t))}}}))((function(e){var t=u.a.useContext(M).ydoc,n=u.a.useState([]),a=Object(C.a)(n,2),r=(a[0],a[1],u.a.useState([])),c=Object(C.a)(r,2),i=c[0],s=c[1],l=u.a.useState(null),d=Object(C.a)(l,2),j=d[0],f=d[1],b=u.a.useState({}),p=Object(C.a)(b,2),m=p[0],O=p[1],h=function(){if(ct){var e=ct.toJSON();console.log("OBSERVE",e),null!=e.nodes&&s(e.nodes.map((function(e){return Object.assign({},e)})))}};return u.a.useEffect((function(){if(console.log("YDC",e),e.project&&t&&e.project.id!=m.id){j&&j.unobserve(h),console.log("Setting up YDOC");var n=t.getMap("plan-".concat(e.project.id));ct=n,f(n),n.observe(h),O(e.project);var a=n.toJSON();null!=a.nodes&&s(a.nodes)}}),[e.project,j]),Object(o.jsx)("div",{className:"calendar-tab",children:Object(o.jsx)(ut.a,{localizer:lt,events:i.filter((function(e){return e.data&&e.data.dueDate})).map((function(e){return{id:e.id,title:e.data.label,allDay:!1,start:new Date(1e3*e.data.dueDate-3e5),end:new Date(1e3*e.data.dueDate)}})),startAccessor:"start",endAccessor:"end",style:{flex:1}})})})),jt=n(388);function ft(){var e=Object(re.a)(["\n        query GetFiles{\n          files{\n            id\n            filename\n            cid\n            extension\n            conversion{\n              extension\n              cid\n            }\n          }\n        }\n      "]);return ft=function(){return e},e}function bt(){var e=Object(re.a)(["\n      mutation InstallConverter($converterId: ID){\n        installConverter(converterId: $converterId)\n      }\n    "]);return bt=function(){return e},e}function pt(){var e=Object(re.a)(["\n      query GetConverters{\n        converters{\n          id\n          name\n          sourceFormat\n          targetFormat\n          installed\n        }\n      }\n    "]);return pt=function(){return e},e}function mt(){var e=Object(re.a)(["\n    mutation ConvertFile($fileId: ID, $targetFormat:String){\n      convertFile(fileId: $fileId, targetFormat: $targetFormat){\n        msg\n        error\n      }\n    }\n  "]);return mt=function(){return e},e}function Ot(){var e=Object(re.a)(["\n    mutation AttachFile($projectId: ID, $fileId: ID){\n      attachFileToProject(projectId: $projectId, fileId: $fileId){\n        files{\n          cid\n        }\n      }\n    }\n    "]);return Ot=function(){return e},e}function ht(){var e=Object(re.a)(["\n    mutation UploadFile($file: Upload!){\n      uploadFile(file: $file) {\n        duplicate\n        file{\n          id\n          filename\n          cid\n          extension\n        }\n      }\n    }\n  "]);return ht=function(){return e},e}var xt=Ee(),vt=Object(p.gql)(ht()),gt=function(e,t){return function(n){return xt.mutate({mutation:vt,variables:{file:e}}).then((function(e){return e.data.uploadFile})).then((function(e){console.log("Upload file"),t(e.file),e.duplicate||n(Ct(e.file))}))}},yt=function(){return xt.query({query:Object(p.gql)(pt())}).then((function(e){return e.data.converters}))},Ct=function(e){return function(t){t({type:Ce,file:e})}};var St=Object(m.connect)((function(e){return{files:e.files.list}}))((function(e){var t=u.a.useState(""),n=Object(C.a)(t,2),a=n[0],r=n[1],c=u.a.useState({}),i=Object(C.a)(c,2),s=i[0],l=i[1];return Object(o.jsxs)(Z.a,{fullWidth:!0,open:e.open,onClose:e.onClose,children:[Object(o.jsx)(X.a,{children:"Files"}),Object(o.jsxs)(ee.a,{children:[Object(o.jsx)(U.a,{fullWidth:!0,value:a,onChange:function(e){return r(e.target.value)},label:"Search",InputProps:{startAdornment:Object(o.jsx)(W.a,{position:"start",children:Object(o.jsx)(_.a,{})})}}),Object(o.jsx)(J.a,{children:e.files.filter((function(e){return e.filename&&e.filename.toLowerCase().indexOf(a.toLowerCase())>-1})).map((function(e){return Object(o.jsxs)(S.a,{button:!0,children:[Object(o.jsx)(V.a,{checked:s[e.id],onChange:function(t){var n=s;n[e.id]=t.target.checked,l(n)}}),e.filename]})}))})]}),Object(o.jsxs)(te.a,{children:[Object(o.jsx)(z.a,{onClick:e.onClose,children:"Close"}),Object(o.jsx)(z.a,{color:"primary",variant:"contained",onClick:function(){e.onAttach&&(e.onAttach(s),l({}),e.onClose())},children:"Attach"})]})]})}));var kt=n(1887),wt=n(1888),Dt=n(1889),Tt=(n(830),n(1890),n(817)),Et=n.n(Tt),qt=n(1916);n(1717);function It(e){for(var t=0,n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t);return t}function Nt(e){var t=(16777215&e).toString(16).toUpperCase();return"00000".substring(0,6-t.length)+t}var Pt=Object(m.connect)((function(e){return{team:e.team.list}}))((function(e){return console.log(e.members,Array.isArray(e.members)),Object(o.jsx)("div",{className:"team-circles",children:e.members&&(Array.isArray(e.members)?e.members:[]).map((function(t){var n,a=(n=t,e.team.filter((function(e){return e.id==n}))[0]);return Object(o.jsx)(qt.a,{style:{backgroundColor:"#"+Nt(It(a.name))},children:a.name.split(" ").map((function(e){return e.substring(0,1)}))})}))})}));n(1718),n(1719);var At=Object(m.connect)((function(e){return{team:e.team.list}}))((function(e){var t=u.a.useState([{id:0,title:"Blocked",cards:[]},{id:1,title:"Backlog",cards:e.graph.nodes.filter((function(e){return"COMPLETED"!=e.status&&"BLOCKED"!=e.status})).map((function(e){return{id:e.id,title:e.data.label}}))},{id:2,title:"Doing",cards:[]},{id:3,title:"Done",cards:[]}]),n=Object(C.a)(t,2),a=n[0],r=n[1];return Object(o.jsx)(Et.a,{renderCard:function(t){return Object(o.jsxs)("div",{onClick:function(){e.onClick&&e.onClick(t)},className:"react-kanban-card",children:[Object(o.jsx)("div",{className:"react-kanban-card__title",children:t.title}),t.data.dueDate!=1/0&&Object(o.jsxs)("div",{style:{textAlign:"left"},children:["ETA: ",Xe()(new Date(1e3*t.data.dueDate)).format("DD/MM/yyyy")]}),Object(o.jsx)("div",{children:t.description}),Object(o.jsx)(Pt,{members:(Array.isArray(t.members)||"typeof"!=typeof t.members)&&t.members||[]})]})},onCardDragEnd:function(t,n,c){console.log(n,c);var i=a.slice(),o=i.map((function(e){return e.id})).indexOf(n.fromColumnId),s=i.map((function(e){return e.id})).indexOf(c.toColumnId),u=i[o].cards.splice(n.fromPosition,1);i[s].cards.splice(c.toPosition,0,u[0]),e.onStatusChange&&e.onStatusChange(t,e.template.filter((function(e){return e.id==c.toColumnId}))[0].status),e.onChange&&e.onChange(i),r(i)},onColumnDragEnd:function(t,n,c){var i=a.slice(),o=i.splice(n.fromPosition,1)[0];i.splice(c.toPosition,0,o),e.onChange&&e.onChange(i),r(i)},children:{columns:function(){var t=[];return e.template&&(t=e.template||[]),t.map((function(t){t.id;var n=e.graph.nodes.filter((function(e){return e.data.status==t.status}))||[];return console.log(n),Object(j.a)(Object(j.a)({},t),{},{cards:n.sort((function(e,t){return e.data&&e.data.dueDate||(e.data.dueDate=1/0),t.data&&t.data.dueDate||(t.data.dueDate=1/0),e.data.dueDate-t.data.dueDate})).map((function(t){var n=e.graph.links.filter((function(e){return e.target==t.id})).map((function(t){return e.graph.nodes.filter((function(e){return e.id==t.source}))[0]}));return Object(j.a)(Object(j.a)({},t),{},{title:t.data.label,description:n.length>0&&n[0].data.label})}))})}))}()}})}));n(528),n(1720);var Ft={CalendarTab:dt,FileTab:function(e){var t=u.a.useState(!1),n=Object(C.a)(t,2),a=n[0],r=n[1],c=u.a.useState([]),i=Object(C.a)(c,2),s=i[0],l=i[1];return u.a.useEffect((function(){e.y&&(console.log("Y",e.y.toJSON()),l(e.y.toJSON().attachments||[]))}),[e.y]),Object(o.jsxs)("div",{style:{flex:1,display:"flex"},children:[Object(o.jsx)(jt.a,{title:e.project.name,files:s}),Object(o.jsx)(St,{onAttach:function(t){for(var n in t)a=e.project.id,r=n,xt.mutate({mutation:Object(p.gql)(Ot()),variables:{projectId:a,fileId:r}}).then((function(e){return e.data.attachFileToProject})).then((function(e){console.log(e)}));var a,r},open:a,onClose:function(){return r(!1)}}),Object(o.jsx)(ne.a,{style:{position:"absolute",bottom:12,right:12},color:"primary",onClick:function(){return r(!0)},children:Object(o.jsx)(Y.a,{})})]})},PlanTab:Object(m.connect)(null,(function(e){return{setStatus:function(t){return e(st(t))}}}))(Object(Re.e)((function(e){u.a.useContext(M).ydoc;var t=u.a.useState(null),n=Object(C.a)(t,2),a=(n[0],n[1],Me.a.parse(window.location.search,{ignoreQueryPrefix:!0})),r=u.a.useState("list"),c=Object(C.a)(r,2),i=(c[0],c[1],u.a.useState(["root"])),s=Object(C.a)(i,2),l=(s[0],s[1],u.a.useState({})),d=Object(C.a)(l,2),j=(d[0],d[1],u.a.useState(null)),f=Object(C.a)(j,2),b=(f[0],f[1],u.a.useState([])),p=Object(C.a)(b,2),m=p[0],O=(p[1],function(t){a||(a={}),a.view=t,e.history.push("".concat(e.location.pathname,"?").concat(Me.a.stringify(a)))}),h=a.view||"kanban";return Object(o.jsxs)("div",{style:{padding:4,display:"flex",flex:1,position:"relative",flexDirection:"column",width:"calc(100% - 8px)"},children:[Object(o.jsxs)("div",{className:"plan-header",children:[Object(o.jsx)("div",{}),Object(o.jsxs)(K.a,{children:[Object(o.jsx)(z.a,{variant:"kanban"==h&&"contained",onClick:function(){return O("kanban")},children:Object(o.jsx)(kt.a,{})}),Object(o.jsx)(z.a,{variant:"list"==h&&"contained",onClick:function(){return O("list")},children:Object(o.jsx)(wt.a,{})}),Object(o.jsx)(z.a,{variant:"hive"==h&&"contained",onClick:function(){return O("hive")},children:Object(o.jsx)(Dt.a,{})})]})]}),Object(o.jsx)(H.a,{}),Object(o.jsx)("div",{className:"plan-container",children:function(){switch(a.view||"kanban"){case"kanban":return Object(o.jsx)(At,{onClick:function(t){e.editor.exploreNode(t.id)},onStatusChange:function(t,n){e.editor.updateNode(t.id,(function(e){return{data:{status:n}}}))},onChange:function(e){},template:[{id:0,title:"Blocked",status:"BLOCKED"},{id:1,title:"Ready to be Done",status:"UNFINISHED"},{id:2,title:"Doing",status:"IN PROGRESS"},{id:3,title:"Done",status:"COMPLETE"}],map:m,graph:{nodes:e.editor.nodes,links:e.editor.links}});case"list":return e.editor.nodes.filter((function(t){return 0==e.editor.links.filter((function(e){return e.target==t.id})).length})),Object(o.jsx)("div",{});case"hive":return Object(o.jsxs)("div",{className:"plan-hive",children:[Object(o.jsx)(Re.b,{}),Object(o.jsx)(Re.d,{})]});default:return}}()})]})}))),TeamTab:function(e){return Object(o.jsx)("div",{})}},Mt=n(1891),Lt=(n(1724),n(278));function Rt(e){var t=u.a.useCallback((function(t){e.onDrop&&e.onDrop(t)})),n=Object(Lt.a)({onDrop:t,noClick:e.noClick||!1}),a=n.getRootProps,r=n.getInputProps,c=n.isDragActive;return Object(o.jsxs)("div",Object(j.a)(Object(j.a)({className:"file-drop ".concat(c&&"active")},a()),{},{children:[Object(o.jsx)("input",Object(j.a)({},r())),e.children(c)]}))}var _t=n(1912);n(1725);var Bt=Object(m.connect)((function(e){return{user:Object(I.a)(e.auth.token),team:e.team.list}}),(function(e){return{uploadFile:function(t,n){return e(gt(t,n))}}}))(Object(Re.e)((function(e){var t=u.a.useState(""),n=Object(C.a)(t,2),a=n[0],r=n[1],c=u.a.useState(""),i=Object(C.a)(c,2),s=i[0],l=i[1],d=u.a.useState(""),j=Object(C.a)(d,2),f=j[0],b=j[1],p=u.a.useState(null),m=Object(C.a)(p,2),h=m[0],x=m[1],v=u.a.useState([]),g=Object(C.a)(v,2),y=g[0],w=g[1],D=u.a.useState([]),E=Object(C.a)(D,2),q=E[0],I=E[1],N=u.a.useState(null),P=Object(C.a)(N,2),A=P[0],F=P[1];u.a.useEffect((function(){e.plan&&e.plan.data&&(e.plan.id&&r(e.plan.id),e.plan.data.label&&l(e.plan.data.label),e.plan.data.description&&b(e.plan.data.description),console.log("MEMBERS",e.plan.members),e.plan.members&&w(Array.isArray(e.plan.members)?e.plan.members:[]),e.plan.attachments&&I(e.plan.data.attachments||[]),e.plan.data.dueDate&&x(Xe()(new Date(1e3*e.plan.data.dueDate))))}),[e.plan]);var M=function(){var t={id:a,title:s,description:f,members:Object(O.a)(new Set(y))||[],dueDate:h&&h.valueOf()/1e3};e.onSave&&(e.onSave(t),e.onClose())},L=function(e){console.log(a);var t=y.slice();console.log(t,e,t.indexOf(e)),t.indexOf(e)>-1?(t.splice(t.indexOf(e),1),console.log("Removing ")):t.push(e),console.log(Object(O.a)(new Set(t))),w(Object(O.a)(new Set(t)))};return Object(o.jsx)(Z.a,{fullWidth:!0,open:e.open,onClose:e.onClose,children:Object(o.jsx)(Rt,{onDrop:function(t){if(t.length>0){for(var n=0;n<t.length;n++)e.uploadFile(t[n],(function(t){e.editor.attachFile(t.filename,t.cid),e.editor.updateNode(a,(function(e){return{data:{attachments:(e.data.attachments||[]).concat([{name:t.filename,cid:t.cid}])}}})),I(q.concat([{name:t.filename,cid:t.cid}]))}));console.log(t)}},noClick:!0,children:function(t){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("div",{children:t&&Object(o.jsx)("div",{style:{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",top:0,zIndex:9,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.5)"},className:"file-opacity",children:Object(o.jsx)(k.a,{variant:"h6",style:{fontWeight:"bold"},children:"Drop files here"})})}),Object(o.jsx)(X.a,{children:Object(o.jsx)(U.a,{value:s,onChange:function(e){return l(e.target.value)},fullWidth:!0,label:"Title"})}),Object(o.jsxs)(ee.a,{className:"plan-dialog__content",children:[Object(o.jsxs)("div",{className:"plan-info",children:[Object(o.jsx)(U.a,{value:f,onChange:function(e){return b(e.target.value)},fullWidth:!0,label:"Description",rows:4,multiline:!0,rowsMax:6}),Object(o.jsxs)("div",{children:[Object(o.jsx)(k.a,{style:{fontWeight:"bold",marginTop:4},variant:"subtitle1",children:"Attachments"}),q.map((function(e){return Object(o.jsx)("div",{children:e.name})}))]}),Object(o.jsxs)("div",{children:[Object(o.jsx)(k.a,{variant:"subtitle1",children:"Members"}),Object(o.jsx)(Pt,{members:y})]})]}),Object(o.jsxs)("div",{className:"plan-actions",children:[Object(o.jsx)(z.a,{onClick:function(){L(e.user.id)},color:Object(O.a)(y).indexOf(e.user.id)>-1?"":"primary",variant:"contained",children:Object(O.a)(y).indexOf(e.user.id)>-1?"Leave":"Join"}),Object(o.jsx)(z.a,{color:"primary",variant:"contained",onClick:function(e){!function(e){F(A?null:e.currentTarget)}(e)},children:"Members"}),Object(o.jsxs)(T.a,{onClose:function(){return F(null)},transformOrigin:{vertical:"top",horizontal:"center"},anchorOrigin:{vertical:"bottom",horizontal:"center"},open:A,anchorEl:A,children:[Object(o.jsx)(H.a,{}),Object(o.jsx)("div",{style:{padding:4},children:Object(o.jsx)(U.a,{label:"Name"})}),Object(o.jsx)(J.a,{children:e.team.map((function(e){return Object(o.jsxs)(S.a,{button:!0,onClick:function(){L(e.id)},children:[Object(O.a)(y).indexOf(e.id)>-1&&Object(o.jsx)(Mt.a,{style:{marginRight:8}})," ",e.name]})}))})]}),Object(o.jsx)(_t.a,{style:{marginTop:4},label:"Due Date",value:h,onChange:function(e){x(e)},format:"DD/MM/yyyy"}),Object(o.jsx)(z.a,{color:"primary",variant:"contained",style:{marginTop:4},children:"Attachments"})]})]}),Object(o.jsxs)(te.a,{children:[Object(o.jsx)(z.a,{onClick:e.onClose,children:"Cancel"}),Object(o.jsx)(z.a,{onClick:M,color:"primary",variant:"contained",children:"Save"})]})]})}})})})));n(1726);var $t=Object(m.connect)((function(e,t){return{project:e.projects.list.filter((function(e){return e.id==t.match.params.id}))}}))((function(e){var t=u.a.useContext(M).ydoc,n=u.a.useState({}),r=Object(C.a)(n,2),c=r[0],i=r[1],s=u.a.useState(null),l=Object(C.a)(s,2),d=l[0],f=l[1],p=u.a.useState(null),m=Object(C.a)(p,2),h=m[0],x=m[1],v=u.a.useState(null),g=Object(C.a)(v,2),y=g[0],S=g[1],k=u.a.useState([]),w=Object(C.a)(k,2),D=w[0],T=w[1],E=u.a.useState([]),q=Object(C.a)(E,2),I=q[0],N=q[1],A=u.a.useState([]),F=Object(C.a)(A,2),L=F[0],_=F[1],B=function(){if(h){var e=h.toJSON();console.log("OBSERVE",e),null!=e.nodes&&T(e.nodes.map((function(e){return Object.assign({},e)}))),null!=e.links&&N(e.links.map((function(e){return Object.assign({},e)}))),null!=e.attachments&&_(e.attachments.map((function(e){return Object.assign({},e)})))}};u.a.useEffect((function(){if(e.project&&e.project.length>0){h&&h.unobserve(B);var n=e.project[0],a=t.getMap("plan-".concat(n.id));a.observe(B),x(a),i(e.project[0]);var r=a.toJSON();null!=r.nodes&&T(r.nodes),null!=r.links&&N(r.links),null!=r.attachments&&_(r.attachments)}}),[e.project]);var $=function(e){h&&h.set("nodes",e),T(e)},U=function(e){h&&h.set("links",e),N(e)},W=["Plan","Calendar","Team","Files"];return Object(o.jsx)(Re.a,{store:{nodes:D,links:I,nodeTypes:[a],attachments:L,attachFile:function(e,t){!function(e){h&&h.set("attachments",e),_(e)}(Object(O.a)(new Set(L.concat([{name:e,cid:t}]))))},exploreNode:function(e){var t=D.filter((function(t){return t.id==e}))[0];S({id:e,title:t.data.label,description:t.data.description,dueDate:t.data.dueDate,members:t.members,attachments:t.data.attachments})},onNodeAdd:function(e){return $(D.concat(e))},onLinkAdd:function(e){return U(I.concat(e))},onLinkRemove:function(e){U(I.filter((function(t){return e.map((function(e){return e.id})).indexOf(t.id)<0})))},onNodeRemove:function(e){$(D.filter((function(t){return e.map((function(e){return e.id})).indexOf(t.id)<0})))},onNodeUpdate:function(e,t){console.log("NODE UPDATE");var n=D.map((function(e){return e.id})).indexOf(e),a=D.slice();console.log(t),a[n]=Object(we.mergeWith)(a[n],t,(function(e,t){if(console.debug("CUSTOMIZER",e,t),Array.isArray(e))return t})),console.log(a[n]),$(a)},statusColors:{unfinished:"orange",blocked:"red",doing:"#d4faf4",complete:"green"},onNodeChange:function(e){return $(e)},onLinkChange:function(e){return U(e)}},children:function(t){return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(Bt,{project:e.project,onSave:function(e){console.log(e),t.updateNode(e.id,(function(t){var n={data:{}};return e.title&&(n.data.label=e.title),e.description&&(n.data.description=e.description),e.dueDate&&(n.data.dueDate=e.dueDate),console.log(e.members),e.members&&(n.members=e.members),console.log(n,e.id),n})),S(null)},open:y,plan:y?Object.assign({},D.filter((function(e){return e.id==y.id}))[0]):{},onClose:function(){return S(null)}}),Object(o.jsx)(R,{tabs:W,onTabSelect:function(t){f(t),e.history.push("".concat(e.match.url,"/").concat(t.toLowerCase()))},selectedTab:d||e.location.pathname.replace("".concat(e.match.url,"/"),""),title:c.name}),Object(o.jsx)(P.a,{style:{flex:1,width:"100%",height:"calc(100vh - 76px)",marginTop:12,display:"flex"},children:Object(o.jsxs)(b.d,{children:[Object(o.jsx)(b.b,{path:"".concat(e.match.url,"/plan"),render:function(e){return Object(o.jsx)(Ft.PlanTab,Object(j.a)(Object(j.a)({},e),{},{y:h,project:c}))}}),Object(o.jsx)(b.b,{path:"".concat(e.match.url,"/calendar"),render:function(e){return Object(o.jsx)(Ft.CalendarTab,Object(j.a)(Object(j.a)({},e),{},{y:e.y,project:c}))}}),Object(o.jsx)(b.b,{path:"".concat(e.match.url,"/team"),render:function(e){return Object(o.jsx)(Ft.TeamTab,Object(j.a)(Object(j.a)({},e),{},{project:c}))}}),Object(o.jsx)(b.b,{path:"".concat(e.match.url,"/files"),render:function(e){return Object(o.jsx)(Ft.FileTab,Object(j.a)(Object(j.a)({},e),{},{y:h,project:c}))}})]})})]})}})})),Ut=n(531),Wt=n.n(Ut),Kt=(n(1738),n(1739),n(1740),Object(Ut.WidthProvider)(Wt.a));function zt(e){return Object(o.jsx)("div",{className:"dashboard-view",children:Object(o.jsxs)(Kt,{isBounded:!0,autoSize:!1,className:"layout",style:{height:"calc(100vh - 16px)"},rowHeight:35,height:window.innerHeight-16,containerPadding:[0,0],layout:[{i:"a",x:0,y:0,w:7,h:3}],cols:12,children:[Object(o.jsx)(P.a,{"data-grid":{w:7,h:3,x:0,y:0},children:"a"},"a"),Object(o.jsx)(P.a,{"data-grid":{w:5,h:parseInt(window.innerHeight/35)-8,x:8,y:5},children:"b"},"b")]})})}var Ht=n(1894),Jt=n(819),Gt=n(1886),Yt=n(1892),Qt=n(394),Vt=n.n(Qt),Zt=n(520);var Xt=Object(m.connect)(null,(function(e){return{uploadFile:function(t,n){return e(gt(t,n))}}}))((function(e){var t=u.a.useState([]),n=Object(C.a)(t,2),a=n[0],r=n[1],c=u.a.useState(!1),i=Object(C.a)(c,2),s=i[0],l=i[1],d=u.a.useState({}),f=Object(C.a)(d,2),b=f[0],p=f[1],m=u.a.useCallback(function(){var e=Object(v.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t),t&&t.length>0&&r(a.concat(t.map((function(e){return{file:e,id:Object(Zt.a)()}}))));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a]),O=Object(Lt.a)({onDrop:m}),h=O.getRootProps,g=O.getInputProps,y=O.isDragActive;return Object(o.jsxs)(Z.a,{fullWidth:!0,open:e.open,onClose:e.onClose,children:[Object(o.jsx)(X.a,{children:"Upload Files"}),Object(o.jsx)(ee.a,{children:Object(o.jsxs)("div",Object(j.a)(Object(j.a)({style:{minHeight:100,maxHeight:200,overflowY:"scroll",borderRadius:7,padding:8,border:"1px dashed ".concat(y?"blue":"gray")}},h()),{},{children:[Object(o.jsx)("input",Object(j.a)({},g())),Object(o.jsx)(J.a,{children:a.length>0?a.map((function(e,t){return Object(o.jsxs)(S.a,{style:{display:"flex",justifyContent:"space-between"},children:[Object(o.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[b[e.id]&&Object(o.jsx)(Vt.a,{name:"double-bounce"}),e.file.name]}),Object(o.jsx)(D.a,{onClick:function(e){e.stopPropagation();var n=a.slice();n.splice(t,1),r(n)},children:Object(o.jsx)(Gt.a,{})})]})})):Object(o.jsxs)("div",{style:{flexDirection:"column",flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:[Object(o.jsx)(Yt.a,{style:{fontSize:44}}),Object(o.jsx)("span",{children:"Drop your files here"})]})})]}))}),Object(o.jsxs)(te.a,{children:[Object(o.jsx)(z.a,{onClick:e.onClose,children:"Cancel"}),Object(o.jsx)(z.a,{disabled:s,onClick:function(){l(!0),Ve.a.each(a,(function(t,n){var a=Object.assign({},b);a[t.id]=!0,console.log("Uploading",b),p(a),e.uploadFile(t.file,(function(){a=Object.assign({},b),console.log("Finished uploading"),a[t.id]=!1,p(a),n()}))}),(function(t){l(!1),r([]),e.onClose()}))},color:"primary",variant:"contained",children:"Upload"})]})]})})),en=n(1893),tn=n(1876),nn=n(1915),an=n(1910);function rn(e){var t=u.a.useState(""),n=Object(C.a)(t,2),a=n[0],r=n[1],c=u.a.useState([]),i=Object(C.a)(c,2),s=i[0],l=i[1];u.a.useEffect((function(){yt().then((function(e){l(e.map((function(e){return{from:e.sourceFormat,to:[e.targetFormat]}})))}))}),[]);return Object(o.jsxs)(Z.a,{fullWidth:!0,open:e.open,onClose:e.onClose,children:[Object(o.jsxs)(X.a,{children:["Convert ",e.selected&&e.selected.filename]}),Object(o.jsxs)(ee.a,{style:{display:"flex",alignItems:"center"},children:[Object(o.jsx)(U.a,{fullWidth:!0,disabled:!0,label:"From",value:e.selected&&e.selected.extension.toUpperCase()}),Object(o.jsx)(en.a,{style:{marginLeft:8,marginRight:8}}),Object(o.jsxs)(tn.a,{fullWidth:!0,children:[Object(o.jsx)(nn.a,{children:"To"}),Object(o.jsx)(an.a,{value:a,onChange:function(e){r(e.target.value)},fullWidth:!0,children:e.selected&&(s.filter((function(t){return t.from==e.selected.extension}))[0]||{to:[]}).to.map((function(e){return Object(o.jsx)(E.a,{value:e,children:e.toUpperCase()})}))})]})]}),Object(o.jsxs)(te.a,{children:[Object(o.jsx)(z.a,{onClick:e.onClose,children:"Cancel"}),Object(o.jsx)(z.a,{onClick:function(){var t,n;t=e.selected.id,n=a.toLowerCase(),xt.mutate({mutation:Object(p.gql)(mt()),variables:{fileId:t,targetFormat:n}}).then((function(e){return e.data.convertFile})),e.onClose(),r("")},color:"primary",variant:"contained",children:"Start"})]})]})}n(1746);var cn=Object(m.connect)((function(e){return{files:e.files.list}}),(function(e){return{addFile:function(t){return e(Ct(t))},getFiles:function(){return e((function(e,t){return xt.query({query:Object(p.gql)(ft())}).then((function(e){return e.data.files})).then((function(t){e({type:Oe,files:t})}))}))}}}))((function(e){var t=u.a.useState(null),n=Object(C.a)(t,2),a=n[0],r=n[1],c=u.a.useState(!1),i=Object(C.a)(c,2),l=i[0],d=i[1],j=Object(p.useMutation)(vt),f=Object(C.a)(j,2),b=f[0],m=f[1].data,O=u.a.useState(null),h=Object(C.a)(O,2),g=h[0],y=h[1],S=u.a.useState(null),k=Object(C.a)(S,2),w=k[0],D=k[1],T=Object(s.useCallback)(function(){var t=Object(v.a)(x.a.mark((function t(n){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n&&n.length>0&&(console.log(n),b({variables:{file:n[0]}}).then((function(t){t.data&&t.data.uploadFile&&!t.data.uploadFile.duplicate&&e.addFile(t.data.uploadFile.file)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[m]),E=Object(Lt.a)({onDrop:T,noClick:!0}),q=(E.getRootProps,E.getInputProps,E.isDragActive),I=u.a.useState([]),N=Object(C.a)(I,2),P=(N[0],N[1],u.a.useState(["pdf","glb","png"])),A=Object(C.a)(P,1)[0];return u.a.useEffect((function(){e.getFiles()}),[]),[Object(o.jsx)(R,{tabs:[],onTabSelect:function(e){},selectedTab:"",title:"Files"}),Object(o.jsxs)(ae,{style:{marginTop:12},type:e.type,permissions:e.permissions,children:[null!=a&&Object(o.jsx)(Ht.a,{variant:"determinate",value:a}),Object(o.jsx)(Jt.a,{open:w,file:w,onClose:function(){return D(null)}}),Object(o.jsx)(rn,{open:g,selected:g,onClose:function(){return y(null)}}),Object(o.jsx)(Xt,{open:l,onClose:function(){return d(!1)}}),Object(o.jsxs)("div",{className:q?"file-list selected":"file-list",children:[Object(o.jsx)(ne.a,{color:"primary",onClick:function(){return d(!0)},style:{zIndex:12,position:"absolute",right:12,bottom:12},children:Object(o.jsx)(Y.a,{})}),Object(o.jsx)(jt.a,{onDownloadProgress:function(e){r(e)},onDownloadEnd:function(){return r(null)},onFileOpen:function(e){A.indexOf(e.extension)>-1&&D({filename:e.name,cid:e.cid,extension:e.extension})},files:e.files})]})]})]}));function on(){var e=Object(re.a)(["\n            query GetBookings{\n                calendar{\n                    id\n                    startTime\n                    endTime\n                    allDay\n                    date\n                    project {\n                        id\n                        name\n                    }\n                    items {\n                        equipment{\n                            name\n                        }\n                        team {\n                            name\n\n                        }\n                    }\n                }\n            }\n        "]);return on=function(){return e},e}function sn(){var e=Object(re.a)(["\n    mutation AddBooking($time: CalendarInput, $projectId: ID, $booking: BookingInput){\n        addBooking(time: $time, projectId: $projectId, booking: $booking){\n            id\n            startTime\n            endTime\n            allDay\n            date\n            project {\n                id \n                name\n            }\n            items {\n                equipment {\n                    name\n                }\n                team {\n                    name\n                }\n            }\n        }\n    }\n  "]);return sn=function(){return e},e}var un,ln=Ee(),dn=n(1895),jn=n(1896);var fn,bn=Object(m.connect)((function(e){return{projects:e.projects.list,team:e.team.list,equipment:e.equipment.list}}),(function(e){return{addBooking:function(t,n,a){return e(function(e,t,n){return function(a){ln.mutate({mutation:Object(p.gql)(sn()),variables:{time:e,projectId:t,booking:n}}).then((function(e){return e.data.addBooking})).then((function(e){a({type:xe,booking:e})}))}}(t,n,a))},setStatus:function(t){return e(st(t))}}}))((function(e){var t=u.a.useContext(M).ydoc,n=u.a.useState(0),a=Object(C.a)(n,2),r=a[0],c=a[1],i=u.a.useState(0),s=Object(C.a)(i,2),l=s[0],d=s[1],f=u.a.useState(null),b=Object(C.a)(f,2),p=b[0],m=b[1],O=u.a.useState(null),h=Object(C.a)(O,2),x=h[0],v=h[1],k=u.a.useState(!1),w=Object(C.a)(k,2),D=w[0],T=w[1],E=u.a.useState(null),q=Object(C.a)(E,2),I=q[0],N=q[1],P=u.a.useState(null),F=Object(C.a)(P,2),L=F[0],R=F[1],B=u.a.useState(null),$=Object(C.a)(B,2),K=$[0],G=$[1],Y=u.a.useState({}),ne=Object(C.a)(Y,2),ae=ne[0],re=ne[1];return u.a.useEffect((function(){un=t.getMap("calendar")}),[]),Object(o.jsxs)(Z.a,{fullWidth:!0,open:e.open,onClose:e.onClose,children:[Object(o.jsx)(X.a,{children:function(){switch(r){case 1:return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(U.a,{value:p,onChange:function(e){return m(e.target.value)},fullWidth:!0,InputProps:{startAdornment:Object(o.jsx)(W.a,{position:"start",children:Object(o.jsx)(_.a,{})})},label:"Search"}),Object(o.jsxs)(g.a,{value:l,onChange:function(e,t){t!==l&&m(""),d(t)},children:[Object(o.jsx)(y.a,{label:"Team"}),Object(o.jsx)(y.a,{label:"Equipment"})]}),Object(o.jsx)(H.a,{})]});case 0:return"Create a booking";default:return null}}()}),Object(o.jsx)(ee.a,{style:{display:"flex",flexDirection:"column",minHeight:250},children:function(){switch(r){case 0:return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(_e.a,{value:K,onChange:function(e,t){return G(t)},options:e.projects,getOptionLabel:function(e){return e.name},renderInput:function(e){return Object(o.jsx)(U.a,Object(j.a)(Object(j.a)({},e),{},{label:"Project"}))}}),Object(o.jsx)(dn.a,{value:x,format:"DD/MM/yyyy",onChange:function(e,t){return v(e)},margin:"normal",label:"Date",variant:"inline"}),Object(o.jsx)(Q.a,{control:Object(o.jsx)(V.a,{checked:D,onChange:function(e){T(e.target.checked)}}),label:"All day"}),!D&&Object(o.jsxs)("div",{style:{display:"flex",marginTop:8},children:[Object(o.jsx)(jn.a,{value:I,onChange:function(e){return N(e)},label:"Start Time",fullWidth:!0,style:{marginRight:4},variant:"inline"}),Object(o.jsx)(jn.a,{value:L,onChange:function(e){return R(e)},label:"End Time",fullWidth:!0,style:{marginLeft:4},variant:"inline"})]})]});case 1:return Object(o.jsx)(J.a,{children:(0==l?e.team:e.equipment).filter((function(e){return!p||e.name.toLowerCase().indexOf(p.toLowerCase())>-1})).map((function(e){return Object(o.jsxs)(S.a,{children:[Object(o.jsx)(V.a,{checked:ae[e.id]&&ae[e.id].selected||!1,onChange:function(t){var n=Object.assign({},ae);n[e.id]={selected:t.target.checked,type:0==l?"team":"equipment"},console.log(n),re(n)}}),e.name]})}))});default:return null}}()}),Object(o.jsxs)(te.a,{children:[Object(o.jsx)(z.a,{onClick:"0"==r?e.onClose:function(){return c(0)},children:"0"==r?"Cancel":"Back"}),Object(o.jsx)(z.a,{color:"primary",onClick:function(){if(0==r)c(1);else{var t,n,a=[],i=[];for(var o in ae)if(ae[o].selected)switch(ae[o].type){case"team":i.push(o);break;case"equipment":a.push(o)}I&&((t=Xe()(x)).set("hour",I.get("hour")),t.set("minute",I.get("minute"))),L&&((n=Xe()(x)).set("hour",L.get("hour")),n.set("minute",L.get("minute")));var s=new A.b,u={date:x.valueOf()/1e3,project:K,startTime:t&&parseInt(t.valueOf()/1e3),endTime:n&&parseInt(n.valueOf()/1e3),allDay:D,items:{team:i,equipment:a}};if(s.set("date",u.date),s.set("project",u.project),un){console.log("Inserting into yjs");var l=un.toJSON().bookings||[];console.log(l),l.push(u),un.set("bookings",l),console.log(un.toJSON())}e.onClose()}},variant:"contained",children:"1"==r?"Book":"Next"})]})]})})),pn=(n(1747),Object(ut.b)(Xe.a));var mn=Object(m.connect)((function(e){return{bookings:e.calendar.bookings}}),(function(e){return{getBookings:function(){return e((function(e,t){ln.query({query:Object(p.gql)(on())}).then((function(e){return e.data.calendar})).then((function(t){console.log(t),e({type:he,bookings:t})}))}))},setStatus:function(t){return e(st(t))}}}))((function(e){var t=u.a.useContext(M).ydoc,n=u.a.useState(!1),a=Object(C.a)(n,2),r=a[0],c=a[1],i=u.a.useState([]),s=Object(C.a)(i,2),l=s[0],d=s[1],j=function(){var e=fn.toJSON();e.bookings&&e.bookings.length>0&&d(e.bookings)};return u.a.useEffect((function(){(fn=t.getMap("calendar")).observe(j);var e=fn.toJSON();e.bookings&&e.bookings.length>0&&d(e.bookings)}),[]),[Object(o.jsx)(R,{tabs:["All","Me","Projects"],selectedTab:"",onTabSelect:function(t){e.history.push("".concat(e.match.url,"/").concat(t.toLowerCase()))},title:"Calendar"}),Object(o.jsx)(bn,{y:fn,open:r,onClose:function(){return c(!1)}}),Object(o.jsxs)(P.a,{style:{position:"relative",marginTop:12,height:"calc(100vh - 84px)",flex:1,display:"flex",flexDirection:"column",padding:4},children:[Object(o.jsx)(ne.a,{onClick:function(){return c(!0)},color:"primary",style:{zIndex:9,position:"absolute",right:12,bottom:12},children:Object(o.jsx)(Y.a,{})}),Object(o.jsx)(ut.a,{localizer:pn,events:l.map((function(e){return{id:e.id,title:e.project.name,allDay:e.allDay,start:new Date(1e3*(e.startTime||e.date)),end:new Date(1e3*(e.endTime||e.date))}})),startAccessor:"start",endAccessor:"end",style:{flex:1}})]})]}));function On(e){var t=u.a.useState([]),n=Object(C.a)(t,2),a=n[0],r=n[1];u.a.useEffect((function(){yt().then((function(e){console.log(e),r(e)}))}),[]);return Object(o.jsxs)(P.a,{style:{flex:1,marginTop:12},children:[Object(o.jsxs)("div",{style:{display:"flex",flexDirection:"column",padding:8},children:[Object(o.jsx)(k.a,{variant:"h6",style:{display:"flex"},children:"Add-ons"}),Object(o.jsx)(J.a,{children:a.map((function(e){return Object(o.jsxs)(S.a,{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.name,e.installed?Object(o.jsx)(k.a,{children:"Installed"}):Object(o.jsx)(z.a,{onClick:function(){var t;t=e.id,xt.mutate({mutation:Object(p.gql)(bt()),variables:{converterId:t}})},color:"primary",variant:"contained",children:"Install"})]})}))})]}),Object(o.jsx)(H.a,{}),Object(o.jsxs)("div",{style:{display:"flex",flexDirection:"column",padding:8},children:[Object(o.jsx)(k.a,{variant:"h6",style:{display:"flex"},children:"Connections"}),Object(o.jsx)(J.a,{children:[{name:"MSSQL Server"}].map((function(e){return Object(o.jsx)(S.a,{button:!0,children:e.name})}))})]}),Object(o.jsx)(H.a,{})]})}var hn=n(1897),xn=n(1898),vn=n(1899),gn=n(1900),yn=n(1901),Cn=n(1902);function Sn(){var e=Object(re.a)(["\n        query GetTeam {\n          team {\n            id\n            status\n            name\n            username\n            password\n            phoneNumber\n            email\n            admin\n          }\n        }\n      "]);return Sn=function(){return e},e}function kn(){var e=Object(re.a)(["\n        mutation RemoveMember($memberId: ID){\n          removeTeamMember(memberId: $memberId)\n        }\n      "]);return kn=function(){return e},e}function wn(){var e=Object(re.a)(["\n  mutation UpdateTeam($memberId: String, $member: TeamMemberInput){\n    updateTeamMember(memberId: $memberId, member: $member){\n      name\n      email\n      phoneNumber\n      admin\n    }\n  }\n"]);return wn=function(){return e},e}function Dn(){var e=Object(re.a)(["\n  mutation AddTeamMember($member: TeamMemberInput){\n    addTeamMember(member: $member){\n      id\n      name\n      username\n      email\n      status\n      phoneNumber\n      admin\n    }\n  }\n"]);return Dn=function(){return e},e}var Tn=Ee();n(1748);var En=Object(m.connect)((function(e){return{user:Object(I.a)(e.auth.token),team:e.team.list,type:e.dashboard.types.filter((function(e){return"Team Members"==e.name})),permissions:e.dashboard.permissions.filter((function(e){return"Team Members"==e.type}))}}),(function(e){return{getTeam:function(){return e((function(e){return Tn.query({query:Object(p.gql)(Sn())}).then((function(e){return e.data.team})).then((function(t){e({type:ue,team:t})}))}))},addTeamMember:function(t){return e(function(e){return function(t){Tn.mutate({mutation:Object(p.gql)(Dn()),variables:{member:e}}).then((function(e){return e.data.addTeamMember})).then((function(e){t({type:le,newMember:e})}))}}(t))},removeTeamMember:function(t){return e(function(e){return function(t,n){return Tn.mutate({mutation:Object(p.gql)(kn()),variables:{memberId:e}}).then((function(e){return e.data.removeTeamMember})).then((function(n){t({type:de,id:e})}))}}(t))},updateTeamMember:function(t,n){return e(function(e,t){return function(n){Tn.mutate({mutation:Object(p.gql)(wn()),variables:{memberId:e,member:t}}).then((function(e){return e.data.updateTeamMember})).then((function(a){n({type:je,member:t,id:e})}))}}(t,n))}}}))((function(e){var t=u.a.useState(null),n=Object(C.a)(t,2),a=n[0],r=n[1];return u.a.useEffect((function(){e.getTeam()}),[]),console.log(e.user),[Object(o.jsx)(R,{tabs:[],onTabSelect:function(e){},selectedTab:"",title:"Team"}),Object(o.jsx)(ae,{onSave:function(t){if(t.id){var n=Object.assign({},t);delete n.id,e.updateTeamMember(t.id,n)}else e.addTeamMember(t)},onClose:function(){return r(null)},selected:a,type:e.type,permissions:e.permissions,children:Object(o.jsx)(G,{filter:function(e,t){return e.name.indexOf(t)>-1},data:e.team,renderItem:function(t){return Object(o.jsxs)("div",{className:"team-item",children:[Object(o.jsxs)(S.a,{button:!0,children:["pending"==t.status?Object(o.jsx)(hn.a,{}):t.admin?Object(o.jsx)(xn.a,{}):Object(o.jsx)(vn.a,{}),Object(o.jsx)(k.a,{style:{marginLeft:12},children:t.name})]}),Object(o.jsx)(q,{menu:[].concat("pending"==t.status?[{icon:Object(o.jsx)(gn.a,{}),label:"Share Signup",action:function(){}}]:[]).concat(e.user.admin?[{label:"Edit",icon:Object(o.jsx)(yn.a,{}),action:function(){return r(t)}},{label:"Delete",color:"red",icon:Object(o.jsx)(Cn.a,{}),action:function(){return e.removeTeamMember(t.id)}}]:[])})]})}})})]}));function qn(){var e=Object(re.a)(["\n        query GetEquipment {\n          equipment {\n            id\n            name\n            type\n            description\n          }\n        }\n      "]);return qn=function(){return e},e}function In(){var e=Object(re.a)(["\n        mutation RemoveEquipment($id: String){\n          removeEquipment(equipmentId: $id)\n        }\n      "]);return In=function(){return e},e}function Nn(){var e=Object(re.a)(["\n      mutation UpdateEquipment($equipmentId: String, $equipment: EquipmentInput){\n        updateEquipment(equipmentId: $equipmentId, equipment: $equipment){\n          name\n          type\n          description\n        }\n      }\n    "]);return Nn=function(){return e},e}function Pn(){var e=Object(re.a)(["\n  mutation AddEquipment($equipment: EquipmentInput){\n    addEquipment(equipment: $equipment){\n      id\n      name\n      type\n      description\n    }\n  }\n"]);return Pn=function(){return e},e}var An=Ee();n(1749);var Fn=Object(m.connect)((function(e){return{user:Object(I.a)(e.auth.token),equipment:e.equipment.list,type:e.dashboard.types.filter((function(e){return"Equipment"==e.name})),permissions:e.dashboard.permissions.filter((function(e){return"Equipment"==e.type}))}}),(function(e){return{getEquipment:function(){return e((function(e){return An.query({query:Object(p.gql)(qn())}).then((function(e){return e.data.equipment})).then((function(t){e({type:fe,equipment:t})}))}))},addEquipment:function(t){return e(function(e){return function(t){An.mutate({mutation:Object(p.gql)(Pn()),variables:{equipment:e}}).then((function(e){return e.data.addEquipment})).then((function(e){t({type:be,newItem:e})}))}}(t))},updateEquipment:function(t,n){return e(function(e,t){return console.log(e,t),function(n){return An.mutate({mutation:Object(p.gql)(Nn()),variables:{equipmentId:e,equipment:t}}).then((function(e){return e.data.updateEquipment})).then((function(a){n({type:pe,equipment:t,id:e})}))}}(t,n))},removeEquipment:function(t){return e(function(e){return function(t){return An.mutate({mutation:Object(p.gql)(In()),variables:{id:e}}).then((function(e){return e.data.removeEquipment})).then((function(n){t({type:me,id:e})}))}}(t))}}}))((function(e){var t=u.a.useState(""),n=Object(C.a)(t,2),a=n[0],r=n[1],c=u.a.useState(null),i=Object(C.a)(c,2),s=i[0],l=i[1];return u.a.useEffect((function(){e.getEquipment()}),[]),[Object(o.jsx)(R,{tabs:Object(O.a)(new Set(e.equipment.filter((function(e){return e.type})).map((function(e){return e.type})))),onTabSelect:function(e){r(e)},selectedTab:a,title:"Equipment"}),Object(o.jsx)(ae,{onSave:function(t){if(t.id){var n=Object.assign({},t);console.log(t),delete n.id,e.updateEquipment(t.id,n)}else e.addEquipment(t)},onClose:function(){return l(null)},selected:s,type:e.type,permissions:e.permissions,children:Object(o.jsx)(G,{filter:function(e,t){return e.name.indexOf(t)>-1},data:e.equipment.filter((function(e){return!a||e.type==a})),renderItem:function(t){return Object(o.jsxs)("div",{className:"equipment-item",children:[Object(o.jsx)(S.a,{button:!0,onClick:function(e){},children:Object(o.jsx)(k.a,{variant:"subtitle1",style:{flex:1},children:t.name})}),Object(o.jsx)(q,{menu:[].concat(e.user.admin?[{label:"Edit",action:function(){return l(t)}},{label:"Delete",color:"red",action:function(){return e.removeEquipment(t.id)}}]:[])})]})}})})]})),Mn=n(823),Ln=n.n(Mn),Rn="typeDef",_n=Object(Re.e)((function(e){return Object(o.jsx)("div",{style:{flex:1},children:Object(o.jsx)(Ln.a,{src:e.node.data.typedef})})})),Bn=Object(Re.e)((function(e){return Object(o.jsx)(Re.c,Object(j.a)(Object(j.a)({},e),{},{children:Object(o.jsx)("div",{style:{padding:8},className:"type-def",children:e.id&&e.data.label||"Type Def"})}))})),$n="mssqlAdapter",Un=Object(Re.e)((function(e){var t=u.a.useState([]),n=Object(C.a)(t,2),a=n[0],r=n[1],c=u.a.useState(null),i=Object(C.a)(c,2),s=(i[0],i[1],u.a.useState([])),l=Object(C.a)(s,2);l[0],l[1];u.a.useEffect((function(){var e=d();Ye(e.id).then((function(e){r(e)})),console.log(d())}),[]);var d=function(){var t=e.editor.links.filter((function(t){return t.source==e.node.id}));if(t&&t.length>0){var n=t.map((function(t){return e.editor.nodes.filter((function(e){return e.id==t.target}))[0]}));if(n&&n.length>0)return n[0]}};return Object(o.jsxs)("div",{style:{display:"flex",flex:1,flexDirection:"column"},children:[Object(o.jsx)(U.a,{disabled:!0,error:!d(),label:"Connection Name",value:d().data.label}),Object(o.jsx)(_e.a,{value:e.node.data.table,onChange:function(t,n){console.log(t,n),n&&n.name&&(e.editor.updateNode(e.node.id,(function(e){return e.data.table=n,e})),Qe(d().id,n.name).then((function(t){console.log("Searching for cols",n.name,t),e.editor.updateNode(e.node.id,(function(e){return e.data.availableColumns=t,e.data.provides={},e}))})))},options:a,getOptionLabel:function(e){return e.name},autoHighlight:!0,renderInput:function(e){return Object(o.jsx)(U.a,Object(j.a)(Object(j.a)({},e),{},{margin:"normal",label:"Table"}))}}),Object(o.jsx)("div",{style:{marginTop:8},children:function(){var t=e.editor.links.filter((function(t){return t.target==e.node.id}));if(t&&t.length>0){var n=t.map((function(t){return e.editor.nodes.filter((function(e){return e.id==t.source}))[0]}));if(n&&n.length>0){var a=n[0].data.typedef,r=[],c=function(){var t=i;r.push(Object(o.jsxs)("div",{style:{marginTop:4,display:"flex",alignItems:"center"},children:[Object(o.jsx)("div",{style:{width:100},children:i}),":",Object(o.jsx)("select",{value:e.node&&e.node.data&&e.node.data.provides&&e.node.data.provides[i],onChange:function(n){e.editor.updateNode(e.node.id,(function(e){return e.data.provides||(e.data.provides={}),console.log(n.target.value," provides ",t),e.data.provides[t]=n.target.value,e}))},children:(e.node.data.availableColumns||[]).concat([{name:"N/A"}]).map((function(e){return Object(o.jsx)("option",{value:e.name,children:e.name})}))})]}))};for(var i in a)c();return r}}}()})]})})),Wn=Object(Re.e)((function(e){return Object(o.jsx)(Re.c,Object(j.a)(Object(j.a)({},e),{},{children:Object(o.jsxs)("div",{style:{padding:8},className:"mssql-adapter",children:[Object(o.jsx)("div",{className:"adapter-header",children:e.id&&e.data.label||"MSSQL Adapter"}),Object(o.jsx)("div",{className:"adapter-info",children:e.id&&e.data&&e.data.table&&e.data.table.name})]})}))})),Kn="mssql server",zn=Object(Re.e)((function(e){return Object(o.jsxs)("div",{style:{display:"flex",flex:1,flexDirection:"column"},children:[Object(o.jsx)(U.a,{label:"Connection Name",value:e.node.data.label,onChange:function(t){e.editor.updateNode(e.node.id,(function(e){return e.data.label=t.target.value,e}))}}),Object(o.jsx)(U.a,{label:"Host IP:Host Port",value:e.node.data.host,onChange:function(t){e.editor.updateNode(e.node.id,(function(e){return e.data.host=t.target.value,e}))}}),Object(o.jsx)(U.a,{label:"Database Name",value:e.node.data.db,onChange:function(t){e.editor.updateNode(e.node.id,(function(e){return e.data.db=t.target.value,e}))}}),Object(o.jsx)(U.a,{label:"Username",value:e.node.data.username,onChange:function(t){e.editor.updateNode(e.node.id,(function(e){return e.data.username=t.target.value,e}))}}),Object(o.jsx)(U.a,{label:"Password",type:"password",value:e.node.data.password,onChange:function(t){e.editor.updateNode(e.node.id,(function(e){return e.data.password=t.target.value,e}))}})]})})),Hn=Object(Re.e)((function(e){return Object(o.jsx)(Re.c,Object(j.a)(Object(j.a)({},e),{},{children:Object(o.jsx)("div",{style:{padding:8},className:"mssql-adapter",children:e.id&&e.data.label||"MSSQL Server"})}))}));n(1750),n(1751);var Jn=Object(m.connect)((function(e){return{types:(e.dashboard.types||[]).map((function(e,t){return{id:e.name.toLowerCase(),type:"typeDef",data:{label:e.name,typedef:e.typeDef},position:{x:200+200*t,y:300},draggable:!1}}))}}),(function(e){return{getTypes:function(){return e(Ge())}}}))((function(e){u.a.useEffect((function(){e.getTypes()}),[]);var t=Object(p.useMutation)(Je),n=Object(C.a)(t,2),a=n[0],s=(n[1].data,u.a.useState([])),l=Object(C.a)(s,2),d=l[0],j=l[1],f=u.a.useState([]),b=Object(C.a)(f,2),m=b[0],O=b[1];return u.a.useEffect((function(){He.query({query:Object(p.gql)(We())}).then((function(e){return e.data.integrationMap})).then((function(e){e.nodes&&j(e.nodes.map((function(e){var t=Object(we.cloneDeep)(e);return delete t.__typename,delete t.position.__typename,t})).slice()),e.links&&O(e.links.map((function(e){var t=Object(we.cloneDeep)(e);return delete t.__typename,t})).slice())}))}),[]),Object(o.jsx)("div",{className:"admin-view",children:Object(o.jsxs)(Re.a,{store:{nodes:(e.types||[]).concat(d),links:m,statusColors:{},exploreNode:function(){},onNodeAdd:function(){},onLinkAdd:function(){},onNodeUpdate:function(){},onNodeRemove:function(){},onLinkRemove:function(){},nodeTypes:[r,c,i]},children:[Object(o.jsx)(Re.b,{}),Object(o.jsx)(Re.d,{onNodeChange:function(t){var n=t.filter((function(t){return e.types.map((function(e){return e.id})).indexOf(t.id)<0}));a({variables:{nodes:n,links:m}}),j(n)},onLinkChange:function(e){a({variables:{nodes:d,links:e}}),O(e)}})]})})})),Gn=(n(395),n(1917)),Yn=n(1903),Qn=n(1904),Vn=n(1905),Zn=n(1906),Xn=n(1907);var ea=Object(b.g)((function(e){var t=[{icon:Object(o.jsx)(kt.a,{}),label:"Dashboard",path:""},{icon:Object(o.jsx)(Yn.a,{}),label:"Calendar",path:"/calendar"},{icon:Object(o.jsx)(Qn.a,{}),label:"Projects",path:"/projects"},{icon:Object(o.jsx)(xn.a,{}),label:"Team",path:"/team"},{icon:Object(o.jsx)(Vn.a,{}),label:"Equipment",path:"/equipment"},{icon:Object(o.jsx)(Zn.a,{}),label:"Files",path:"/files"}];return Object(o.jsxs)(Gn.a,{variant:"permanent",style:{width:200},children:[Object(o.jsxs)(J.a,{style:{flex:1,width:200},children:[Object(o.jsxs)(S.a,{style:{color:"teal",padding:12,fontSize:20},children:[Object(o.jsx)("img",{src:"/assets/teal.png",style:{height:33,marginRight:8}})," WorkHub"]}),Object(o.jsx)(H.a,{}),t.map((function(n,a){return Object(o.jsxs)(S.a,{className:t.map((function(e){return e.path})).indexOf(window.location.pathname.split(e.match.url)[1])==a?"selected menu-item":"menu-item",onClick:function(){return e.history.push("".concat(e.match.url).concat(n.path))},button:!0,children:[n.icon," ",n.label]})}))]}),Object(o.jsx)(H.a,{}),Object(o.jsxs)(S.a,{button:!0,onClick:function(){return e.history.push("".concat(e.match.url,"/settings"))},children:[Object(o.jsx)(Xn.a,{style:{marginRight:12}}),"Settings"]})]})})),ta=n(277);n(1752);var na=Object(m.connect)((function(e){return{projects:e.projects.list,user:Object(I.a)(e.auth.token),swarmKey:e.auth.swarmKey}}),(function(e){return{getTypes:function(){return e(Ge())},getPermissions:function(){return e((function(e){return He.query({query:Object(p.gql)(Ke())}).then((function(e){return e.data.typePermissions})).then((function(t){console.log(t),e({type:ke,perms:t})}))}))},setStatus:function(t){return e(st(t))}}}))((function(e){return Me.a.parse(e.location.search,{ignoreQueryPrefix:!0}),window.location.pathname.replace(/\/dashboard/g,""),console.log(e.swarmKey),u.a.useEffect(Object(v.a)(x.a.mark((function t(){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.getTypes(),e.getPermissions();case 2:case"end":return t.stop()}}),t)}))),[]),Object(o.jsx)(ta.a,{swarmKey:e.swarmKey,children:Object(o.jsx)(L,{children:Object(o.jsxs)("div",{className:"dashapp",children:[Object(o.jsx)(ea,{match:e.match}),Object(o.jsx)("div",{className:"dashapp-body",children:Object(o.jsxs)(b.d,{children:[Object(o.jsx)(b.b,{path:"".concat(e.match.url),exact:!0,component:zt}),Object(o.jsx)(b.b,{path:"".concat(e.match.url,"/calendar"),render:function(e){return Object(o.jsx)(mn,Object(j.a)({},e))}}),Object(o.jsx)(b.b,{path:"".concat(e.match.url,"/projects"),component:Le,exact:!0}),Object(o.jsx)(b.b,{path:"".concat(e.match.url,"/projects/:id"),render:function(e){return Object(o.jsx)($t,Object(j.a)({},e))}}),Object(o.jsx)(b.b,{path:"".concat(e.match.url,"/files"),render:function(e){return Object(o.jsx)(cn,Object(j.a)({},e))}}),Object(o.jsx)(b.b,{path:"".concat(e.match.url,"/team"),component:En}),Object(o.jsx)(b.b,{path:"".concat(e.match.url,"/equipment"),component:Fn}),Object(o.jsx)(b.b,{path:"".concat(e.match.url,"/settings"),component:On}),Object(o.jsx)(b.b,{path:"".concat(e.match.url,"/admin"),component:Jn})]})})]})})})}));n(1753);var aa,ra=Object(m.connect)(null,(function(e){return{setToken:function(t){return e(function(e){return function(t){t({type:ve,token:e})}}(t))},getNodeConf:function(){return e((function(e){return it.mutate({mutation:Object(p.gql)(at())}).then((function(e){return e.data.connectNode})).then((function(t){e({type:ye,swarmKey:t.swarmKey})}))}))}}}))((function(e){var t=u.a.useState({}),n=Object(C.a)(t,2),a=n[0],r=n[1],c=u.a.useState(null),i=Object(C.a)(c,2),s=i[0],l=i[1],d=u.a.useState(""),j=Object(C.a)(d,2),f=j[0],b=j[1],m=u.a.useState(""),O=Object(C.a)(m,2),h=O[0],x=O[1],v=Object(p.useMutation)(ot),g=Object(C.a)(v,1)[0],y=function(){g({variables:{username:f,password:h}}).then((function(t){t.data.login&&t.data.login.token?(e.getNodeConf(),e.setToken(t.data.login.token),e.history.push("/dashboard")):t.data.login&&t.data.login.error&&l(t.data.login.error)}))};return u.a.useEffect((function(){fetch("https://zenquotes.io/api/today").then((function(e){return e.json()})).then((function(e){r(e)}))})),Object(o.jsxs)("div",{className:"login-view",children:[Object(o.jsx)("div",{className:"image-banner",children:Object(o.jsxs)("div",{className:"quotes",children:[Object(o.jsx)("span",{children:a.q}),Object(o.jsx)("span",{children:a.a})]})}),Object(o.jsxs)(P.a,{style:{display:"flex",flex:.3,flexDirection:"column",padding:8},children:[Object(o.jsxs)("div",{style:{display:"flex",alignItems:"center",paddingBottom:8},children:[Object(o.jsx)("img",{style:{height:70,marginRight:12},src:"/assets/teal.png"}),Object(o.jsx)(k.a,{style:{color:"teal"},variant:"h4",children:"WorkHub"})]}),Object(o.jsx)(H.a,{style:{marginBottom:22}}),Object(o.jsx)(U.a,{error:s,label:"Username",value:f,onChange:function(e){return b(e.target.value)}}),Object(o.jsx)(U.a,{error:s,label:"Password",type:"password",value:h,onKeyDown:function(e){13==e.keyCode&&y()},onChange:function(e){return x(e.target.value)}}),Object(o.jsx)(z.a,{onClick:y,style:{marginTop:33},color:"primary",variant:"contained",children:"Login"})]})]})})),ca=n(824),ia=n(825),oa=n(87),sa=n(93),ua=n(324),la=n(533),da=n(826),ja=n.n(da),fa={list:[]};var ba={permissions:[],types:[]};var pa={list:[]};var ma={token:null,status:"disconnected",swarmKey:null};var Oa,ha={list:[]};var xa,va,ga={list:[]};var ya={bookings:[]};var Ca=Object(sa.d)({projects:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fa,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case ce:return Object(j.a)(Object(j.a)({},e),{},{list:t.projects});case oe:var n=(aa=e.list.slice()).map((function(e){return e.id})).indexOf(t.id);return aa.splice(n,1),Object(j.a)(Object(j.a)({},e),{},{list:aa});case ie:return Object(j.a)(Object(j.a)({},e),{},{list:e.list.concat([t.newProject])});case se:var a=(aa=e.list.slice()).map((function(e){return e.id})).indexOf(t.id);return aa[a]=Object(j.a)(Object(j.a)({},aa[a]),t.project),Object(j.a)(Object(j.a)({},e),{},{list:aa});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ma,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case ve:return Object(j.a)(Object(j.a)({},e),{},{token:t.token});case ye:return Object(j.a)(Object(j.a)({},e),{},{swarmKey:t.swarmKey});case ge:return Object(j.a)(Object(j.a)({},e),{},{status:t.status});default:return e}},files:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pa,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case Oe:return Object(j.a)(Object(j.a)({},e),{},{list:t.files});case Ce:return Object(j.a)(Object(j.a)({},e),{},{list:e.list.concat([t.file])});default:return e}},calendar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ya,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case he:return Object(j.a)(Object(j.a)({},e),{},{bookings:t.bookings});case xe:return Object(j.a)(Object(j.a)({},e),{},{bookings:e.bookings.concat([t.booking])});default:return e}},dashboard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ba,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case ke:return Object(j.a)(Object(j.a)({},e),{},{permissions:t.perms});case Se:return Object(j.a)(Object(j.a)({},e),{},{types:t.types});default:return e}},equipment:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ha,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case fe:return Object(j.a)(Object(j.a)({},e),{},{list:t.equipment});case be:return Object(j.a)(Object(j.a)({},e),{},{list:e.list.concat([t.newItem])});case pe:var n=(Oa=e.list.slice()).map((function(e){return e.id})).indexOf(t.id);return Oa[n]=Object(j.a)(Object(j.a)({},Oa[n]),t.equipment),Object(j.a)(Object(j.a)({},e),{},{list:Oa});case me:var a=(Oa=e.list.slice()).map((function(e){return e.id})).indexOf(t.id);return Oa.splice(a,1),Object(j.a)(Object(j.a)({},e),{},{list:Oa});default:return e}},team:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ga,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case ue:return Object(j.a)(Object(j.a)({},e),{},{list:t.team});case le:return Object(j.a)(Object(j.a)({},e),{},{list:e.list.concat([t.newMember])});case je:return xa=e.list.slice(),va=xa.map((function(e){return e.id})).indexOf(t.id),xa[va]=Object(j.a)(Object(j.a)({},xa[va]),t.member),Object(j.a)(Object(j.a)({},e),{},{list:xa});case de:return xa=e.list.slice(),va=xa.map((function(e){return e.id})).indexOf(t.id),xa.splice(va,1),Object(j.a)(Object(j.a)({},e),{},{list:xa});default:return e}}}),Sa={key:"root",storage:ja.a},ka=Object(la.a)(Sa,Ca),wa=(n(1756),function(){var e=Object(sa.f)(ka,Object(sa.b)(ua.a));return{store:e,persistor:Object(la.b)(e)}}()),Da=wa.store,Ta=wa.persistor,Ea=Ee();var qa=function(){return Object(o.jsx)(oa.a,{utils:ia.a,children:Object(o.jsx)(m.Provider,{store:Da,children:Object(o.jsx)(p.ApolloProvider,{client:Ea,children:Object(o.jsx)(f.a,{children:Object(o.jsx)(ca.a,{loading:null,persistor:Ta,children:Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)(b.b,{path:"/",exact:!0,component:ra}),Object(o.jsx)(b.b,{path:"/dashboard",render:function(e){return Da.getState().auth.token?Object(o.jsx)(na,Object(j.a)({},e)):Object(o.jsx)(b.a,{to:"/"})}})]})})})})})})},Ia=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1919)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))},Na=n(286),Pa=n(122),Aa=n(827);Object(Pa.setChonkyDefaults)({iconComponent:Aa.ChonkyIconFA}),Na.c.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(Na.c.version,"/pdf.worker.js"),d.a.render(Object(o.jsx)(u.a.StrictMode,{children:Object(o.jsx)(qa,{})}),document.getElementById("root")),Ia()},277:function(e,t,n){"use strict";n.d(t,"b",(function(){return O})),n.d(t,"a",(function(){return h}));var a=n(3),r=n.n(a),c=n(74),i=n(12),o=n(811),s=n(2),u=n(0),l=n.n(u),d=n(395),j=n.n(d),f=n(812),b=n(813),p=n(384),m=l.a.createContext({}),O=Object(p.withContext)(m,"ipfs"),h=function(e){var t=l.a.useState(!1),n=Object(i.a)(t,2),a=n[0],u=n[1],d=l.a.useState(null),p=Object(i.a)(d,2),O=p[0],h=p[1],x="thetechcompany.workhub.services";return l.a.useEffect((function(){function t(){return(t=Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=O,!O){t.next=5;break}console.info("=> IPFS Already Started"),t.next=21;break;case 5:return console.time("IPFS Started"),t.prev=6,t.next=9,j.a.create({repo:"workhub",config:{Addresses:{Swarm:["/dns4/".concat(x,"/tcp/6969/ws/p2p-webrtc-star")]}},relay:{enabled:!0,hop:{enabled:!0}},libp2p:Object(b.a)(Object(f.a)(e.swarmKey))});case 9:return n=t.sent,t.t0=console,t.next=13,n.id();case 13:t.t1=t.sent,t.t0.log.call(t.t0,t.t1),t.next=20;break;case 17:t.prev=17,t.t2=t.catch(6),console.error(t.t2);case 20:console.timeEnd("IPFS Started");case 21:h(n),u(null!=n);case 23:case"end":return t.stop()}}),t,null,[[6,17]])})))).apply(this,arguments)}return e.swarmKey&&function(){t.apply(this,arguments)}(),function(){O&&O.stop&&(console.log("Stopping IPFS"),O.stop().catch((function(e){return console.error(e)})),Object(o.a)("ipfs"),O=null)}}),[e.swarmKey]),Object(s.jsx)(m.Provider,{value:{node:O,isReady:a},children:e.children})}},388:function(e,t,n){"use strict";(function(e){var a=n(3),r=n.n(a),c=n(74),i=n(14),o=n(12),s=n(103),u=n(2),l=n(0),d=n.n(l),j=n(122),f=(n(988),n(809)),b=n(520),p=n(810),m=n.n(p),O=n(177),h=n(394),x=n.n(h),v=n(277),g=(n(34),n(273)),y=n(815),C=n(816),S=n.n(C);n(1716);t.a=Object(v.b)((function(t){var n=d.a.useState([]),a=Object(o.a)(n,2),l=a[0],p=a[1],h=d.a.useState(!1),v=Object(o.a)(h,2),C=v[0],k=v[1],w=d.a.useState([{id:"default",name:t.title||"File Storage",isDir:!0}]),D=Object(o.a)(w,2),T=D[0];D[1],d.a.useMemo((function(){return[j.ChonkyActions.CreateFolder,j.ChonkyActions.DeleteFiles]}),[]),d.a.useEffect((function(){if(t.files&&t.ipfs.isReady){var e=t.files.slice();console.log("File Browser",e.length);p(e)}}),[t.files,t.ipfs]);var E=d.a.useState([]),q=Object(o.a)(E,2),I=q[0],N=q[1];return Object(u.jsxs)("div",{className:"workhub-fs",children:[Object(u.jsx)(f.a,{open:C,onAdd:function(e){return N(I.concat([{id:Object(b.a)(),filename:e,isDir:!0}]))},onClose:function(){return k(!1)}}),Object(u.jsx)(j.FullFileBrowser,{fileActions:[j.ChonkyActions.CreateFolder,j.ChonkyActions.UploadFiles,j.ChonkyActions.DownloadFiles],disableDragAndDropProvider:!0,instanceId:"workhub-fs",onFileAction:function(n){switch(n.id){case"create_folder":k(!0);break;case"open_files":n.payload.targetFile.isDir?console.log("DsIR"):t.onFileOpen&&t.onFileOpen(n.payload.targetFile);break;case"download_files":var a=n.state.selectedFiles,o=a.map((function(e){return e.size})).reduce((function(e,t){return e+t})),u=0;g.a.map(a,(function(n,a){Object(c.a)(r.a.mark((function c(){var l,d,j,f,b,p,m,O;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:l=e.from(""),d=!0,j=!1,r.prev=3,b=Object(s.a)(t.ipfs.node.cat(n.cid));case 5:return r.next=7,b.next();case 7:return p=r.sent,d=p.done,r.next=11,p.value;case 11:if(m=r.sent,d){r.next=20;break}O=m,l=e.concat([l,O]),u+=O.length,t.onDownloadProgress(u/o*100);case 17:d=!0,r.next=5;break;case 20:r.next=26;break;case 22:r.prev=22,r.t0=r.catch(3),j=!0,f=r.t0;case 26:if(r.prev=26,r.prev=27,d||null==b.return){r.next=31;break}return r.next=31,b.return();case 31:if(r.prev=31,!j){r.next=34;break}throw f;case 34:return r.finish(31);case 35:return r.finish(26);case 36:a(null,Object(i.a)(Object(i.a)({},n),{},{content:l}));case 37:case"end":return r.stop()}}),c,null,[[3,22,26,36],[27,,31,35]])})))()}),(function(e,n){if(console.log(n),t.onDownloadEnd(),1==n.length)S()(new Blob([n[0].content]),n[0].name);else{for(var a=m()(),r=0;r<n.length;r++)console.log("Add ",n[r].name,n[r].content.length),a.file(n[r].name,n[r].content,{binary:!0});a.generateAsync({type:"blob"}).then((function(e){console.log(e),Object(y.saveAs)(e,"workhub-download.zip")}))}}))}},files:(l||[]).filter((function(e){return e&&(e.filename||e.name)})).concat(I).map((function(e,t){return{id:e.id,cid:e.cid,size:e.size,ext:e.extension,extension:e.extension,isDir:e.isDir,name:e.id?e.filename:e.name}})),folderChain:T}),!t.ipfs.isReady&&Object(u.jsxs)("div",{className:"ipfs-loader",children:[Object(u.jsx)(x.a,{}),Object(u.jsx)(O.a,{variant:"h6",style:{fontWeight:"bold"},children:"Loading file network"})]})]})}))}).call(this,n(29).Buffer)},442:function(e,t){},563:function(e,t,n){},809:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(12),r=n(2),c=n(0),i=n.n(c),o=n(535),s=n(832),u=n(536),l=n(524),d=n(537),j=n(178);function f(e){var t=i.a.useState(""),n=Object(a.a)(t,2),c=n[0],f=n[1],b=function(){e.onAdd&&e.onAdd(c),f(""),e.onClose()};return Object(r.jsxs)(o.a,{open:e.open,onClose:e.onClose,children:[Object(r.jsx)(s.a,{children:"Add Folder"}),Object(r.jsx)(u.a,{children:Object(r.jsx)(l.a,{onKeyDown:function(e){13==e.keyCode&&b()},value:c,onChange:function(e){return f(e.target.value)},label:"Folder name"})}),Object(r.jsxs)(d.a,{children:[Object(r.jsx)(j.a,{onClick:e.onClick,children:"Cancel"}),Object(r.jsx)(j.a,{onClick:b,color:"primary",variant:"contained",children:"Create"})]})]})}},813:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return j}));var a=n(35),r=n(521),c=n.n(r),i=n(522),o=n(814),s=n.n(o),u=n(325),l=n.n(u),d=l.a.prototype[Symbol.toStringTag],j=function(t){return{modules:{transport:[l.a],streamMuxer:[c.a],connEncryption:[i.NOISE],connProtector:new s.a(e.from(t))},config:{transport:Object(a.a)({},d,{enabled:!0}),peerDiscovery:Object(a.a)({autoDial:!0},l.a.tag,{enabled:!0})}}}}).call(this,n(29).Buffer)},819:function(e,t,n){"use strict";(function(e){var a=n(3),r=n.n(a),c=n(74),i=n(12),o=n(103),s=n(2),u=n(0),l=n.n(u),d=n(535),j=n(832),f=n(536),b=n(537),p=n(178),m=n(820),O=n(821),h=(n(34),n(277));t.a=Object(h.b)((function(t){var n=t.file||{},a=l.a.useState(null),u=Object(i.a)(a,2),h=u[0],x=u[1];l.a.useEffect(Object(c.a)(r.a.mark((function n(){var a,c,i,s,u,l,d,j,f;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(h&&URL.revokeObjectURL(h),!(t.file&&t.ipfs&&t.ipfs.isReady)){n.next=40;break}console.log("Fetching",t.file.cid),a=t.ipfs.node.cat(t.file.cid),c=e.from(""),i=!0,s=!1,n.prev=7,l=Object(o.a)(a);case 9:return n.next=11,l.next();case 11:return d=n.sent,i=d.done,n.next=15,d.value;case 15:if(j=n.sent,i){n.next=22;break}f=j,c=e.concat([c,f]);case 19:i=!0,n.next=9;break;case 22:n.next=28;break;case 24:n.prev=24,n.t0=n.catch(7),s=!0,u=n.t0;case 28:if(n.prev=28,n.prev=29,i||null==l.return){n.next=33;break}return n.next=33,l.return();case 33:if(n.prev=33,!s){n.next=36;break}throw u;case 36:return n.finish(33);case 37:return n.finish(28);case 38:console.log("Setting data"),x(URL.createObjectURL(new Blob([c])));case 40:case"end":return n.stop()}}),n,null,[[7,24,28,38],[29,,33,37]])}))),[t.file,t.ipfs]);var v=function(){h&&URL.revokeObjectURL(h),t.onClose&&t.onClose()};return Object(s.jsxs)(d.a,{fullWidth:!0,maxWidth:"lg",open:t.open,onClose:v,children:[Object(s.jsx)(j.a,{children:n.filename}),Object(s.jsx)(f.a,{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:function(){if(h)switch(n.extension){case"pdf":return Object(s.jsx)(O.a,{data:h});case"glb":return Object(s.jsx)(m.a,{data:h});case"png":return Object(s.jsx)("img",{style:{width:"33%",height:"100%"},src:h});default:return null}}()}),Object(s.jsx)(b.a,{children:Object(s.jsx)(p.a,{onClick:v,children:"Close"})})]})}))}).call(this,n(29).Buffer)},820:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(2),r=n(0),c=n.n(r);function i(e){var t,n,r;c.a.useEffect((function(){var a=function(){r&&r.resize()};if(e.data){r||(r=new window.BABYLON.Engine(t,!0)),n||(n=new window.BABYLON.Scene(r)).createDefaultEnvironment();var c=new window.BABYLON.ArcRotateCamera("camera",-Math.PI/2,Math.PI/2.5,3,new window.BABYLON.Vector3(0,0,10),n);c.setTarget(window.BABYLON.Vector3.Zero()),c.minZ=0,c.wheelPrecision=7,c.speed=.5,console.log(e.data),window.BABYLON.SceneLoader.ImportMesh(null,"",e.data,n,(function(e){console.log(e)}),null,null,".glb"),c.attachControl(t,!1),window.addEventListener("resize",a),r.runRenderLoop((function(){n.render()}))}return function(){r&&r.stopRenderLoop(),n&&(n.dispose(),n=null),window.removeEventListener("resize",a)}}),[e.data]);return Object(a.jsx)("canvas",{style:{width:"100%"},ref:function(e){null!==e&&(t=e)}})}},821:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(12),r=n(2),c=n(0),i=n.n(c),o=n(286);function s(e){var t=i.a.useState(null),n=Object(a.a)(t,2),c=n[0],s=n[1],u=i.a.useState(1),l=Object(a.a)(u,2);l[0],l[1];return Object(r.jsx)(o.a,{file:{data:e.data},onLoadSuccess:function(e){var t=e.numPages;s(t)},children:Array.from(new Array(c),(function(e,t){return Object(r.jsx)(o.b,{pageNumber:t+1},"page_".concat(t+1))}))})}},852:function(e,t,n){},858:function(e,t,n){},859:function(e,t,n){},860:function(e,t,n){},871:function(e,t,n){},877:function(e,t,n){},988:function(e,t,n){"use strict";n(40),n(14),n(12),n(0),n(122)}},[[1820,1,2]]]);
//# sourceMappingURL=main.fc886160.chunk.js.map