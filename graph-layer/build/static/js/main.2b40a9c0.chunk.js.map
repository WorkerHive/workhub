{"version":3,"sources":["components/more-menu/index.js","components/dashboard-header/index.js","components/search-table/index.js","components/permission-form/index.js","actions/types.js","graph/index.js","actions/projectActions.js","views/Projects/index.js","tabs/project/calendar.js","graph/yjs.js","actions/fileActions.js","components/file-dialog/index.js","components/plan-dialog/index.js","components/graph-kanban/index.js","tabs/project/plan.js","tabs/project/index.js","tabs/project/files.js","tabs/project/team.js","views/ProjectView/index.js","components/converter-dialog/index.js","views/Files/index.js","actions/calendarActions.js","components/calendar-dialog/index.js","views/Calendar/index.js","views/Settings/index.js","actions/teamActions.js","views/Team/index.js","actions/equipmentActions.js","views/Equipment/index.js","nodes/TypeDefNode.js","actions/adminActions.js","nodes/MSSQLNode.js","nodes/MSSQLServerNode.js","views/Admin/index.js","components/sidebar/index.js","controllers/DashboardController/index.js","actions/authActions.js","views/Login/index.js","reducers/projects.js","reducers/dashboard.js","reducers/files.js","reducers/auth.js","reducers/equipment.js","reducers/team.js","reducers/calendar.js","reducers/index.js","configureStore.js","App.js","reportWebVitals.js","index.js","components/file-preview-dialog/index.js","components/glb-card/index.js","components/pdf-card/index.js"],"names":["MoreMenu","props","React","useState","menuOpen","openMenu","IconButton","className","onClick","e","preventDefault","stopPropagation","currentTarget","MoreVert","Menu","open","menu","length","onClose","anchorEl","map","x","MenuItem","action","style","color","icon","Typography","marginLeft","label","connect","state","user","jwt_decode","auth","token","dispatch","Paper","variant","title","Tabs","value","tabs","toLowerCase","indexOf","selectedTab","onChange","newVal","onTabSelect","Tab","Notifications","name","SearchTable","flex","marginTop","TextField","InputProps","startAdornment","InputAdornment","position","Search","size","ButtonGroup","Button","ViewHeadline","ViewModule","Divider","List","data","ListItem","renderItem","PermissionForm","dialogOpen","openDialog","changes","setChanges","dataObj","setDataObj","permissions","type","useEffect","selected","Dialog","fullWidth","DialogTitle","DialogContent","display","flexDirection","fields","typeKey","k","typeDef","push","d","Object","assign","changed","target","FormControlLabel","control","Checkbox","checked","renderFields","DialogActions","onSave","children","create","Fab","bottom","right","Add","SET_PROJECTS","ADD_PROJECT","REMOVE_PROJECT","UPDATE_PROJECT","SET_TEAM","ADD_TEAM_MEMBER","REMOVE_TEAM_MEMBER","UPDATE_TEAM_MEMBER","SET_EQUIPMENT","ADD_EQUIPMENT","UPDATE_EQUIPMENT","REMOVE_EQUIPMENT","SET_FILES","SET_BOOKINGS","ADD_BOOKING","SET_TOKEN","ADD_FILE","SET_DASHBOARD_TYPES","SET_DASHBOARD_PERMS","ApolloClient","link","createUploadLink","uri","process","REACT_APP_GRAPH_URL","cache","InMemoryCache","addTypename","client","GClient","yDoc","projects","list","dashboard","types","filter","a","getProjects","query","gql","then","r","y","cloneDeep","__typename","addProject","project","mutate","mutation","variables","newProject","updateProject","id","projectId","removeProject","query_string","qs","parse","location","search","ignoreQueryPrefix","setSelected","Set","status","undefined","trim","toUpperCase","tab","history","window","pathname","stringify","obj","item","button","match","url","concat","admin","ydoc","Y","WebsocketProvider","getMap","YActions","localizer","momentLocalizer","moment","UPLOAD_FILE","getConverters","converters","files","setSearch","selectedFiles","filename","onAttach","ID","setID","setTitle","description","setDescription","dueDate","setDueDate","members","setMembers","plan","Date","rows","multiline","rowsMax","m","slice","splice","format","valueOf","GraphKanban","cards","graph","nodes","columns","setColumns","renderCard","card","onCardDragEnd","source","destination","console","log","cols","fromIx","fromColumnId","toIx","toColumnId","spliced","fromPosition","toPosition","onStatusChange","template","onColumnDragEnd","col","links","parents","getColumns","MinusSquare","SvgIcon","fontSize","width","height","PlusSquare","CloseSquare","TransitionComponent","useSpring","from","opacity","transform","to","in","div","Collapse","StyledTreeItem","withStyles","theme","iconContainer","group","paddingLeft","borderLeft","fade","palette","text","primary","TreeItem","alignItems","justifyContent","editChild","Edit","addChild","makeStyles","root","flexGrow","maxWidth","setNodes","doc","setDoc","docProject","setProject","observer","toJSON","unobserve","_doc","observe","init","events","allDay","start","end","startAccessor","endAccessor","fileId","attachFileToProject","selectedCard","setSelectedCard","setLinks","expanded","setExpanded","_setNodes","set","_setLinks","renderTree","tree_branch","_children","parent_pos","n","addNode","addLink","nodeId","node","uuidv4","l","columnMap","renderList","rootNodes","TreeView","multiSelect","defaultExpanded","onNodeToggle","event","newExpanded","defaultCollapseIcon","defaultExpandIcon","defaultEndIcon","setView","view","padding","ix","Dashboard","EmojiNature","onNodeChange","onLinkChange","renderPlan","ownProps","params","setSelectedTab","replace","path","render","ConverterDialog","outputFormat","setOutputFormat","formats","setFormats","sourceFormat","targetFormat","disabled","extension","Forward","marginRight","FormControl","InputLabel","Select","convertFile","addFile","file","getFiles","getState","useMutation","uploadFile","convertDoc","setConvertDoc","selectedData","setData","onDrop","useCallback","acceptedFiles","duplicate","useDropzone","noClick","getRootProps","getInputProps","isDragActive","viewable","ipfs","conversion","cid","Contactless","Info","team","equipment","addBooking","time","booking","step","setStep","searchTab","setSearchTab","date","setDate","setAllDay","startTime","setStart","endTime","setEnd","selectedItems","setSelectedItems","renderStepTitle","minHeight","Autocomplete","options","getOptionLabel","renderInput","margin","s","renderStep","sTime","eTime","get","_booking","parseInt","items","bookings","calendar","getBookings","setBookings","zIndex","Settings","setConverters","installed","converterId","getTeam","addTeamMember","member","newMember","removeTeamMember","memberId","updateTeamMember","Schedule","SupervisorAccount","SupervisedUserCircle","Share","Delete","getEquipment","addEquipment","newItem","updateEquipment","equipmentId","removeEquipment","modal","withEditor","src","typedef","UPDATE_INTEGRATION_MAP","getTypes","adminTypes","tables","setTables","store","getSource","connectionLayout","editor","error","table","updateNode","bucketLayout","availableColumns","provides","autoHighlight","ret","changeKey","host","db","username","password","draggable","updateIntegrationMap","integrationMap","integrations","nodeTypes","TypeDefNode","MSSQLNode","MSSQLServer","withRouter","CalendarToday","AccountTree","BusinessCenter","Description","Drawer","split","getPermissions","typePermissions","perms","ipfsNode","setIPFS","IPFS","stop","Calendar","component","Projects","exact","Teams","Equipment","SettingsView","AdminView","LOGIN","updated","setToken","quote","setQuote","setError","setUsername","setPassword","doLogin","login","fetch","json","q","paddingBottom","marginBottom","onKeyDown","keyCode","INIT","tIx","combineReducers","pIx","eIx","persistConfig","key","storage","persistedReducer","persistReducer","rootReducer","createStore","applyMiddleware","thunk","persistor","persistStore","configureStore","App","utils","MomentUtils","loading","Login","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","pdfjs","GlobalWorkerOptions","workerSrc","version","ReactDOM","StrictMode","document","getElementById","FilePreviewDialog","URL","revokeObjectURL","cat","Buffer","chunk","createObjectURL","Blob","renderContent","GLBCard","canvas","scene","engine","onResizeWindow","resize","BABYLON","Engine","Scene","createDefaultEnvironment","camera","ArcRotateCamera","Math","PI","Vector3","setTarget","Zero","minZ","wheelPrecision","speed","SceneLoader","ImportMesh","attachControl","addEventListener","runRenderLoop","stopRenderLoop","dispose","removeEventListener","ref","c","PDFCard","numPages","setNumPages","onLoadSuccess","Array","el","index","pageNumber"],"mappings":"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","file":"static/js/main.2b40a9c0.chunk.js","sourcesContent":["import React from 'react';\n\nimport {\n    MoreVert\n} from '@material-ui/icons'\n\nimport {\n    IconButton,\n    Menu,\n    MenuItem,\n    Typography\n} from '@material-ui/core';\n\nexport default function MoreMenu(props){\n    const [ menuOpen, openMenu ] = React.useState(null);\n\n    const toggleMenu = (e) => {\n        e.preventDefault()\n        e.stopPropagation()\n        openMenu(e.currentTarget)\n    }\n\n    return [\n        <IconButton className=\"more-menu\" onClick={toggleMenu}>\n            <MoreVert />\n        </IconButton>,\n        <Menu open={props.menu.length > 0 && menuOpen} onClose={() => openMenu(null)} anchorEl={menuOpen}>\n            {props.menu.map((x) => {\n                return (\n                    <MenuItem onClick={(e) => {\n                        e.stopPropagation()\n                        openMenu(null)\n                        x.action()\n                    }} style={{color: x.color || 'black'}}>\n                        {x.icon}\n                        <Typography style={{marginLeft: 8}}>\n                            {x.label}\n                        </Typography>\n                    </MenuItem>\n                )\n            })}\n        </Menu>\n    ]\n}","import React from 'react';\nimport jwt_decode from 'jwt-decode';\n\nimport {\n    Notifications\n} from \"@material-ui/icons\"\n\nimport {\n    Paper,\n    Typography,\n    Tabs,\n    Tab\n} from '@material-ui/core';\n\nimport { connect } from 'react-redux';\n\nfunction DashboardHeader(props){\n    return (\n        <Paper className=\"dashapp-header\">\n        <Typography variant=\"h6\">{props.title}</Typography>\n        <div className=\"dashapp-header__tabs\">\n            <Tabs value={props.tabs.map((x) => x.toLowerCase()).indexOf(props.selectedTab.toLowerCase())} onChange={(e, newVal) => {\n                props.onTabSelect(props.tabs[newVal])\n            }}>\n            {(props.tabs || []).map((x) => (\n                <Tab label={x} />\n            ))}\n            </Tabs>\n\n        </div>\n        <div className=\"actions-col\">\n          <Notifications />\n          <div className=\"user-info\">\n            <Typography variant=\"subtitle1\">{props.user.name}</Typography>\n            <span>Online</span>\n          </div>\n        </div>\n        </Paper>\n    )\n}\n\nexport default connect((state) => ({\n    user: jwt_decode(state.auth.token)\n}), (dispatch) => ({\n\n}))(DashboardHeader)","import React from 'react';\n\nimport {\n    Search,\n    ViewHeadline,\n    ViewModule\n} from '@material-ui/icons';\n\nimport {\n    Paper,\n    TextField,\n    ButtonGroup,\n    Button,\n    Divider,\n    List,\n    ListItem,\n    InputAdornment\n} from '@material-ui/core';\n\nimport './index.css';\n\nexport default function SearchTable(props){\n    return (\n        <Paper style={{flex: 1, marginTop: 12}}>\n            <div className=\"options-bar\">\n                <TextField\n                    InputProps={{\n                        startAdornment: <InputAdornment position=\"start\"><Search /></InputAdornment>\n                    }}\n                    label=\"Search\"\n                    variant=\"outlined\"\n                    size=\"small\" />\n                <ButtonGroup>\n                    <Button><ViewHeadline /></Button>\n                    <Button><ViewModule /></Button>\n                </ButtonGroup>\n            </div>\n            <Divider />\n            <div className=\"grid-list\">\n                <List>\n                    {props.data.map((x) => (\n                    <ListItem>\n                        {props.renderItem(x)}\n                    </ListItem>\n                    ))}\n                </List>\n            </div>\n        </Paper>\n    )\n}","import React from 'react';\n\nimport {\n    Add\n} from '@material-ui/icons';\n\nimport {\n    Fab,\n    Dialog,\n    DialogTitle,\n    TextField,\n    DialogActions,\n    Button,\n    Checkbox,\n    FormControlLabel,\n    DialogContent\n} from '@material-ui/core';\n\nimport './index.css';\n\nexport default function PermissionForm(props){\n    const [dialogOpen, openDialog] = React.useState(false)\n\n    const [ changes, setChanges ] = React.useState({})\n    const [ dataObj, setDataObj ] = React.useState({})\n\n    const permissions = props.permissions && props.permissions[0] || {}\n    const type = props.type && props.type[0] || {}\n\n    React.useEffect(() => {\n        if(props.selected){\n            setDataObj(props.selected)\n        }\n    }, [props.selected])\n\n    const renderFields = (type) => {\n        let fields = [];\n    \n        for(var k in type.typeDef){\n            const typeKey = k;\n            switch(type.typeDef[k]){\n                case \"String\":\n                fields.push((\n                    <TextField value={dataObj[typeKey]} onChange={(e) => {\n                        let d = Object.assign({}, dataObj);\n                        let changed = Object.assign({}, changes)\n                        d[typeKey] = e.target.value;\n                        changed[typeKey] = e.target.value;\n                        setDataObj(d)\n                        setChanges(changed)\n                    }} label={typeKey} ></TextField>\n                ))\n                break;\n                case \"Boolean\":\n                    fields.push((\n                        <FormControlLabel\n                            control={(\n                                <Checkbox checked={dataObj[typeKey]} onChange={(e) => {\n                                    let d = Object.assign({}, dataObj)\n                                    let changed = Object.assign({}, changes)\n                                    d[typeKey] = e.target.checked;\n                                    changed[typeKey] = e.target.checked;\n                                    setDataObj(d)\n                                    setChanges(changed)\n                                }}/>\n                            )}\n                            label={typeKey} />\n\n                    ))\n            }\n        }\n        return fields;\n    }\n\n    const onClose = () => {\n        props.onClose()\n        openDialog(false)\n        setDataObj({})\n    }\n\n    const onSave = () => {\n        props.onSave(dataObj, changes)\n        onClose();\n    }\n\n    return (\n        <div className=\"permission-form\">\n            <Dialog fullWidth open={props.selected || dialogOpen} onClose={() => {\n               onClose()\n            }}>\n                <DialogTitle>{type.name}</DialogTitle>\n                <DialogContent style={{display: 'flex', flexDirection: \"column\"}}>\n                    {renderFields(type)}\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={() => {onClose()}}>Cancel</Button>\n                    <Button onClick={() => onSave()} color=\"primary\" variant=\"contained\">Save</Button>\n                </DialogActions>\n            </Dialog>\n            <div className=\"permission-form__inner\">\n                {props.children}\n            </div>\n            {permissions.create && (\n                <Fab onClick={() => openDialog(true)} color=\"primary\" style={{position: 'absolute', bottom: 12, right: 12}}>\n                    <Add />\n                </Fab>\n            )}\n        </div>\n    )\n}","//Projects\nexport const SET_PROJECTS = \"SET_PROJECTS\";\nexport const ADD_PROJECT = \"ADD_PROJECT\"\nexport const REMOVE_PROJECT = \"REMOVE_PROJECT\"\nexport const UPDATE_PROJECT = \"UPDATE_PROJECT\"\n\n//Team\nexport const SET_TEAM = 'SET_TEAM';\nexport const ADD_TEAM_MEMBER = \"ADD_TEAM_MEMBER\";\nexport const REMOVE_TEAM_MEMBER = \"REMOVE_TEAM_MEMBER\"\nexport const UPDATE_TEAM_MEMBER = \"UPDATE_TEAM_MEMBER\"\n\n//Equipment\nexport const SET_EQUIPMENT = \"SET_EQUIPMENT\";\nexport const ADD_EQUIPMENT = \"ADD_EQUIPMENT\";\nexport const UPDATE_EQUIPMENT = \"UPDATE_EQUIPMENT\"\nexport const REMOVE_EQUIPMENT = \"REMOVE_EQUIPMENT\"\n\nexport const SET_FILES = \"SET_FILES\";\n\n//Calendar things\nexport const SET_BOOKINGS = \"SET_BOOKINGS\";\nexport const ADD_BOOKING = \"ADD_BOOKING\";\n\nexport const SET_TOKEN = 'SET_TOKEN';\n\nexport const ADD_FILE = 'ADD_FILE';\n\nexport const SET_DASHBOARD_TYPES = 'SET_DASHBOARD_TYPES';\nexport const SET_DASHBOARD_PERMS = 'SET_DASHBOARD_PERMS';\n","import { ApolloClient, InMemoryCache } from '@apollo/client';\nimport { createUploadLink } from 'apollo-upload-client'\n\nexport default () => {\n  return new ApolloClient({\n    link: createUploadLink({\n      uri: (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') ? \n        'https://thetechcompany.workhub.services/graphql' || 'http://localhost:4000/graphql' : \n        process.env.REACT_APP_GRAPH_URL || '/graphql',\n    }),\n    cache: new InMemoryCache({\n      addTypename: false\n    })\n  })\n}\n","import * as types from './types';\nimport { gql } from '@apollo/client';\nimport { cloneDeep } from 'lodash';\nimport GClient from '../graph';\n\nconst client = GClient()\n\nexport const addProject = (project) => {\n  return (dispatch) => {\n    return client.mutate({\n      mutation: gql`\n      mutation AddProject($project: ProjectInput){\n        addProject(project: $project){\n          id\n          name\n          description\n          status\n        }\n      }\n    `,\n    variables: {\n      project: project\n    }\n    }).then((r) => r.data.addProject).then((r) => {\n      dispatch({type: types.ADD_PROJECT, newProject: r})\n    })\n  }\n}\n\nexport const updateProject = (projectId, project) => {\n  return (dispatch) => {\n    return client.mutate({\n      mutation: gql`\n  mutation UpdateProject($projectId: ID, $project: ProjectInput){\n    updateProject(projectId: $projectId, project: $project){\n      id\n      name\n      description\n      status\n    }\n  }\n`, \nvariables: {\n  projectId: projectId,\n  project: project\n}}).then((r) => r.data.updateProject).then((r) => {\n  dispatch({type: types.UPDATE_PROJECT, project: project, id: projectId})\n})\n} \n  }\n\n  export const removeProject = (projectId) => {\n    return (dispatch) => {\n      return client.mutate({\n        mutation: gql`\n          mutation RemoveProject($projectId: ID){\n            removeProject(projectId: $projectId)\n          }\n        `,\n          variables: {\n            projectId: projectId\n          }\n      }).then((r) => r.data.removeProject).then((r) => {\n        if(r) dispatch({type: types.REMOVE_PROJECT, id: projectId})\n      })\n    }\n\n  }\n\nexport const getProjects = () => {\n  return (dispatch) => {\n    return client.query({\n      query: gql`\n        query GetProjects {\n          projects{\n            id\n            name\n            description\n            status\n            files{\n              filename\n              cid\n            }\n          }\n        }\n      `\n    }).then((r) => {\n      dispatch({type: types.SET_PROJECTS, projects: r.data.projects.map((x) => {\n        let y = cloneDeep(x)\n        delete y.__typename;\n        return y;\n      })})      \n    })\n  }\n}\n","import React from 'react';\n\nimport {\n  ViewHeadline,\n  ViewModule,\n  Search,\n  Add\n} from '@material-ui/icons';\n\nimport {\n  List,\n  ListItem,\n  InputAdornment,\n  ButtonGroup,\n  Button,\n  Paper,\n  Divider,\n  TextField,\n  Fab,\n  Typography\n} from '@material-ui/core';\n\nimport MoreMenu from '../../components/more-menu';\nimport DashboardHeader from '../../components/dashboard-header';\n\nimport { useMutation } from '@apollo/client'\nimport { connect } from 'react-redux';\nimport SearchTable from '../../components/search-table';\nimport PermissionForm from '../../components/permission-form';\nimport { updateProject, addProject, removeProject,   getProjects } from '../../actions/projectActions';\nimport qs from 'qs';\nimport jwt_decode from 'jwt-decode';\n\nimport './index.css';\n\nfunction Projects(props){\n  const query_string = qs.parse(props.location.search, {ignoreQueryPrefix: true})\n  const [ selected, setSelected ] = React.useState(null)\n\n  React.useEffect(() => {\n    props.getProjects() \n  }, [])\n\n  return [\n    <DashboardHeader \n    tabs={[\"ALL\", ...new Set(props.projects.filter((a) => a.status != null && a.status != undefined).map((x) => x.status.trim().toUpperCase()))] || []}\n    onTabSelect={(tab) => {\n      if(tab == \"ALL\"){\n        delete query_string.status;\n        props.history.push(`${window.location.pathname}?${qs.stringify(query_string)}`)\n      }else{\n        query_string.status = tab;\n        props.history.push(`${window.location.pathname}?${qs.stringify(query_string)}`)\n      }\n        //setSelectedTab(tab)\n        //props.history.push(`${props.match.url}/${tab.toLowerCase()}`)\n    }}\n    selectedTab={query_string.status && query_string.status.toUpperCase() || 'ALL'}\n    title={\"Projects\"} />,\n    <PermissionForm\n      onSave={(obj, data) => {\n        if(obj.id){\n          let d = Object.assign({}, data);\n          delete d.id\n          props.updateProject(obj.id, d)\n        }else{\n          props.addProject(data)\n        }\n      }} \n      onClose={() => setSelected(null)}\n      selected={selected} \n      type={props.type} \n      permissions={props.permissions}>\n      <SearchTable\n        data={props.projects.filter((a) => {\n          if(query_string.status && a.status == query_string.status){\n            return true;\n          }else if(!query_string.status){\n            return true;\n          }\n          return false;\n        }).filter((a) => a.name)}\n        renderItem={(item) => [\n          <div className=\"project-item\">\n            <ListItem button onClick={() => {\n              props.history.push(`${props.match.url}/${item.id}/plan`)\n              }}>\n              <Typography style={{flex: 1}} variant=\"subtitle1\">{item.name}</Typography>\n            </ListItem>\n            <MoreMenu \n              menu={[\n              ].concat(props.user.admin ? [\n                {\n                  label: \"Edit\",\n                  action: () => setSelected(item)\n                },\n                {\n                  label: \"Delete\",\n                  color: 'red',\n                  action: () => props.removeProject(item.id)\n                }\n              ] : [])} />\n          </div>\n        ]} />\n\n    </PermissionForm>\n\n  ]\n}\n\nexport default connect((state) => ({\n  user: jwt_decode(state.auth.token),\n  projects: state.projects.list,\n  type: state.dashboard.types.filter((a) => a.name == \"Projects\"),\n  permissions: state.dashboard.permissions.filter((a) => a.type == \"Projects\")\n}), (dispatch) => ({\n  getProjects: () => dispatch(getProjects()),\n  addProject: (project) => dispatch(addProject(project)),\n  updateProject: (id, project) => dispatch(updateProject(id, project)),\n  removeProject: (id) => dispatch(removeProject(id))\n}))(Projects)\n","import React from 'react';\nimport YActions from '../../graph/yjs';\nimport { Calendar, momentLocalizer } from 'react-big-calendar'\nimport moment from 'moment'\nimport './calendar.css';\n\nconst ydoc = YActions()\nlet yDoc;\n\nconst localizer = momentLocalizer(moment)\nexport default function CalendarTab(props){\n    const [ bookings, setBookings ] = React.useState([])\n    const [ nodes, setNodes ] = React.useState([])\n    const [ doc, setDoc ] = React.useState(null)\n    const [ docProject, setProject ] = React.useState({})\n\n    const observer = () => {\n        if(yDoc){\n          let obj = yDoc.toJSON()\n          console.log(\"OBSERVE\", obj)\n          if(obj.nodes != null){\n            setNodes(obj.nodes.map((x) => Object.assign({}, x)))\n          }\n        \n        }\n      }\n  \n      React.useEffect(() => {\n        console.log(\"YDC\", props)\n        if(props.project && ydoc && props.project.id != docProject.id){\n          if(doc) doc.unobserve(observer);\n  \n          console.log(\"Setting up YDOC\")\n          let _doc = ydoc.getMap(`plan-${props.project.id}`)\n          yDoc = _doc;\n            setDoc(_doc)\n          _doc.observe(observer)\n  \n          setProject(props.project)\n          \n          let init = _doc.toJSON();\n  \n          if(init.nodes != null) setNodes(init.nodes)\n        }\n      }, [props.project, doc])\n\n    return (\n        <div className=\"calendar-tab\">\n            <Calendar\n                localizer={localizer}\n                events={nodes.filter((a) => a.data && a.data.dueDate).map((x) => ({\n                    id: x.id,\n                    title: x.data.label,\n                    allDay: false,\n                    start: new Date(((x.data.dueDate)*1000) -( 5 * 1000 * 60)),\n                    end: new Date((x.data.dueDate)* 1000)\n                }))}\n                startAccessor=\"start\"\n                endAccessor=\"end\"\n                style={{ flex: 1 }} />\n        </div>\n    )\n}","import * as Y from 'yjs';\nimport { WebsocketProvider } from 'y-websocket';\n\nexport default function (){\n\n    const ydoc = new Y.Doc();\n    const host = \"thetechcompany.workhub.services\";\n    //const host = new URL(window.location).hostname;\n    const websocketProvider = new WebsocketProvider(`wss://${host}:1234`, 'workhub', ydoc)\n  \n    const yArray = ydoc.getMap('')\n  \n    return ydoc;\n  }","import * as types from './types';\nimport { gql, useMutation } from '@apollo/client';\n\nimport GClient from '../graph';\n\nconst client = GClient()\n\nexport const UPLOAD_FILE = gql`\n    mutation UploadFile($file: Upload!){\n      uploadFile(file: $file) {\n        duplicate\n        file{\n          id\n          filename\n          cid\n          extension\n        }\n      }\n    }\n  `\n\nexport const attachFile = (projectId, fileId) => {\n  client.mutate({\n    mutation: gql`\n    mutation AttachFile($projectId: ID, $fileId: ID){\n      attachFileToProject(projectId: $projectId, fileId: $fileId){\n        files{\n          cid\n        }\n      }\n    }\n    `,\n    variables: {\n      projectId: projectId,\n      fileId: fileId\n    }\n  }).then((r) => r.data.attachFileToProject).then((r) => {\n      console.log(r)\n  }) \n}\n\nexport const convertFile = (fileId, targetFormat) => {\n  client.mutate({\n    mutation: gql`\n    mutation ConvertFile($fileId: ID, $targetFormat:String){\n      convertFile(fileId: $fileId, targetFormat: $targetFormat){\n        msg\n        error\n      }\n    }\n  `,\n    variables: {\n      fileId,\n      targetFormat\n    }\n  }).then((r) => r.data.convertFile)\n}\n\nexport const getConverters = () => {\n  return client.query({\n    query: gql`\n      query GetConverters{\n        converters{\n          id\n          name\n          sourceFormat\n          targetFormat\n          installed\n        }\n      }\n    `\n  }).then((r) => r.data.converters)\n}\n\nexport const installConverter = (id) => {\n  return client.mutate({\n    mutation: gql`\n      mutation InstallConverter($converterId: ID){\n        installConverter(converterId: $converterId)\n      }\n    `,\n    variables: {\n      converterId: id\n    }\n  })\n}\n\nexport const addFile = (file) => {\n  return (dispatch) => {\n    dispatch({type: types.ADD_FILE, file: file})\n  }\n}\n\nexport const getFiles = () => {\n  return (dispatch, getState) => {\n    return client.query({\n      query: gql`\n        query GetFiles{\n          files{\n            id\n            filename\n            cid\n            extension\n            conversion{\n              extension\n              cid\n            }\n          }\n        }\n      `\n    }).then((r) => r.data.files).then((r) => {\n      dispatch({type: types.SET_FILES, files: r})\n    })\n  }\n}\n\n","import React from 'react';\n\nimport {\n    Search\n} from '@material-ui/icons';\n\nimport {\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    DialogActions,\n    List,\n    ListItem,\n    Button,\n    InputAdornment,\n    TextField,\n    Checkbox\n} from '@material-ui/core';\n\nimport { connect } from 'react-redux';\n\nfunction FileDialog(props){\n    const [ search, setSearch ] = React.useState('')\n\n    const [ selectedFiles, setSelected ] = React.useState({})\n\n    const attachFiles = () => {\n        if(props.onAttach){\n            props.onAttach(selectedFiles)\n            setSelected({})\n            props.onClose()\n        }\n    }\n    return (\n        <Dialog fullWidth open={props.open} onClose={props.onClose}>\n            <DialogTitle>Files</DialogTitle>\n            <DialogContent>\n                <TextField \n                    fullWidth \n                    value={search}\n                    onChange={(e) => setSearch(e.target.value)}\n                    label=\"Search\" \n                    InputProps={{\n                        startAdornment: <InputAdornment position=\"start\"><Search /></InputAdornment>\n                    }} />\n                <List>\n                    {props.files.filter((a) => a.filename && a.filename.toLowerCase().indexOf(search.toLowerCase()) > -1).map((x) => (\n                        <ListItem button><Checkbox checked={selectedFiles[x.id]} onChange={(e) => {\n                            let files = selectedFiles;\n                            files[x.id] = e.target.checked;\n                            setSelected(files)\n                        }}/>{x.filename}</ListItem>\n                    ))}    \n                </List>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={props.onClose}>Close</Button>\n                <Button color=\"primary\" variant=\"contained\" onClick={attachFiles}>Attach</Button>\n            </DialogActions>\n\n        </Dialog>\n    )\n}\n\nexport default connect((state) => ({\n    files: state.files.list\n}))(FileDialog)","import React from 'react';\n\nimport {\n    Dialog,\n    DialogContent,\n    DialogActions,\n    DialogTitle,\n    TextField,\n    Button\n} from '@material-ui/core';\n\nimport { KeyboardDateTimePicker } from '@material-ui/pickers'\nimport jwt_decode from 'jwt-decode';\nimport { connect } from 'react-redux';\nimport moment from 'moment';\n\nimport './index.css';\n\nfunction PlanDialog(props){\n    const [ ID, setID ] = React.useState('')\n    const [ title, setTitle ] = React.useState('')\n    const [ description, setDescription ] = React.useState('')\n    const [ dueDate, setDueDate ] = React.useState(null);\n    const [ members, setMembers ] = React.useState([])\n\n    React.useEffect(() => {\n        if(props.plan){\n            setID(props.plan.id)\n            setTitle(props.plan.title)\n            setDescription(props.plan.description)\n            setMembers(props.plan.members || [])\n            if(props.plan.dueDate) setDueDate(moment(new Date(props.plan.dueDate * 1000)))\n        }\n    }, [props.plan])\n\n    const onSave = () => {\n        let plan = {\n            id: ID,\n            title: title,\n            description: description,\n            dueDate: dueDate && dueDate.valueOf() / 1000,\n            members: members\n        }\n\n        if(props.onSave){\n            props.onSave(plan)\n            props.onClose();\n        }\n    }\n\n    return (\n        <Dialog fullWidth open={props.open} onClose={props.onClose}>\n            <DialogTitle>\n                <TextField value={title} onChange={(e) => setTitle(e.target.value)} fullWidth label=\"Title\" />\n            </DialogTitle>\n            <DialogContent className=\"plan-dialog__content\">\n                <div className=\"plan-info\">\n                    <TextField \n                        value={description}\n                        onChange={(e) => setDescription(e.target.value)}\n                        fullWidth \n                        label=\"Description\" \n                        rows={3} multiline rowsMax={6} />\n\n                </div>\n                <div className=\"plan-actions\">\n                    <Button \n                        onClick={() => {\n                            let m = members.slice();\n                            if(members.indexOf(props.user.id) > -1){\n                                m.splice(members.indexOf(props.user.id), 1)\n                            }else{\n                                m.push(props.user.id)\n                            }\n                            setMembers(m)\n                        }}\n                        color={members.indexOf(props.user.id) > -1 ? \"\" : \"primary\"}\n                        variant=\"contained\">{members.indexOf(props.user.id) > -1 ? \"Leave\" : \"Join\"}</Button>\n                    <Button color=\"primary\" variant=\"contained\">Members</Button>\n                    <KeyboardDateTimePicker\n                        label=\"Due Date\"\n                        value={dueDate}\n                        onChange={(e) => {\n                            setDueDate(e)\n                        }}\n                        format={\"DD/MM/yyyy\"} />\n                </div>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={props.onClose}>Cancel</Button>\n                <Button onClick={onSave} color=\"primary\" variant=\"contained\">Save</Button>\n            </DialogActions>\n        </Dialog>\n    );\n}\n\nexport default connect((state) => ({\n    user: jwt_decode(state.auth.token)\n}))(PlanDialog)","import React from 'react';\n\nimport Board from '@lourenci/react-kanban'\nimport '@lourenci/react-kanban/dist/styles.css'\nimport './index.css';\n\nexport default function GraphKanban(props){\n    const [ columns, setColumns ] = React.useState([\n        {\n            id: 0,\n            title: 'Blocked',\n            cards: []\n        },\n        {\n            id: 1,\n            title: 'Backlog',\n            cards: props.graph.nodes.filter((a) => a.status != \"COMPLETED\" && a.status != \"BLOCKED\").map((x) => ({\n                id: x.id,\n                title: x.data.label,\n            }))\n        },\n        {\n            id: 2,\n            title: 'Doing',\n            cards: []\n        },\n        {\n            id: 3,\n            title: 'Done',\n            cards: []\n        }\n    ])\n\n    const getColumns = () => {\n        let template = []\n        if(props.template){\n            template = props.template || [];\n        }\n\n        return template.map((col) => {\n            let col_id = col.id;\n            console.log(props.graph.nodes)\n            let cards = props.graph.nodes.filter((a) => {\n                return a.data.status == col.status\n            }) || []\n\n            console.log(props.graph.links)\n            return {\n                ...col,\n                cards: cards.map((x) => {\n                    let parents = props.graph.links.filter((a) => a.target == x.id).map((y) => props.graph.nodes.filter((a) => a.id == y.source)[0])\nreturn {\n                    id: x.id,\n                    title: x.data.label,\n                    description: parents.length > 0 && parents[0].data.label,\n                    dueDate: x.data.dueDate,\n                    members: x.members || []\n}\n                })\n            }\n        })\n    }\n\n  \n    return (\n        <Board \n            renderCard={(card) => {\n                return (\n                    <div onClick={() => {\n                        if(props.onClick){\n                            props.onClick(card)\n                        }\n                    }} className=\"react-kanban-card\">\n                        <div className=\"react-kanban-card__title\">\n                            {card.title}\n                        </div>\n                        <div>\n                            {card.description}    \n                        </div>\n                    </div>\n                )\n            }}\n            onCardDragEnd={(card, source, destination) => {\n                console.log(source, destination)\n                let cols = columns.slice()\n\n                let fromIx = cols.map((x) => x.id).indexOf(source.fromColumnId);\n                let toIx = cols.map((x) => x.id).indexOf(destination.toColumnId)\n\n                let spliced = cols[fromIx].cards.splice(source.fromPosition, 1)\n                cols[toIx].cards.splice(destination.toPosition, 0, spliced[0])\n\n\n                if(props.onStatusChange) props.onStatusChange(card, props.template.filter((a) => a.id == destination.toColumnId)[0].status)\n                if(props.onChange)props.onChange(cols)\n                setColumns(cols)\n            }}\n            onColumnDragEnd={(obj, source, destination) => {\n                let cols = columns.slice()\n\n                let spliced = cols.splice(source.fromPosition, 1)[0]\n                cols.splice(destination.toPosition, 0, spliced)\n                if(props.onChange)props.onChange(cols)\n                setColumns(cols)\n            }}\n            children={{columns: getColumns()}} />\n    )\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { fade, makeStyles, withStyles } from '@material-ui/core/styles';\n\nimport {\n    Add,\n    Dashboard as DashboardIcon,\n    List as ListIcon,\n    EmojiNature,\n    Edit\n} from '@material-ui/icons';\n\nimport {\n    IconButton,\n    SvgIcon,\n    Collapse,\n    ButtonGroup,\n    Divider,\n    Button\n} from \"@material-ui/core\"\n\nimport {\n    TreeView,\n    TreeItem,\n} from '@material-ui/lab'\n\nimport PlanDialog from '../../components/plan-dialog';\nimport HiveEditor from 'react-hive-flow'\nimport GraphKanban from '../../components/graph-kanban';\n\nimport { v4 as uuidv4 } from 'uuid';\nimport { useSpring, animated } from 'react-spring/web.cjs';\nimport YActions from '../../graph/yjs';\nimport qs from 'qs';\nimport './plan.css';\n\nconst ydoc = YActions()\nlet yDoc;\n\nexport default function PlanTab(props){\n  const [ selectedCard , setSelectedCard ] = React.useState(null)\n  let query = qs.parse(window.location.search, {ignoreQueryPrefix: true})\n  const [ selectedView, _setView ] = React.useState('list')\n\n    const [ nodes, setNodes ] = React.useState([])\n    const [ links, setLinks ] = React.useState([])\n\n    const [ expanded, setExpanded ] = React.useState(['root'])\n\n    const [ docProject, setProject ] = React.useState({})\n    const [ doc, setDoc ] = React.useState(null)\n    \n    const observer = () => {\n      if(yDoc){\n        let obj = yDoc.toJSON()\n        console.log(\"OBSERVE\", obj)\n        if(obj.nodes != null){\n          setNodes(obj.nodes.map((x) => Object.assign({}, x)))\n        }\n        if(obj.links != null) {\n          setLinks(obj.links.map((x) => Object.assign({}, x)))\n        }\n      }\n    }\n\n    React.useEffect(() => {\n      console.log(\"YDC\", props)\n      if(props.project && ydoc && props.project.id != docProject.id){\n        if(doc) doc.unobserve(observer);\n\n        console.log(\"Setting up YDOC\")\n        let _doc = ydoc.getMap(`plan-${props.project.id}`)\n        yDoc = _doc;\n        setDoc(_doc)\n        _doc.observe(observer)\n\n        setProject(props.project)\n        \n        let init = _doc.toJSON();\n\n        if(init.nodes != null) setNodes(init.nodes)\n        if(init.links != null) setLinks(init.links)\n      }\n    }, [props.project, doc])\n\n    const _setNodes = (nodes) => {\n      if(doc){\n        doc.set('nodes', nodes)\n      }\n      setNodes(nodes)\n    }\n\n    const _setLinks = (links) => {\n      if(doc){\n        doc.set('links', links)\n      }\n      setLinks(links)\n    }\n\n    const renderTree = (tree_branch) => {\n        if(tree_branch){\n            let _links = links.filter((a) => a.source == tree_branch.id)\n            let _children = _links.map((x) => nodes.filter((a) => a.id == x.target)[0])\n\n            let parent_pos = nodes.filter((a) => a.id == tree_branch.id)[0].position\n\n            let item = (\n                <StyledTreeItem \n                  editChild={() => {\n                    setSelectedCard({\n                      id: tree_branch.id,\n                      title: tree_branch.data.label,\n                      description: tree_branch.data.description,\n                      dueDate: tree_branch.dueDate,\n                      members: tree_branch.members})\n                  }}\n                  addChild={() => {\n                    let n = addNode({\n                        type: 'baseNode',\n                        data:{\n                          label: \"\"\n                        },\n                        position: {\n                          x: parent_pos.x,\n                          y: parent_pos.y + 121\n                        }\n                    })\n                    addLink({target: n.id, source: tree_branch.id})\n\n                    setSelectedCard({\n                      id: n.id,\n                      title: \"\",\n                      dueDate: null,\n                      members: []\n                    })\n        \n                }} nodeId={tree_branch.id} label={tree_branch && tree_branch.data && tree_branch.data.label}>\n                    {(_children || []).map((x) => renderTree(x))}\n                </StyledTreeItem>\n            )\n            return item;\n        }\n    }\n\n    const addNode = (node) => {\n        let n = nodes.slice();\n        node.id = uuidv4()\n        if(!node.data)node.data = {};\n        if(!node.position)node.position = {x:300, y:300}\n        n.push(node)\n        _setNodes(n)\n        return node;\n    }\n\n    const addLink = (link) => {\n        let l = links.slice();\n        link.id = uuidv4()\n        l.push(link);\n        _setLinks(l)\n        return link;\n    }\n\n    const [ columnMap, setColumnMap ] = React.useState([])\n\n    const renderKanban = () => {\n      return (\n        <GraphKanban \n          onClick={(card) => {\n            setSelectedCard({\n              id: card.id,\n              title: card.title,\n              dueDate: card.dueDate,\n              members: card.members\n            })\n          }}\n          onStatusChange={(card, status) => {\n            let n = nodes.slice()\n            let ix = n.map((x) => x.id).indexOf(card.id)\n            n[ix].data.status = status;\n            _setNodes(n)\n           // console.log(card, status)\n          }}\n          onChange={(cols) => {\n            //Add column -> node mapping to yjs\n            /*let output = cols.map((x) => ({\n              id: x.id,\n              title: x.title,\n              cards: x.cards.map((x) => x.id)\n            }))\n            setColumnMap(output)*/\n          }}\n          template={[\n            {\n              id: 0,\n              title: \"Blocked\",\n              status: \"BLOCKED\"\n            },\n            {\n              id: 1,\n              title: \"Ready to be Done\",\n              status: \"UNFINISHED\"\n            },\n            {\n              id: 2,\n              title: \"Doing\",\n              status: \"IN PROGRESS\"\n            },\n            {\n              id: 3,\n              title: \"Done\",\n              status: \"COMPLETE\"\n            }\n          ]}\n          map={columnMap}\n          graph={{nodes: nodes, links: links}} />\n      )\n    }\n\n    const renderList = () => {\n      let rootNodes = nodes.filter((x) => links.filter((a) => a.target == x.id).length == 0)\n//      let rootNodes = links.filter((a) => a.source == 'root').map((x) => nodes.filter((a) =>  a.id == x.target)[0])\n\n      return (\n        <TreeView\n        multiSelect\n        defaultExpanded={['1']}\n        expanded={expanded}\n        onNodeToggle={(event, newExpanded) => {\n            console.log(event, newExpanded)\n            setExpanded(newExpanded)\n        }}\n        defaultCollapseIcon={<MinusSquare />}\n        defaultExpandIcon={<PlusSquare />}\n        defaultEndIcon={<CloseSquare />}>\n         <StyledTreeItem \n          addChild={() => {\n            let n = addNode({\n                type: 'baseNode',\n                data: {label: ''}\n            })\n            setSelectedCard({\n              id: n.id,\n              title: \"\",\n              dueDate: null,\n              members: []\n            })\n          //  addLink({target: n.id, source: 'root'})\n                        \n            console.log(nodes, links)\n         }} nodeId=\"root\" label={props.project.name}>\n             {rootNodes.map((x) => renderTree(x))}\n        </StyledTreeItem>\n     </TreeView>\n      )\n    }\n\n    const renderHive = () => {\n      return (\n        <div className=\"plan-hive\">\n      <HiveEditor\n          nodes={nodes}\n          links={links}\n          onNodeChange={(nodes) => _setNodes(nodes)}\n          onLinkChange={(links) => _setLinks(links)} />\n        </div>\n      )\n    }\n\n\n    const renderPlan = () => {\n      let view = query.view || 'kanban'\n      switch(view){\n        case 'kanban':\n          return renderKanban()\n        case 'list':\n          return renderList()\n        case 'hive':\n          return renderHive()\n        default:\n          return\n      }\n    }\n\n    const setView = (view) => {\n      if(!query) query = {};\n      query.view = view;\n      props.history.push(`${props.location.pathname}?${qs.stringify(query)}`)\n    }\n\n    let view = query.view || 'kanban';\n\n    return (\n        <div style={{padding: 4, display: 'flex', flex: 1, position: 'relative', flexDirection: 'column', width: 'calc(100% - 8px)'}}>\n            <PlanDialog \n              onSave={(plan) => {\n                console.log(plan)\n                let n = nodes.slice()\n                let ix = n.map((x) => x.id).indexOf(plan.id)\n                let data = {}\n\n                if(plan.title) data.label = plan.title;\n                if(plan.description) data.description = plan.description\n                if(plan.dueDate) data.dueDate = plan.dueDate;\n                \n                n[ix] = {\n                  ...n[ix],\n                  data: {\n                    ...n[ix].data,\n                    ...data\n                  },\n                  members: plan.members\n                };\n                _setNodes(n)\n              }}\n              open={selectedCard} \n              plan={selectedCard} \n              onClose={() => setSelectedCard(null)}/>\n            <div className=\"plan-header\">\n              <div>\n      \n              </div>\n              <ButtonGroup>\n                <Button variant={view == 'kanban' && 'contained'} onClick={() => setView('kanban')}><DashboardIcon /></Button>\n                <Button variant={view == 'list' && 'contained'} onClick={() => setView('list')}><ListIcon /></Button>\n                <Button variant={view == 'hive' && 'contained'} onClick={() => setView('hive')}><EmojiNature /></Button>\n              </ButtonGroup>\n            </div>\n            <Divider />\n            <div className=\"plan-container\">\n            {renderPlan()}\n            </div>\n        </div>\n    )\n}\n\nfunction MinusSquare(props) {\n    return (\n      <SvgIcon fontSize=\"inherit\" style={{ width: 14, height: 14 }} {...props}>\n        {/* tslint:disable-next-line: max-line-length */}\n        <path d=\"M22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0zM17.873 11.023h-11.826q-.375 0-.669.281t-.294.682v0q0 .401.294 .682t.669.281h11.826q.375 0 .669-.281t.294-.682v0q0-.401-.294-.682t-.669-.281z\" />\n      </SvgIcon>\n    );\n  }\n  \n  function PlusSquare(props) {\n    return (\n      <SvgIcon fontSize=\"inherit\" style={{ width: 14, height: 14 }} {...props}>\n        {/* tslint:disable-next-line: max-line-length */}\n        <path d=\"M22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0zM17.873 12.977h-4.923v4.896q0 .401-.281.682t-.682.281v0q-.375 0-.669-.281t-.294-.682v-4.896h-4.923q-.401 0-.682-.294t-.281-.669v0q0-.401.281-.682t.682-.281h4.923v-4.896q0-.401.294-.682t.669-.281v0q.401 0 .682.281t.281.682v4.896h4.923q.401 0 .682.281t.281.682v0q0 .375-.281.669t-.682.294z\" />\n      </SvgIcon>\n    );\n  }\n  \n  function CloseSquare(props) {\n    return (\n      <SvgIcon className=\"close\" fontSize=\"inherit\" style={{ width: 14, height: 14 }} {...props}>\n        {/* tslint:disable-next-line: max-line-length */}\n        <path d=\"M17.485 17.512q-.281.281-.682.281t-.696-.268l-4.12-4.147-4.12 4.147q-.294.268-.696.268t-.682-.281-.281-.682.294-.669l4.12-4.147-4.12-4.147q-.294-.268-.294-.669t.281-.682.682-.281.696 .268l4.12 4.147 4.12-4.147q.294-.268.696-.268t.682.281 .281.669-.294.682l-4.12 4.147 4.12 4.147q.294.268 .294.669t-.281.682zM22.047 22.074v0 0-20.147 0h-20.12v0 20.147 0h20.12zM22.047 24h-20.12q-.803 0-1.365-.562t-.562-1.365v-20.147q0-.776.562-1.351t1.365-.575h20.147q.776 0 1.351.575t.575 1.351v20.147q0 .803-.575 1.365t-1.378.562v0z\" />\n      </SvgIcon>\n    );\n  }\n\n\nfunction TransitionComponent(props) {\n    const style = useSpring({\n      from: { opacity: 0, transform: 'translate3d(20px,0,0)' },\n      to: { opacity: props.in ? 1 : 0, transform: `translate3d(${props.in ? 0 : 20}px,0,0)` },\n    });\n  \n    return (\n      <animated.div style={style}>\n        <Collapse {...props} />\n      </animated.div>\n    );\n  }\n  \n  TransitionComponent.propTypes = {\n    /**\n     * Show the component; triggers the enter or exit states\n     */\n    in: PropTypes.bool,\n  };\n  \n  const StyledTreeItem = withStyles((theme) => ({\n    iconContainer: {\n      '& .close': {\n        opacity: 0.3,\n      },\n    },\n    group: {\n      marginLeft: 7,\n      paddingLeft: 18,\n      borderLeft: `1px dashed ${fade(theme.palette.text.primary, 0.4)}`,\n    },\n\n  }))((props) => {\n      return(\n    <TreeItem {...props} label={(\n        <div className=\"tree-item\" style={{display: 'flex', alignItems: 'center', justifyContent: 'space-between'}}>\n            {props.label}\n            <div style={{display: 'flex'}}>\n            <IconButton onClick={(e) => {\n                e.stopPropagation();\n                if(props.editChild) props.editChild()\n            }}>\n              <Edit />\n            </IconButton>\n            <IconButton onClick={(e) => {\n                e.stopPropagation()\n                props.addChild()\n            }}>\n                <Add />\n            </IconButton>\n            </div>\n        </div>\n    )} TransitionComponent={TransitionComponent}/>\n\n  )});\n  \n  const useStyles = makeStyles({\n    root: {\n      height: 264,\n      flexGrow: 1,\n      maxWidth: 400,\n    },\n  });","import CalendarTab from './calendar';\nimport FileTab from './files';\nimport PlanTab from './plan';\nimport TeamTab from './team';\n\nexport default {\n    CalendarTab,\n    FileTab,\n    PlanTab,\n    TeamTab\n}","import React from 'react';\n\nimport {\n    Add\n} from '@material-ui/icons';\n\nimport {\n    Fab,\n    List,\n    ListItem\n} from '@material-ui/core';\n\nimport { useMutation } from '@apollo/client';\nimport { attachFile } from '../../actions/fileActions';\nimport FileDialog from '../../components/file-dialog';\n\nexport default function FileTab(props){\n    const [ dialogOpen, openDialog ] = React.useState(false)\n\n    React.useEffect(() => {\n        console.log(props.project)\n    })\n    return (\n        <div>\n            <List>\n                {props.project && props.project.files && props.project.files.map((x) => (\n                    <ListItem>{x.filename}</ListItem>\n                ))}\n            </List>\n            <FileDialog onAttach={(selected) => {\n                for(var k in selected){\n                    attachFile(props.project.id, k);\n                    \n                }\n    \n            }} open={dialogOpen} onClose={() => openDialog(false)} />\n            <Fab style={{position: 'absolute', bottom: 12, right: 12}} color=\"primary\" onClick={() => openDialog(true)}>\n                <Add />\n            </Fab>\n\n        </div>\n    )\n}","import React from 'react';\n\nexport default function TeamTab(props){\n    return (\n        <div>\n            \n        </div>\n    )\n}","import React from 'react'\nimport {\n    Paper,\n    Typography,\n    Divider\n} from '@material-ui/core';\n\nimport {\n    KeyboardDatePicker\n} from '@material-ui/pickers'\n\nimport { Switch, Route } from 'react-router-dom';\n\nimport DashboardHeader from '../../components/dashboard-header';\nimport ProjectTabs from '../../tabs/project'\nimport { connect } from 'react-redux';\nimport './index.css';\n\nfunction ProjectView(props){\n    const [ project, setProject ] = React.useState({});\n    const [ selectedTab, setSelectedTab ] = React.useState(null)\n\n    React.useEffect(() => {\n        if(props.project && props.project.length > 0){\n            setProject(props.project[0])\n        }\n    }, [props.project])\n\n\n    const tabs = [\"Plan\", \"Calendar\", \"Team\", \"Files\"]\n\n    return [\n        <DashboardHeader \n            tabs={tabs}\n            onTabSelect={(tab) => {\n                setSelectedTab(tab)\n                props.history.push(`${props.match.url}/${tab.toLowerCase()}`)\n            }}\n            selectedTab={selectedTab || props.location.pathname.replace(`${props.match.url}/`, '')}\n            title={project.name} />,\n        <Paper style={{flex: 1, width: '100%', height: 'calc(100vh - 76px)', marginTop: 12, display: 'flex'}}>\n            <Switch>\n                <Route path={`${props.match.url}/plan`} render={(props) => {\n                    return <ProjectTabs.PlanTab {...props} y={props.y} project={project} />\n                }} />\n                <Route path={`${props.match.url}/calendar`} render={(props) => {\n                    return <ProjectTabs.CalendarTab {...props} y={props.y} project={project} />\n                }} />\n                <Route path={`${props.match.url}/team`} render={(props) => {\n                    return <ProjectTabs.TeamTab {...props} project={project} />\n                }} />\n                <Route path={`${props.match.url}/files`} render={(props) => {\n                    return <ProjectTabs.FileTab {...props} project={project} />\n                }} />\n            </Switch>\n        </Paper>\n\n    ]\n}\n\nexport default connect((state, ownProps) => ({\n    project: state.projects.list.filter((a) => a.id == ownProps.match.params.id)\n}))(ProjectView)","import React from 'react';\n\nimport {\n    Forward\n} from '@material-ui/icons'\n\nimport {\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    DialogActions,\n    Button,\n    FormControl,\n    InputLabel,\n    Select,\n    MenuItem,\n    TextField\n} from '@material-ui/core';\n\nimport { getConverters, convertFile } from '../../actions/fileActions';\n\nexport default function ConverterDialog(props){\n    const [ outputFormat, setOutputFormat ] = React.useState('')\n\n    const [ formats, setFormats ] = React.useState([])\n\n    React.useEffect(() => {\n        getConverters().then((converters) => {\n            setFormats(converters.map((x) => ({\n                from: x.sourceFormat,\n                to: [x.targetFormat]\n            })))\n        })\n    }, [])\n\n    const convert = () => {\n        convertFile(props.selected.id, outputFormat.toLowerCase())\n    }\n\n    return (\n        <Dialog fullWidth open={props.open} onClose={props.onClose}>\n            <DialogTitle>Convert {props.selected && props.selected.filename}</DialogTitle>\n            <DialogContent style={{display: 'flex', alignItems: 'center'}}>\n                <TextField \n                    fullWidth \n                    disabled\n                    label=\"From\" \n                    value={props.selected && props.selected.extension.toUpperCase()}/>\n                <Forward style={{marginLeft: 8, marginRight: 8}}/>\n                <FormControl fullWidth>\n                    <InputLabel>To</InputLabel>\n                    <Select value={outputFormat} onChange={(e) => {\n                        setOutputFormat(e.target.value) \n                    }} fullWidth>\n                        {props.selected && (formats.filter((a) => a.from == props.selected.extension)[0] || {to: []}).to.map((x) => (\n                            <MenuItem value={x}>{x.toUpperCase()}</MenuItem>\n\n                        ))}\n                    </Select>\n                </FormControl>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={props.onClose}>Cancel</Button>\n                <Button onClick={convert} color=\"primary\" variant=\"contained\">Start</Button>\n            </DialogActions>\n        </Dialog>\n    )\n}","import React, {useCallback} from 'react';\n\nimport {\n  Add,\n  MoreVert,\n  Contactless,\n  Info\n} from '@material-ui/icons';\n\nimport {\n  Paper,\n  Fab,\n  List,\n  IconButton,\n  ListItem,\n  Divider,\n  Checkbox\n} from '@material-ui/core';\nimport MoreMenu from '../../components/more-menu'\nimport DashboardHeader from '../../components/dashboard-header';\nimport PermissionForm from '../../components/permission-form';\nimport SearchTable from '../../components/search-table';\n\nimport FilePreviewDialog from '../../components/file-preview-dialog';\n\nimport ConverterDialog from '../../components/converter-dialog';\n\nimport { useMutation } from '@apollo/client';\nimport { addFile, CONVERT_FILE, getFiles, UPLOAD_FILE } from '../../actions/fileActions';\nimport {useDropzone} from 'react-dropzone'\nimport { connect } from 'react-redux';\n\nimport './index.css';\n\nfunction Files(props){\n  const [ uploadFile, {data} ] = useMutation(UPLOAD_FILE)\n  const [ convertDoc, setConvertDoc ] = React.useState(null)\n  const [ selectedData, setData ] = React.useState(null)\n\n  const onDrop = useCallback(async (acceptedFiles) => {\n    if(acceptedFiles && acceptedFiles.length > 0){\n      console.log(acceptedFiles)\n      uploadFile({variables: {file: acceptedFiles[0]}}).then((r) => {\n        if(r.data && r.data.uploadFile && !r.data.uploadFile.duplicate){\n          props.addFile(r.data.uploadFile.file)\n        }\n      })\n     \n    }\n    // Do something with the files\n  }, [data])\n\n\n  const {getRootProps, getInputProps, isDragActive} = useDropzone({onDrop, noClick: true})\n\n  const [ files, setFiles ] = React.useState([])\n  const [ viewable ] = React.useState([\"pdf\", \"glb\", \"png\"])\n  React.useEffect(() => {\n    props.getFiles()\n  }, [])\n\n  return [\n    <DashboardHeader \n    tabs={[]}\n    onTabSelect={(tab) => {\n        //setSelectedTab(tab)\n        //props.history.push(`${props.match.url}/${tab.toLowerCase()}`)\n    }}\n    selectedTab={''}\n    title={\"Files\"} />,\n\n    <PermissionForm\n      type={props.type}\n      permissions={props.permissions}\n      >\n        <FilePreviewDialog ipfs={props.ipfs} open={selectedData} file={selectedData} onClose={() => setData(null)} />\n        <ConverterDialog open={convertDoc} selected={convertDoc} onClose={() => setConvertDoc(null)}/>\n        <div className={isDragActive ? 'file-list selected' : 'file-list'} {...getRootProps()} >\n        <input {...getInputProps()} />\n\n        <SearchTable \n          data={props.files}\n          renderItem={(x) => (\n            <div className=\"file-item\">\n              <ListItem button onClick={(e) => {\n                e.stopPropagation();\n                if(viewable.indexOf(x.extension) > -1 ||(x.conversion && viewable.indexOf(x.conversion.extension) > -1)){\n               //   alert(\"Viewable\")\n                  let file = {}\n                  if(viewable.indexOf(x.extension) > -1){\n                    file = {\n                      filename: x.filename,\n                      cid: x.cid,\n                      extension: x.extension\n                    }\n                  }else if(x.conversion && viewable.indexOf(x.conversion.extension) > -1){\n                    file = {\n                      filename: x.filename,\n                      cid: x.conversion.cid,\n                      extension: x.conversion.extension\n                    }\n                  }\n                  setData(file)\n                }\n         \n                /*\n                if(props.ipfs){\n                  const get = async (x) => {\n                    if(props.ipfs){\n                      console.log(x)\n                      let file =  props.ipfs.cat(x.cid)\n                      let data = Buffer.from('')\n                      for await (const chunk of file){\n                        data = Buffer.concat([data, chunk])\n                      }\n                      setData({\n                        filename: x.filename,\n                        extension: x.extension,\n                        content: data\n                      })\n                     // console.log(data)\n                    }\n                    \n                  }\n                  //get(x)*/\n\n                \n              }}>\n                 <Checkbox onClick={(e) => {\n              e.stopPropagation();\n            }}/>  \n            <div style={{ flex: 1, display: 'flex', flexDirection: 'column'}}>\n              <div>{x.filename}</div>\n              <span style={{fontSize: 10}}>{x.cid}</span>\n            </div>\n              </ListItem>\n              <MoreMenu \n              menu={[\n                {\n                  label: \"Convert\",\n                  icon: <Contactless />,\n                  action: () => {\n                    setConvertDoc(x)\n                  }\n                },\n                {\n                  label: \"Get Info\",\n                  icon: <Info />,\n                  action: () => {}\n                }\n              ]} />\n            </div>\n          )}/>\n          </div>\n    </PermissionForm>\n  ]\n}\n\nexport default connect((state) => ({\n  files: state.files.list\n}), (dispatch) => ({\n  addFile: (file) => dispatch(addFile(file)),\n  getFiles: () => dispatch(getFiles())\n}))(Files)\n","import { gql } from '@apollo/client';\nimport GClient from '../graph';\nimport * as types from './types';\n\nconst client = GClient()\n\n\nexport const addBooking = (time, projectId, booking) => {\n    return (dispatch) => {\n    client.mutate({\n        mutation: gql`\n    mutation AddBooking($time: CalendarInput, $projectId: ID, $booking: BookingInput){\n        addBooking(time: $time, projectId: $projectId, booking: $booking){\n            id\n            startTime\n            endTime\n            allDay\n            date\n            project {\n                id \n                name\n            }\n            items {\n                equipment {\n                    name\n                }\n                team {\n                    name\n                }\n            }\n        }\n    }\n  `,\n  variables: {\n      time: time,\n      projectId: projectId,\n      booking: booking\n  }\n}).then((r) => r.data.addBooking).then((r) => {\n    dispatch({type: types.ADD_BOOKING, booking: r})\n})\n    }\n}\n\n  export const getBookings = () => {\n      return (dispatch, getState) => {\n    client.query({\n        query: gql`\n            query GetBookings{\n                calendar{\n                    id\n                    startTime\n                    endTime\n                    allDay\n                    date\n                    project {\n                        id\n                        name\n                    }\n                    items {\n                        equipment{\n                            name\n                        }\n                        team {\n                            name\n\n                        }\n                    }\n                }\n            }\n        `\n    }).then((r) => r.data.calendar).then((r) => {\n        console.log(r)\n        dispatch({type: types.SET_BOOKINGS, bookings: r})\n    })\n}\n  }\n","import React from 'react';\nimport * as Y from 'yjs'\nimport { \n    Dialog,\n    DialogActions,\n    DialogTitle,\n    DialogContent,\n    Button,\n    Checkbox,\n    FormControlLabel,\n    TextField,\n    InputAdornment,\n    Tabs,\n    Tab,\n    List,\n    ListItem,\n    Divider\n} from '@material-ui/core'\n\nimport {\n    Autocomplete\n} from '@material-ui/lab'\n\nimport {\n    Search\n} from '@material-ui/icons';\n\nimport { useMutation } from '@apollo/client';\nimport { addBooking } from '../../actions/calendarActions';\nimport { KeyboardDatePicker, KeyboardTimePicker } from '@material-ui/pickers';\nimport { connect } from 'react-redux';\nimport YActions from '../../graph/yjs';\n\nimport moment from 'moment';\nconst doc = YActions();\n\nlet yDoc; \n\nfunction CalendarDialog(props){\n    \n    const [ step, setStep ] = React.useState(0)\n    const [ searchTab, setSearchTab ] = React.useState(0)\n    const [ search, setSearch ] = React.useState(null)\n\n    const [ date, setDate ] = React.useState(null);\n    const [ allDay, setAllDay ] = React.useState(false);\n    const [ startTime, setStart ] = React.useState(null)\n    const [ endTime, setEnd ] = React.useState(null)\n    const [ project, setProject ] = React.useState(null)\n\n    const [ selectedItems, setSelectedItems ] = React.useState({})\n\n    React.useEffect(() => {\n       yDoc = doc.getMap('calendar')    \n    }, [])\n\n    const stepButton = () => {\n        if(step == 0){\n            setStep(1)\n        }else{\n            //Book items\n            let equipment = [];\n            let team = [];\n\n            for(var k in selectedItems){\n                if(selectedItems[k].selected){\n                    switch(selectedItems[k].type){\n                        case 'team':\n                            team.push(k)\n                            break\n                        case 'equipment':\n                            equipment.push(k)\n                            break;\n                    }\n                }\n            }\n\n            let sTime, eTime;\n            if(startTime){\n                sTime = moment(date)\n                sTime.set('hour', startTime.get('hour'))\n                sTime.set('minute', startTime.get('minute'))\n\n            }\n            if(endTime){\n                eTime = moment(date)\n            \n                eTime.set('hour', endTime.get('hour'))\n                eTime.set('minute', endTime.get('minute'))\n            }\n\n\n            let booking = new Y.Map();\n            let _booking = {\n                date: date.valueOf() / 1000,\n                project: project,\n                startTime: sTime && parseInt(sTime.valueOf() / 1000),\n                endTime: eTime && parseInt(eTime.valueOf() / 1000),\n                allDay: allDay,\n                items: {\n                    team: team,\n                    equipment: equipment\n                }\n            }\n            \n            booking.set('date', _booking.date)\n            booking.set('project', _booking.project)\n\n            if(yDoc){\n                //yDoc.set('bookings', [])\n                console.log(\"Inserting into yjs\")\n                let obj = yDoc.toJSON()\n                let bookings = obj.bookings || [];\n                console.log(bookings)\n                bookings.push(_booking)\n                yDoc.set('bookings', bookings)\n                console.log(yDoc.toJSON())\n            }\n\n            \n\n            /*props.addBooking({\n                    allDay: allDay,\n                    startTime: startTime && parseInt(sTime.valueOf() / 1000),\n                    endTime: endTime && parseInt(eTime.valueOf() / 1000),\n                    date: date.valueOf() / 1000\n                },\n                project.id,\n                {\n                    equipment: equipment,\n                    team: team\n                })*/\n                props.onClose()\n        }\n    }\n\n    \n    const renderStep = () => {\n        switch(step){\n            case 0:\n                return (\n                <>\n                <Autocomplete \n                    value={project}\n                    onChange={(e, newVal) => setProject(newVal)}\n                    options={props.projects}\n                    getOptionLabel={(project) => project.name} \n                    renderInput={(params) => {\n                        return (\n                            <TextField {...params} label=\"Project\"  />\n                        )\n                    }}/>\n                <KeyboardDatePicker \n                    value={date}\n                    format=\"DD/MM/yyyy\"\n                    onChange={(e, newVal) => setDate(e)}\n                    margin=\"normal\" \n                    label=\"Date\" \n                    variant=\"inline\" ></KeyboardDatePicker>\n                <FormControlLabel \n                    control={<Checkbox checked={allDay} onChange={(e) => {\n                        setAllDay(e.target.checked)\n                    }}/>}\n                    label=\"All day\" />\n                {!allDay && <div style={{display: 'flex', marginTop: 8}}>\n                    <KeyboardTimePicker \n                        value={startTime}\n                        onChange={(e) => setStart(e)}\n                        label=\"Start Time\"\n                        fullWidth \n                        style={{marginRight: 4}} \n                        variant=\"inline\" ></KeyboardTimePicker>\n                    <KeyboardTimePicker \n                        value={endTime}\n                        onChange={(e) => setEnd(e)}\n                        label=\"End Time\"\n                        fullWidth \n                        style={{marginLeft: 4}} \n                        variant=\"inline\" ></KeyboardTimePicker>\n                </div>}\n                </>\n                )\n            case 1:\n                return (\n                    \n                        <List>\n                            {(searchTab == 0 ? props.team : props.equipment).filter((a) => !search || a.name.toLowerCase().indexOf(search.toLowerCase()) > -1).map((x) => (\n                                <ListItem>\n                                    <Checkbox checked={selectedItems[x.id] && selectedItems[x.id].selected || false} onChange={(e) => {\n                                        let s = Object.assign({}, selectedItems);\n                                        s[x.id] = {\n                                            selected: e.target.checked,\n                                            type: searchTab == 0 ? \"team\" :\"equipment\"\n                                        } \n                                        console.log(s)\n                                        setSelectedItems(s)  \n                                    }}/>\n                                    {x.name}\n                                </ListItem>\n                            ))}\n                        </List>\n                    \n                )\n            default:\n                return null;\n        }\n    }\n\n    const renderStepTitle = () => {\n        switch(step){\n            case 1:\n                return (\n                    <>\n                    <TextField\n                    value={search}\n                    onChange={(e) => setSearch(e.target.value)} fullWidth InputProps={{\n                        startAdornment: <InputAdornment position=\"start\"><Search /></InputAdornment> \n                    }} label=\"Search\" />\n                    <Tabs value={searchTab} onChange={(e, newVal) => {\n                        if(newVal !== searchTab) setSearch('')\n                        setSearchTab(newVal)\n                    }}>\n                        <Tab label=\"Team\" />\n                        <Tab label=\"Equipment\" />\n                    </Tabs>\n                    <Divider />\n                    \n                    </>\n                )\n            case 0:\n                return \"Create a booking\"\n            default:\n                return null\n        }\n    }\n    return (\n        <Dialog fullWidth open={props.open} onClose={props.onClose}>\n            <DialogTitle>\n                {renderStepTitle()}</DialogTitle>\n            <DialogContent style={{display: 'flex', flexDirection: 'column', minHeight: 250}}>\n                {renderStep()}\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={step == \"0\" ? props.onClose : () => setStep(0)}>{step == \"0\" ? \"Cancel\" : \"Back\"}</Button>\n                <Button color=\"primary\" onClick={stepButton} variant=\"contained\">{step == \"1\" ? \"Book\" : \"Next\"}</Button>\n            </DialogActions>\n        </Dialog>\n    )\n}\n\nexport default connect((state) => ({\n    projects: state.projects.list,\n    team: state.team.list,\n    equipment: state.equipment.list\n}), (dispatch) => ({\n    addBooking: (time, project, booking) => dispatch(addBooking(time, project, booking))\n}))(CalendarDialog)","import React from 'react';\nimport {\n    Paper,\n    Fab\n} from '@material-ui/core';\n\nimport {\n    Add\n} from '@material-ui/icons';\n\nimport DashboardHeader from '../../components/dashboard-header'\nimport CalendarDialog from '../../components/calendar-dialog'\nimport { Calendar, momentLocalizer } from 'react-big-calendar'\nimport moment from 'moment'\nimport { getBookings } from '../../actions/calendarActions';\nimport { connect } from 'react-redux';\nimport YActions from '../../graph/yjs';\nimport 'react-big-calendar/lib/css/react-big-calendar.css'\n\nconst localizer = momentLocalizer(moment)\nconst doc = YActions();\n\nlet yDoc;\n\nfunction CalendarView(props){\n    const [ dialogOpen, openDialog ] = React.useState(false)\n    const [ bookings, setBookings ] = React.useState([])\n\n    const myEventsList = [];\n\n    const tabs = [\"All\", \"Me\", \"Projects\"];\n    \n    const observer = () => {\n        let obj = yDoc.toJSON()\n        if(obj.bookings && obj.bookings.length > 0){\n            setBookings(obj.bookings)\n        }\n    }\n    React.useEffect(() => {\n        yDoc = doc.getMap('calendar')\n        yDoc.observe(observer)\n        \n        let obj = yDoc.toJSON()\n        if(obj.bookings && obj.bookings.length > 0){\n            setBookings(obj.bookings)\n        }\n       // props.getBookings()\n    }, [])\n\n    return [\n        <DashboardHeader \n        tabs={tabs}\n        selectedTab={\"\"}\n        onTabSelect={(tab) => {\n            //setSelectedTab(tab)\n            props.history.push(`${props.match.url}/${tab.toLowerCase()}`)\n        }}\n        title={\"Calendar\"} />,\n        <CalendarDialog y={yDoc} open={dialogOpen} onClose={() => openDialog(false)} />,\n        \n        <Paper style={{\n            position: 'relative',\n            marginTop: 12, \n            height: 'calc(100vh - 84px)', \n            flex: 1,\n            display: 'flex', \n            flexDirection: 'column', \n            padding: 4}}>\n            <Fab onClick={() => openDialog(true)} color=\"primary\" style={{zIndex: 9, position: 'absolute', right: 12, bottom: 12}}>\n                <Add />\n            </Fab>\n            <Calendar\n                localizer={localizer}\n                events={bookings.map((x) => ({\n                    id: x.id,\n                    title: x.project.name,\n                    allDay: x.allDay,\n                    start: new Date((x.startTime || x.date)*1000),\n                    end: new Date((x.endTime || x.date)* 1000)\n                }))}\n                startAccessor=\"start\"\n                endAccessor=\"end\"\n                style={{ flex: 1 }} />\n        </Paper>\n    ]\n}\n\nexport default connect((state) => ({\n    bookings: state.calendar.bookings\n}), (dispatch) => ({\n    getBookings: () => dispatch(getBookings())\n}))(CalendarView)","import React from 'react';\n\nimport {\n  Paper,\n  Divider,\n  Typography,\n  List,\n  Button,\n  ListItem\n} from '@material-ui/core';\n\nimport { getConverters, installConverter } from '../../actions/fileActions';\n\nexport default function Settings(props){\n\n  const [ converters, setConverters ] = React.useState([])\n\n  React.useEffect(() => {\n    getConverters().then((converters) => {\n      console.log(converters)\n      setConverters(converters)\n    })\n  }, [])\n  const connections = [\n    {\n      name: \"MSSQL Server\"\n    }\n  ]\n\n  return (\n    <Paper style={{flex: 1, marginTop: 12}}>\n      <div style={{display: 'flex', flexDirection: 'column', padding: 8}}>\n        <Typography variant=\"h6\" style={{display: 'flex'}}>Add-ons</Typography>\n        <List>\n            {converters.map((x) => (\n              <ListItem style={{display: 'flex', alignItems: 'center', justifyContent: 'space-between'}}>\n                {x.name}\n                {x.installed ? (<Typography>Installed</Typography>): (<Button onClick={() => {\n                  installConverter(x.id)\n                }} color=\"primary\" variant=\"contained\">Install</Button>)}\n              </ListItem>\n            ))}\n        </List>\n    \n      </div>\n      <Divider />\n      <div style={{display: 'flex', flexDirection: 'column', padding: 8}}>\n        <Typography variant=\"h6\" style={{display: 'flex'}}>Connections</Typography>\n        <List>\n            {connections.map((x) => (\n              <ListItem button>{x.name}</ListItem>\n            ))}\n        </List>\n    \n      </div>\n      <Divider />\n    </Paper>\n  );\n}\n","import { gql } from '@apollo/client';\nimport * as types from './types';\nimport GClient from '../graph';\n\nconst client = GClient()\n\nexport const addTeamMember = (member) => {\n  return (dispatch) => {\n    client.mutate({\n      mutation: gql`\n  mutation AddTeamMember($member: TeamMemberInput){\n    addTeamMember(member: $member){\n      id\n      name\n      username\n      email\n      status\n      phoneNumber\n      admin\n    }\n  }\n`,\n      variables: {\n        member: member\n      }\n    }).then((r) => r.data.addTeamMember).then((r) => {\n      dispatch({type: types.ADD_TEAM_MEMBER, newMember: r})\n    })\n  }\n}\n\nexport const updateTeamMember = (memberId, member) => {\n  return (dispatch) => {\n     client.mutate({\n       mutation: gql`\n  mutation UpdateTeam($memberId: String, $member: TeamMemberInput){\n    updateTeamMember(memberId: $memberId, member: $member){\n      name\n      email\n      phoneNumber\n      admin\n    }\n  }\n`,\n    variables: {\n      memberId: memberId,\n      member: member\n    }\n  }).then((r) => r.data.updateTeamMember).then((r) => {\n    dispatch({type: types.UPDATE_TEAM_MEMBER, member: member, id: memberId})\n  })\n  }\n}\n\nexport const removeTeamMember = (id) => {\n  return (dispatch, getState) => {\n    return client.mutate({\n      mutation: gql`\n        mutation RemoveMember($memberId: ID){\n          removeTeamMember(memberId: $memberId)\n        }\n      `,\n      variables: {\n        memberId: id\n      }\n    }).then((r) => r.data.removeTeamMember).then((r) => {\n      dispatch({type: types.REMOVE_TEAM_MEMBER, id: id})\n    })\n  }\n}\n\nexport const getTeam = () => {\n  return (dispatch) => {\n    return client.query({\n      query: gql`\n        query GetTeam {\n          team {\n            id\n            status\n            name\n            username\n            password\n            phoneNumber\n            email\n            admin\n          }\n        }\n      `\n    }).then((r) => r.data.team).then((r) => {\n      dispatch({type: types.SET_TEAM, team: r})\n    })\n  }\n}\n","import React from 'react';\n\nimport {\n  Paper,\n  Typography,\n  List,\n  ListItem\n} from '@material-ui/core';\n\nimport {\n  SupervisedUserCircle,\n  SupervisorAccount,\n  Schedule,\n  Edit,\n  Delete,\n  Share\n} from '@material-ui/icons';\n\nimport DashboardHeader from '../../components/dashboard-header';\nimport SearchTable from '../../components/search-table';\nimport { useMutation } from \"@apollo/client\";\nimport { removeTeamMember, addTeamMember, updateTeamMember, getTeam } from '../../actions/teamActions';\nimport PermissionForm from '../../components/permission-form';\nimport MoreMenu from '../../components/more-menu';\nimport { connect } from 'react-redux';\nimport jwt_decode from 'jwt-decode'\nimport './index.css';\n\nfunction Teams(props){\n  const [ selected, setSelected ] = React.useState(null)\n\n  React.useEffect(() => {\n    props.getTeam()\n  }, [])\n\n  console.log(props.user)\n\n  return [\n    <DashboardHeader \n    tabs={[]}\n    onTabSelect={(tab) => {\n       // setSelectedTab(tab)\n      //  props.history.push(`${props.match.url}/${tab.toLowerCase()}`)\n    }}\n    selectedTab={''}\n    title={\"Team\"} />,\n    <PermissionForm \n      onSave={(data) => {\n        if(data.id){\n          let d = Object.assign({}, data);\n          delete d.id;\n          props.updateTeamMember(data.id, d)\n      \n        }else{\n          props.addTeamMember(data)\n        }\n      }}\n      onClose={() => setSelected(null)} \n      selected={selected}\n      type={props.type} \n      permissions={props.permissions}>\n      <SearchTable \n        data={props.team}\n        renderItem={(item) => (\n          <div className=\"team-item\">\n          <ListItem button >\n            {item.status == \"pending\" ? <Schedule /> : item.admin ? <SupervisorAccount /> : <SupervisedUserCircle />}\n            <Typography style={{marginLeft: 12}}>\n              {item.name}\n            </Typography>\n          </ListItem>\n          <MoreMenu \n            menu={[\n            ].concat(item.status == \"pending\" ? [\n              {\n                icon: <Share />,\n                label: \"Share Signup\",\n                action: () => {}\n              }\n            ] : []).concat(props.user.admin ? [{\n              label: \"Edit\",\n              icon: <Edit />,\n              action: () => setSelected(item)\n            },\n            {\n              label: \"Delete\",\n              color: 'red',\n              icon: <Delete />,\n              action: () => props.removeTeamMember(item.id)\n            }] : [])} />\n          </div>\n        )} />\n    </PermissionForm>\n  ]\n}\n\nexport default connect((state) => ({\n  user: jwt_decode(state.auth.token),\n  team: state.team.list,\n  type: state.dashboard.types.filter((a) => a.name == \"Team Members\"),\n  permissions: state.dashboard.permissions.filter((a) => a.type == \"Team Members\")\n}), (dispatch) => ({\n  getTeam: () => dispatch(getTeam()),\n  addTeamMember: (member) => dispatch(addTeamMember(member)),\n  removeTeamMember: (id) => dispatch(removeTeamMember(id)),\n  updateTeamMember: (id, member) => dispatch(updateTeamMember(id, member))\n}))(Teams)\n","import { gql } from '@apollo/client';\nimport * as types from './types';\nimport GClient from '../graph';\n\nconst client = GClient()\n\nexport const addEquipment = (equipment) => {\n  return (dispatch) => {\n    client.mutate({\n      mutation: gql`\n  mutation AddEquipment($equipment: EquipmentInput){\n    addEquipment(equipment: $equipment){\n      id\n      name\n      type\n      description\n    }\n  }\n`,\n    variables: {\n      equipment: equipment\n    }\n  }).then((r) => r.data.addEquipment).then((r) => {\n    dispatch({type: types.ADD_EQUIPMENT, newItem: r})\n  })\n}\n}\n\nexport const updateEquipment = (id, equipment) => {\n  console.log(id, equipment)\n  return (dispatch) => {\n    return client.mutate({\n      mutation:  gql`\n      mutation UpdateEquipment($equipmentId: String, $equipment: EquipmentInput){\n        updateEquipment(equipmentId: $equipmentId, equipment: $equipment){\n          name\n          type\n          description\n        }\n      }\n    `,\n    variables: {\n      equipmentId: id,\n      equipment\n    }\n    }).then((r) => r.data.updateEquipment).then((r) => {\n      dispatch({type: types.UPDATE_EQUIPMENT, equipment, id})\n    })\n  }\n}\n\nexport const removeEquipment = (id) => {\n  return (dispatch) => {\n    return client.mutate({\n      mutation: gql`\n        mutation RemoveEquipment($id: String){\n          removeEquipment(equipmentId: $id)\n        }\n      `,\n      variables: {\n        id: id\n      }\n    }).then((r) => r.data.removeEquipment).then((r) => {\n      dispatch({type: types.REMOVE_EQUIPMENT, id: id})\n    })\n  }\n}\n\n\nexport const getEquipment = () => {\n  return (dispatch) => {\n    return client.query({\n      query: gql`\n        query GetEquipment {\n          equipment {\n            id\n            name\n            type\n            description\n          }\n        }\n      `\n    }).then((r) => r.data.equipment).then((r) => {\n      dispatch({type: types.SET_EQUIPMENT, equipment: r})\n    })\n  }\n \n}\n","import React from 'react';\n\nimport {\n  Paper,\n  List,\n  ListItem,\n  Typography\n} from '@material-ui/core';\n\nimport DashboardHeader from '../../components/dashboard-header';\nimport SearchTable from '../../components/search-table';\nimport PermissionForm from '../../components/permission-form';\nimport { connect } from 'react-redux';\nimport { removeEquipment, getEquipment, updateEquipment, addEquipment } from '../../actions/equipmentActions';\nimport MoreMenu from '../../components/more-menu';\nimport jwt_decode from 'jwt-decode';\nimport './index.css';\n\nfunction Equipment(props){\n  const [ selected, setSelected] = React.useState(null)\n\n  React.useEffect(() => {\n    props.getEquipment()\n  }, [])\n\n  return [\n    <DashboardHeader \n    tabs={[...new Set(props.equipment.filter((a) => a.type).map((x) => x.type))]}\n    onTabSelect={(tab) => {\n        //setSelectedTab(tab)\n        //props.history.push(`${props.match.url}/${tab.toLowerCase()}`)\n    }}\n    selectedTab={''}\n    title={'Equipment'} />,\n    <PermissionForm \n      onSave={(data) => {\n        if(data.id){\n          let d = Object.assign({}, data);\n          console.log(data)\n          delete d.id;\n          props.updateEquipment(data.id, d)\n        }else{\n          props.addEquipment(data)\n        }\n      }}\n      onClose={() => setSelected(null)}\n      selected={selected} \n      type={props.type} \n      permissions={props.permissions}>\n    <SearchTable\n      data={props.equipment}\n      renderItem={(item) => (\n        <div className=\"equipment-item\">\n        <ListItem button onClick={(e) => {\n        }}>\n          <Typography variant=\"subtitle1\" style={{flex: 1}}>{item.name}</Typography>\n        </ListItem>\n          <MoreMenu\n            menu={[\n            ].concat(props.user.admin ? [\n              {\n                label: \"Edit\",\n                action: () => setSelected(item)\n              },\n              {\n                label: \"Delete\",\n                color: 'red',\n                action: () => props.removeEquipment(item.id)\n              }\n            ] : [])} />\n        </div>\n\n      )} />\n      </PermissionForm>\n  ]\n}\nexport default connect((state) => ({\n  user: jwt_decode(state.auth.token),\n  equipment: state.equipment.list,\n  type: state.dashboard.types.filter((a) => a.name ==\"Equipment\"),\n  permissions: state.dashboard.permissions.filter((a) => a.type == \"Equipment\")\n}), (dispatch) => ({\n  getEquipment: () => dispatch(getEquipment()),\n  addEquipment: (equipment) => dispatch(addEquipment(equipment)),\n  updateEquipment: (id, equipment) => dispatch(updateEquipment(id, equipment)),\n  removeEquipment: (id) => dispatch(removeEquipment(id))\n}))(Equipment)\n","import React from 'react'\n\nimport { NodeWrapper, withEditor } from 'react-hive-flow';\nimport  ReactJson from 'react-json-view'\nexport const type = 'typeDef'\n\nexport const modal = withEditor((props) => {\n\n  return (\n    <div style={{flex: 1}}>\n      <ReactJson src={props.node.data.typedef} />\n    </div>\n  )\n})\n\nexport const node = withEditor((props) => {\n    return (\n    <NodeWrapper {...props}>\n      <div style={{padding: 8}} className=\"type-def\">\n        {props.data.label}\n     </div>\n    </NodeWrapper>\n    )\n})","import * as types from './types';\nimport { gql } from '@apollo/client';\n\nimport GClient from '../graph';\n\nconst client = GClient()\n\nexport const UPDATE_INTEGRATION_MAP = gql`\n  mutation UpdateIntegrationMap($nodes: [MapNodeInput], $links: [MapLinkInput]){\n    updateIntegrationMap(nodes: $nodes, links: $links){\n      nodes{\n        id\n        type\n        data\n        position{\n          x\n          y\n        }\n      }\n      links{\n        id\n        target\n        source\n      }\n    }\n  }\n`\n\nexport const getPermissions = () => {\n  return (dispatch) => {\n    return client.query({\n      query: gql`\n      query GetPermissions{\n        typePermissions{\n          type\n          create\n          read\n          update\n          delete\n        }\n      }\n      `\n    }).then((r) => r.data.typePermissions).then((r) => {\n      console.log(r)\n      dispatch({type: types.SET_DASHBOARD_PERMS, perms: r})\n    })\n  }\n}\n\nexport const getIntegrationMap = () => {\n  return client.query({\n    query: gql`\n      query GetIntegrations{\n        integrationMap{\n          nodes{\n            id\n            type\n            data\n            position{\n              x\n              y\n            }\n          }\n          links{\n            id\n            target\n            source\n          }\n        }\n      }\n    `\n  }).then((r) => r.data.integrationMap)\n}\n\nexport const getTypes = () => {\n  return (dispatch, getState) => {\n    return client.query({\n      query: gql`\n        query GetTypes{\n          adminTypes{\n            name\n            typeDef\n          }\n        }\n      `\n    }).then((r) => r.data.adminTypes).then((r) => {\n      console.log(r)\n      dispatch({type: types.SET_DASHBOARD_TYPES, types: r})\n    })\n  }\n \n}\n\nexport const getTables = (store) => {\n    return client.query({\n      query: gql`\n        query GetLayout{\n          connectionLayout(storeId: \"${store}\"){\n            name\n          }\n        }\n      `\n    }).then((r) => {\n      return r.data.connectionLayout;\n    })\n}\n\nexport const getColumns = (store, table) => {\n    return client.query({\n        query: gql`\n          query GetProjects {\n            bucketLayout(storeId: \"${store}\", bucketId: \"${table}\"){\n              name\n              datatype\n            }\n          }\n        `\n      }).then((r) => {\n        return r.data.bucketLayout;\n      })\n}\n\nexport const getViews = () => {\n    return client.query({\n        query: gql`\n          query GetProjects {\n            getSQLViews{\n              name\n            }\n          }\n        `\n      }).then((r) => {\n        return r.data.getSQLViews;\n      })\n}\n","import React from 'react'\n\nimport {\n  Autocomplete\n} from '@material-ui/lab';\n\nimport {\n    TextField\n} from '@material-ui/core';\n\nimport { NodeWrapper, withEditor } from 'react-hive-flow';\n\nimport { getColumns, getTables, getViews } from '../actions/adminActions'\nimport async from 'async';\nimport './MSSQLNode.css';\n\nexport const type = 'mssqlAdapter'\n\nexport const modal = withEditor((props) => {\n\n  const [ tables, setTables ] = React.useState([])\n\n  const [ table, setTable ] = React.useState(null)\n\n  const [ columns, setColumns ] = React.useState([])\n\n  React.useEffect(() => {\n    let source = getSource();\n    getTables(source.id).then((tables) => {\n      setTables(tables)\n    })\n    console.log(getSource())\n  }, [])\n\n  const getSource = () => {\n      let links = props.editor.links.filter((a) => a.source == props.node.id)\n      if(links && links.length > 0){\n        let nodes = links.map((x) => props.editor.nodes.filter((a) => a.id == x.target)[0])\n        if(nodes && nodes.length > 0){\n            return nodes[0]\n        }\n      }\n  }\n\n  const renderFields = () => {\n    let links = props.editor.links.filter((a) => a.target == props.node.id)\n    if(links && links.length > 0){\n        let nodes = links.map((x) => props.editor.nodes.filter((a) => a.id == x.source)[0])\n        if(nodes && nodes.length > 0){\n            let type = nodes[0].data.typedef;\n            let ret = []\n            for(var k in type){\n                let changeKey = k\n                ret.push(\n                <div style={{marginTop: 4, display: 'flex', alignItems: 'center'}}>\n                    <div style={{width: 100}}>\n                      {k}\n                    </div>: \n                    <select \n                      value={props.node && props.node.data && props.node.data.provides && props.node.data.provides[k]}\n                      onChange={(e) => {\n                    \n                        props.editor.updateNode(props.node.id, (node) => {\n                          if(!node.data.provides) node.data.provides = {}\n                          console.log(e.target.value, \" provides \", changeKey)\n                          node.data.provides[changeKey] = e.target.value;\n                          return node;\n                        })\n                      }}>\n                      {(props.node.data.availableColumns || []).concat([{name: \"N/A\"}]).map((x) => (\n                        <option value={x.name}>\n                          {x.name}\n                        </option>))}\n                      </select>\n                </div>\n                )\n            }\n            return ret;\n        }\n    }\n  }\n\n  return (\n    <div style={{display: 'flex', flex: 1, flexDirection: 'column'}}>\n        <TextField disabled error={!getSource()} label=\"Connection Name\" value={getSource().data.label}/>\n\n        <Autocomplete \n          value={props.node.data.table}\n          onChange={(e, newVal) => {\n            console.log(e, newVal)\n            if(newVal && newVal.name){\n           // setTable(newVal)\n              props.editor.updateNode(props.node.id, (node) => {\n                node.data.table = newVal;\n                return node;\n              })\n              getColumns(getSource().id, newVal.name).then((r) => {\n                console.log(\"Searching for cols\", newVal.name, r)\n                props.editor.updateNode(props.node.id, (node) => {\n                  node.data.availableColumns = r;\n                  node.data.provides = {}\n                  return node;\n                })\n              })\n            }\n          }}\n          options={tables}\n          getOptionLabel={(x) => x.name}\n          autoHighlight\n          renderInput={(params) => (\n            <TextField {...params} margin=\"normal\" label=\"Table\" />\n          )} />\n        <div style={{marginTop: 8}}>\n        {renderFields()}\n        </div>\n    </div>\n  )\n})\n\nexport const node = withEditor((props) => {\n    return (\n    <NodeWrapper {...props}>\n      <div style={{padding: 8}} className=\"mssql-adapter\">\n        <div className=\"adapter-header\">\n        {props.data.label || \"MSSQL Adapter\"}\n        </div>\n        <div className=\"adapter-info\">\n          {props.data && props.data.table && props.data.table.name}\n        </div>\n     </div>\n    </NodeWrapper>\n    )\n})","import React from 'react'\n\nimport {\n    TextField\n} from '@material-ui/core';\n\nimport { NodeWrapper, withEditor } from 'react-hive-flow';\n\nexport const type = 'mssql server'\n\nexport const modal = withEditor((props) => {\n\n  return (\n    <div style={{display: 'flex', flex: 1, flexDirection: 'column'}}>\n        <TextField label=\"Connection Name\" value={props.node.data.label} onChange={(e) => {\n            props.editor.updateNode(props.node.id, (node) => {\n                node.data.label = e.target.value;\n                return node;\n            })\n        }}/>\n        <TextField label=\"Host IP:Host Port\" value={props.node.data.host} onChange={(e) => {\n          props.editor.updateNode(props.node.id, (node) => {\n            node.data.host = e.target.value;\n            return node;\n          })\n        }}/>\n        <TextField label=\"Database Name\" value={props.node.data.db} onChange={(e) => {\n          props.editor.updateNode(props.node.id, (node) => {\n            node.data.db = e.target.value;\n            return node;\n          })\n        }}/>\n        <TextField label=\"Username\" value={props.node.data.username} onChange={(e) => {\n          props.editor.updateNode(props.node.id, (node) => {\n            node.data.username = e.target.value;\n            return node;\n          })\n        }}/>\n        <TextField label=\"Password\" type=\"password\" value={props.node.data.password} onChange={(e) => {\n          props.editor.updateNode(props.node.id, (node) => {\n            node.data.password = e.target.value;\n            return node;\n          })\n        }} />\n    </div>\n  )\n})\n\nexport const node = withEditor((props) => {\n    return (\n    <NodeWrapper {...props}>\n      <div style={{padding: 8}} className=\"mssql-adapter\">\n        {props.data.label || \"MSSQL Server\"}\n     </div>\n    </NodeWrapper>\n    )\n})","import React from 'react';\n\nimport { cloneDeep } from 'lodash';\nimport * as TypeDefNode from '../../nodes/TypeDefNode'\nimport * as MSSQLNode from '../../nodes/MSSQLNode';\nimport * as MSSQLServer from '../../nodes/MSSQLServerNode';\n\nimport { useMutation } from '@apollo/client';\nimport { getTypes, getIntegrationMap, UPDATE_INTEGRATION_MAP} from '../../actions/adminActions'\nimport { connect } from 'react-redux';\nimport HiveEditor from 'react-hive-flow';\nimport 'react-hive-flow/dist/index.css';\nimport './index.css'\n\nfunction Admin(props){\n\n    React.useEffect(() => {\n        props.getTypes()\n        \n    }, [])\n\n\n    const [ updateIntegrationMap, {data}] = useMutation(UPDATE_INTEGRATION_MAP)\n       \n    const [ nodes, setNodes ] = React.useState([])\n    const [ links, setLinks ] = React.useState([])\n\n    React.useEffect(() => {\n        getIntegrationMap().then((integrations) => {\n            if(integrations.nodes) setNodes(integrations.nodes.map((x) => {\n                let y = cloneDeep(x)\n                delete y.__typename;\n                delete y.position.__typename;\n                return y;\n            }).slice());\n            if(integrations.links) setLinks(integrations.links.map((x) => {\n                let y = cloneDeep(x)\n                delete y.__typename;\n                return y;\n            }).slice());\n        })\n    }, [])\n\n    return (\n        <div className=\"admin-view\">\n        <HiveEditor\n            nodeTypes={[TypeDefNode, MSSQLNode, MSSQLServer]}\n            nodes={(props.types||[]).concat(nodes)}\n            links={links}\n            onNodeChange={(nodes) => {\n                let n = nodes.filter((a) => props.types.map((x) => x.id).indexOf(a.id) < 0)\n                updateIntegrationMap({variables: {\n                    nodes: n,\n                    links: links\n                }})\n                setNodes(n)\n            }}\n            onLinkChange={(link) => {\n                updateIntegrationMap({variables: {\n                    nodes: nodes,\n                    links: link\n                }})\n                setLinks(link)\n            }} />\n        </div>\n    )\n}\n\nexport default connect(\n    (state) => ({\n        types: (state.dashboard.types||[]).map((x, ix) => ({\n            id: x.name.toLowerCase(),\n            type: 'typeDef',\n            data: {\n                label: x.name,\n                typedef: x.typeDef\n            },\n            position: {\n                x: 200 + (ix * 200),\n                y: 300\n            },\n            draggable: false\n        }))\n    }),\n    (dispatch) => ({\n        getTypes: () => dispatch(getTypes())\n    })\n)(Admin)","import React from 'react';\n\nimport {\n    Drawer,\n    List,\n    ListItem,\n    Divider,\n} from '@material-ui/core';\n\nimport {\n    Notifications,\n    AccountTree,\n    Dashboard,\n    CalendarToday,\n    SupervisorAccount,\n    BusinessCenter,\n    Description,\n    Settings\n  } from '@material-ui/icons';\n\nimport { withRouter } from 'react-router-dom'\n\nfunction Sidebar(props){\n    const menu = [\n        {\n          icon: <Dashboard />,\n          label: \"Dashboard\",\n          path: \"\"\n        },\n        {\n          icon: <CalendarToday />,\n          label: \"Calendar\",\n          path: \"/calendar\"\n        },\n        {\n          icon: <AccountTree />,\n          label: \"Projects\",\n          path: \"/projects\"\n        },\n        {\n          icon: <SupervisorAccount />,\n          label: \"Team\",\n          path: \"/team\"\n        },\n        {\n          icon: <BusinessCenter /> ,\n          label: \"Equipment\",\n          path: \"/equipment\"\n        },\n        {\n          icon: <Description />,\n          label: \"Files\",\n          path: \"/files\"\n        },\n      ]\n\n    return (\n        <Drawer variant=\"permanent\" style={{width: 200}}>\n        <List style={{flex: 1, width: 200}}> \n        <ListItem style={{color: 'teal', padding: 12, fontSize: 20}}>\n           <img src=\"/assets/teal.png\" style={{height: 33, marginRight: 8}} /> WorkHub\n        </ListItem>\n        <Divider />\n        {menu.map((x, ix) => (\n            <ListItem \n            className={menu.map((x) => x.path).indexOf(window.location.pathname.split(props.match.url)[1]) == ix ? 'selected menu-item': 'menu-item'}\n            onClick={() => props.history.push(`${props.match.url}${x.path}`)}\n            button >{x.icon} {x.label}</ListItem>\n        ))}\n        </List>\n        <Divider />\n        <ListItem button onClick={() => props.history.push(`${props.match.url}/settings`)}>\n            <Settings style={{marginRight: 12}} />\n            Settings\n        </ListItem>\n        </Drawer>\n    )\n}\n\nexport default withRouter(Sidebar)","import React from 'react';\n\nimport {\n  Drawer,\n  List,\n  Divider,\n  ListItem,\n  Paper,\n  Typography,\n  Tabs,\n  Tab\n} from '@material-ui/core';\n\nimport {\n  Notifications,\n  AccountTree,\n  Dashboard,\n  CalendarToday,\n  SupervisorAccount,\n  BusinessCenter,\n  Description,\n  Settings\n} from '@material-ui/icons';\n\nimport { connect } from 'react-redux';\n\nimport Projects from '../../views/Projects';\nimport ProjectView from '../../views/ProjectView';\n\nimport Files from '../../views/Files';\nimport Calendar from '../../views/Calendar';\nimport SettingsView from '../../views/Settings';\nimport Teams from '../../views/Team';\nimport Equipment from '../../views/Equipment';\nimport AdminView from '../../views/Admin';\nimport qs from 'qs';\nimport jwt_decode from 'jwt-decode';\nimport { Switch, Route } from 'react-router-dom';\n\nimport IPFS from 'ipfs';\n\nimport { getTypes, getPermissions } from '../../actions/adminActions'\nimport Sidebar from '../../components/sidebar';\nimport YActions from '../../graph/yjs';\n\nimport './index.css';\n\nconst doc = YActions()\n\nfunction DashboardController(props){\n  let query_string = qs.parse(props.location.search, {ignoreQueryPrefix: true})\n\n  const currentPath = window.location.pathname.replace(/\\/dashboard/g, '')\n\n  const [ ipfsNode, setIPFS ] = React.useState(null)\n\n  React.useEffect(async () => {\n    props.getTypes()\n    props.getPermissions()\n    let node;\n    if(!ipfsNode){\n      node = await IPFS.create()\n    setIPFS(node)\n    }\n  \n    //console.log(await node.id())\n\n    return async () => {\n      await (ipfsNode || node).stop()\n    }\n  }, [])\n\n  const renderTitle = () => {\n    switch(currentPath){\n      case '':\n      case '/':\n        return \"Dashboard\";\n      case '/calendar':\n        return \"Calendar\"\n      case '/projects':\n        return \"Projects\"\n      case '/team':\n        return \"Team\";\n      case '/equipment':\n        return \"Equipment\"\n      case '/files':\n        return \"Files\";\n    }\n  }\n\n  const renderActionBlock = () => {\n    console.log(currentPath)\n    switch(currentPath){\n      case '/projects':\n        let project_set = [...new Set(props.projects.map((x) => x.status))]\n        console.log(project_set)\n        return (\n        <Tabs value={project_set.indexOf(query_string.status)}>\n          {project_set.map((x) => (\n            <Tab label={x} onClick={() => {\n              query_string.status = x;\n            props.history.push(`${props.location.pathname}?${qs.stringify(query_string)}`)\n          }}/>\n          ))}\n        </Tabs>\n        )\n      default:\n        return null;\n    }\n  }\n\n  return (\n    <div className=\"dashapp\">\n      <Sidebar match={props.match} />\n      <div className=\"dashapp-body\">\n\n        <Switch>\n          <Route path={`${props.match.url}/calendar`} render={(props) => (\n            <Calendar {...props} y={doc} />\n          )} />\n          <Route path={`${props.match.url}/projects`} component={Projects} exact />\n          <Route path={`${props.match.url}/projects/:id`} render={(props) => (\n            <ProjectView {...props} y={doc}/>\n          )} />\n          <Route path={`${props.match.url}/files`} render={(props) => {\n            return <Files {...props} ipfs={ipfsNode} />\n          }} />\n          <Route path={`${props.match.url}/team`} component={Teams} />\n          <Route path={`${props.match.url}/equipment`} component={Equipment} />\n          <Route path={`${props.match.url}/settings`} component={SettingsView} />\n          <Route path={`${props.match.url}/admin`} component={AdminView} />\n        </Switch>\n      </div>\n    </div>\n  );\n}\n\nexport default connect((state) => ({\n  projects: state.projects.list,\n  user: jwt_decode(state.auth.token)\n}), (dispatch) => ({\n  getTypes: () => dispatch(getTypes()),\n  getPermissions: () => dispatch(getPermissions())\n}))(DashboardController)\n","import * as types from './types';\nimport { gql } from '@apollo/client';\n\nexport const LOGIN = gql`\n    mutation Login($username: String, $password: String){\n        login(username: $username, password: $password){\n            token\n            error\n        }\n    }\n`\n\nexport const getQuote = () => {\n    return fetch('https://zenquotes.io/api/today').then((r) => r.json())\n}\n\nexport const setToken = (token) => {\n    return (dispatch) => {\n        dispatch({type: types.SET_TOKEN, token: token})\n    }\n}","import React from 'react';\n\nimport {\n    TextField,\n    Button,\n    Paper,\n    Typography,\n    Divider\n} from '@material-ui/core'\n\nimport { useMutation } from '@apollo/client';\nimport { getQuote, LOGIN, setToken } from '../../actions/authActions';\nimport { connect } from 'react-redux';\n\nimport './index.css';\n\nfunction Login(props){\n    const [ quote, setQuote ] = React.useState({})\n    const [ error, setError ] = React.useState(null)\n    const [ username, setUsername ] = React.useState('')\n    const [ password, setPassword ] = React.useState('')\n\n    const [ doLogin ] = useMutation(LOGIN)\n\n    const login = () => {\n        doLogin({variables: {\n            username: username,\n            password: password\n        }}).then((r) => {\n            if(r.data.login && r.data.login.token){\n                props.setToken(r.data.login.token)\n                props.history.push('/dashboard')\n            }else if(r.data.login && r.data.login.error){\n                setError(r.data.login.error)\n            }\n        })\n    }\n\n    React.useEffect(() => {\n        getQuote().then((quote) => {\n            setQuote(quote)\n        })\n    })\n\n    return (\n        <div className=\"login-view\">\n            <div className=\"image-banner\">\n                <div className=\"quotes\">\n                <span>\n                    {quote.q}\n                </span>\n                <span>{quote.a}</span>\n                </div>\n            </div>\n            <Paper style={{display: 'flex', flex: 0.3, flexDirection: 'column', padding: 8}}>\n                <div style={{display: 'flex', alignItems: 'center', paddingBottom: 8}}>\n                    <img style={{height: 70, marginRight: 12}} src=\"/assets/teal.png\" />\n                    <Typography style={{color: 'teal'}} variant=\"h4\">WorkHub</Typography>\n\n                </div>\n                <Divider style={{marginBottom: 22}} />\n            <TextField \n                error={error}\n                label=\"Username\" \n                value={username} \n                onChange={(e) => setUsername(e.target.value)}/>\n            <TextField \n                error={error}\n                label=\"Password\" \n                type=\"password\" \n                value={password} \n                onKeyDown={(e) => {if(e.keyCode == 13) {login()}}}\n                onChange={(e) => setPassword(e.target.value)}/>\n            <Button \n                onClick={login}\n                style={{marginTop: 33}} \n                color=\"primary\" \n                variant=\"contained\">Login</Button>\n            </Paper>\n\n        </div>\n    )\n}\n\nexport default connect(null, (dispatch) => ({\n    setToken: (token) => dispatch(setToken(token))\n}))(Login)","import * as types from '../actions/types';\n\nconst init = {\n  list: []\n}\n\nlet updated;\n\nexport default function projectReducer(state = init, action={}){\n  switch(action.type){\n    case types.SET_PROJECTS:\n      return {\n        ...state,\n        list: action.projects\n      }\n    case types.REMOVE_PROJECT:\n      updated = state.list.slice()\n      let pIx = updated.map((x) => x.id).indexOf(action.id)\n      updated.splice(pIx, 1)\n      return {\n        ...state,\n        list: updated\n      }\n    case types.ADD_PROJECT:\n      return {\n        ...state,\n        list: state.list.concat([action.newProject])\n      }\n    case types.UPDATE_PROJECT:\n      updated = state.list.slice()\n      let ix = updated.map((x) => x.id).indexOf(action.id)\n      updated[ix] = {\n        ...updated[ix],\n        ...action.project\n      }\n      return {\n        ...state,\n        list: updated\n      }\n    default:\n      return state;\n  }\n}\n","import * as types from '../actions/types';\n\nconst INIT = {\n    permissions: [],\n    types: []\n}\n\nexport default function dashboardReducer(state = INIT, action = {}){\n    switch(action.type){\n        case types.SET_DASHBOARD_PERMS:\n            return {\n                ...state,\n                permissions: action.perms\n            }\n        case types.SET_DASHBOARD_TYPES:\n            return {\n                ...state,\n                types: action.types\n            }\n        default:\n            return state;\n    }\n}","import * as types from '../actions/types';\n\nconst INIT = {\n  list: []\n}\n\nexport default function fileReducer(state = INIT, action = {}){\n  switch(action.type){\n    case types.SET_FILES:\n      return {\n        ...state,\n        list: action.files\n      }\n    case types.ADD_FILE:\n      return {\n        ...state,\n        list: state.list.concat([action.file])\n      }\n    default:\n      return state;\n  }\n}\n","import * as types from '../actions/types';\n\nconst INIT = {\n    token: null\n}\n\nexport default function authReducer(state = INIT, action = {}){\n    switch(action.type){\n        case types.SET_TOKEN:\n            return {\n                token: action.token\n            }\n        default:\n            return state;\n    }\n}","import * as types from '../actions/types';\n\nconst INIT = {\n    list: []\n}\n\nlet updated;\nexport default function equipmentReducer(state = INIT, action={}){\n    switch(action.type){\n        case types.SET_EQUIPMENT:\n            return {\n                ...state,\n                list: action.equipment\n            }\n        case types.ADD_EQUIPMENT:\n            return {\n                ...state,\n                list: state.list.concat([action.newItem])\n            }\n        case types.UPDATE_EQUIPMENT:\n            updated = state.list.slice()\n            let ix = updated.map((x) => x.id).indexOf(action.id)\n            updated[ix] = {\n                ...updated[ix],\n                ...action.equipment\n            }\n            return {\n                ...state,\n                list: updated\n            }\n        case types.REMOVE_EQUIPMENT:\n            updated = state.list.slice()\n            let eIx = updated.map((x) => x.id).indexOf(action.id)\n            updated.splice(eIx, 1)\n            return {\n                ...state,\n                list: updated\n            }\n        default:\n            return state;\n    }\n}","import * as types from '../actions/types'\n\nconst INIT = {\n    list: []\n}\n\nlet updated, tIx;\n\nexport default function teamReducer(state = INIT, action = {} ){\n    switch(action.type){\n        case types.SET_TEAM:\n            return {\n                ...state,\n                list: action.team\n            }\n        case types.ADD_TEAM_MEMBER:\n            return {\n                ...state,\n                list: state.list.concat([action.newMember])\n            }\n        case types.UPDATE_TEAM_MEMBER:\n            updated = state.list.slice()\n            tIx = updated.map((x) => x.id).indexOf(action.id)\n            updated[tIx] = {\n                ...updated[tIx],\n                ...action.member\n            }\n            return {\n                ...state,\n                list: updated\n            }\n        case types.REMOVE_TEAM_MEMBER:\n            updated = state.list.slice()\n            tIx = updated.map((x) => x.id).indexOf(action.id)\n            updated.splice(tIx, 1)\n            return {\n                ...state,\n                list: updated\n            }\n        default:\n            return state;\n    }\n}","import * as types from '../actions/types';\n\nconst INIT = {\n    bookings: []\n}\n\nexport default function calendarReducer(state = INIT, action = {}){\n    switch(action.type){\n        case types.SET_BOOKINGS:\n            return {\n                ...state,\n                bookings: action.bookings\n            }\n        case types.ADD_BOOKING:\n            return {\n                ...state,\n                bookings: state.bookings.concat([action.booking])\n            }\n        default:\n            return state;\n    }\n}","import { combineReducers } from 'redux';\n\nimport projects from './projects';\nimport dashboard from './dashboard';\nimport files from './files';\nimport auth from './auth';\nimport equipment from './equipment';\nimport team from './team';\nimport calendar from './calendar';\n\nexport default combineReducers({\n  projects,\n  auth,\n  files,\n  calendar,\n  dashboard,\n  equipment,\n  team\n})\n","import { createStore, applyMiddleware } from 'redux';\nimport thunk from 'redux-thunk';\nimport { persistStore, persistReducer } from 'redux-persist'\nimport storage from 'redux-persist/lib/storage' // defaults to localStorage for web\n\nimport rootReducer from './reducers'\n\nconst persistConfig = {\n  key: 'root',\n  storage,\n}\n\nconst persistedReducer = persistReducer(persistConfig, rootReducer)\n\nexport default () => {\n  let store = createStore(persistedReducer, applyMiddleware(thunk))\n  let persistor = persistStore(store)\n  return { store, persistor }\n}\n\n","import React from 'react';\nimport { BrowserRouter as Router, Route, Redirect } from 'react-router-dom';\nimport { ApolloProvider } from '@apollo/client';\nimport { Provider } from 'react-redux';\nimport DashboardController from './controllers/DashboardController';\nimport Login from './views/Login';\nimport { PersistGate } from 'redux-persist/integration/react'\n\nimport MomentUtils from '@date-io/moment';\nimport {\n  MuiPickersUtilsProvider\n} from '@material-ui/pickers'\n\nimport GClient from './graph';\nimport configureStore from './configureStore';\n\nimport './App.css';\n\nconst { store, persistor } = configureStore();\nconst client = GClient();\n\nfunction App() {\n  return (\n    <MuiPickersUtilsProvider utils={MomentUtils}>\n      <Provider store={store}>\n      <ApolloProvider client={client}>\n      <Router>\n      <PersistGate loading={null} persistor={persistor}>\n\n      <div className=\"App\">\n        <Route path=\"/\" exact component={Login} />\n        <Route path=\"/dashboard\" render={(props) => {\n          if(store.getState().auth.token){\n            return <DashboardController {...props} />\n          }else{\n            return <Redirect to=\"/\" />\n          }\n        }} />\n      </div>\n      </PersistGate>\n    </Router>\n      </ApolloProvider>\n    </Provider>\n  </MuiPickersUtilsProvider>\n\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { pdfjs } from 'react-pdf';\npdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`;\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import React from 'react';\n\nimport {\n    Dialog,\n    DialogTitle,\n    DialogContent,\n    DialogActions,\n    Button\n} from '@material-ui/core';\n\nimport GLBCard from '../glb-card'\nimport PDFCard from '../pdf-card';\n\nexport default function FilePreviewDialog(props){\n\n    const file = props.file || {}\n    const [data, setData] = React.useState(null)\n\n    const renderContent = () => {\n        if(data){\n        switch(file.extension){\n            case 'pdf':\n                return (\n                    <PDFCard data={data}/>\n                )\n            case 'glb':\n                return (\n                    <GLBCard data={data}/>\n                )\n            case 'png':\n                return (\n                    <img style={{width: '33%', height: '100%'}} src={data} />\n                )\n            default:\n                return null;\n        }\n    }\n    }\n\n    React.useEffect( async () => {\n        if(data) URL.revokeObjectURL(data)\n        if(props.file && props.ipfs){\n            console.log(\"Fetching\", props.file.cid)\n            let file =  props.ipfs.cat(props.file.cid)\n            let data = Buffer.from('')\n            for await (const chunk of file){\n              data = Buffer.concat([data, chunk])\n            }\n            console.log(\"Setting data\")\n            setData(URL.createObjectURL(new Blob([data])))\n        }\n    }, [props.file, props.ipfs])\n\n    const onClose = () => {\n        if(data) URL.revokeObjectURL(data)\n        if(props.onClose) props.onClose();\n    }\n\n    return (\n        <Dialog fullWidth maxWidth=\"lg\" open={props.open} onClose={onClose}>\n            <DialogTitle>{file.name}</DialogTitle>\n            <DialogContent style={{display: 'flex', flexDirection: 'column', alignItems: 'center'}}>\n                {renderContent()}\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={onClose}>Close</Button>\n            </DialogActions>\n        </Dialog>\n    )\n}","import React from 'react';\n\n\nexport default function GLBCard(props){\n    let canvas;\n    let scene;\n    let engine;\n\n  \n    React.useEffect(() => {\n        const onResizeWindow = () => {\n            if (engine) {\n              engine.resize();\n            }\n        }\n        if(props.data){\n\n        \n        if(!engine){\n        engine = new window.BABYLON.Engine(\n            canvas,\n            true\n        )\n        }\n\n        if(!scene){\n        scene = new window.BABYLON.Scene(engine)\n        scene.createDefaultEnvironment();\n        }\n\n        var camera = new window.BABYLON.ArcRotateCamera(\"camera\", -Math.PI / 2, Math.PI / 2.5, 3, new window.BABYLON.Vector3(0, 0, 10), scene);\n      \n        camera.setTarget(window.BABYLON.Vector3.Zero());\n        camera.minZ = 0;\n        camera.wheelPrecision = 7;\n        camera.speed = 0.5;\n\n        console.log(props.data)\n\n        window.BABYLON.SceneLoader.ImportMesh(null, \"\", props.data, scene, (e) => {\n            console.log(e)   \n        }, null, null, \".glb\")\n      \n        camera.attachControl(canvas, false);\n        window.addEventListener(\"resize\", onResizeWindow);\n        engine.runRenderLoop(function(){\n            scene.render();\n        });\n\n   \n    }\n    return () => {\n        if(engine){\n            engine.stopRenderLoop()\n        }\n        if(scene) {\n            scene.dispose()\n            scene = null\n        }\n\n        window.removeEventListener('resize', onResizeWindow)\n    }\n    }, [props.data])\n\n    const onCanvasLoad = (c) => {\n        if(c !== null){\n            canvas = c;\n        }\n    }\n\n    return (\n        <canvas style={{width: '100%'}} ref={onCanvasLoad}/>\n    )\n}","import React from 'react';\n\nimport { Document, Page } from 'react-pdf';\n\nexport default function PDFCard(props){\n    \n    const [ numPages, setNumPages ] = React.useState(null)\n    const [ pageNumber, setPageNumber ] = React.useState(1)\n\n    const onDocumentLoad = ({numPages}) => {\n        setNumPages(numPages)\n    }\n\n    return (\n        <Document\n            file={{data: props.data}}\n            onLoadSuccess={onDocumentLoad}>\n             {\n              Array.from(\n                new Array(numPages),\n                (el, index) => (\n                  <Page\n                    key={`page_${index + 1}`}\n                    pageNumber={index + 1}\n                  />\n                ),\n              )\n            }\n        </Document>\n    )\n}"],"sourceRoot":""}